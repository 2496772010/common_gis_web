(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cfcb7756"],{"04ba":function(e,t,a){"use strict";a("1489")},1489:function(e,t,a){},"38f6":function(e,t,a){},4827:function(e,t,a){"use strict";a("38f6")},aea1:function(e,t,a){"use strict";a.r(t);var n=a("f2bf");const c=Object(n["withScopeId"])("data-v-fba43802");Object(n["pushScopeId"])("data-v-fba43802");const o={class:"instruct-list"};Object(n["popScopeId"])();const i=c((e,t,a,c,i,s)=>{const r=Object(n["resolveComponent"])("base-map"),l=Object(n["resolveComponent"])("navigation-pane");return Object(n["openBlock"])(),Object(n["createBlock"])("div",null,[Object(n["createVNode"])(r,{onMapCreated:s.onMapCreated},null,8,["onMapCreated"]),Object(n["createVNode"])(l,{onReset:s.onResetClick,onConfirmClick:s.onConfirmClick},null,8,["onReset","onConfirmClick"]),Object(n["withDirectives"])(Object(n["createVNode"])("div",o,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(i.instruction,(e,t)=>(Object(n["openBlock"])(),Object(n["createBlock"])("div",{class:"instruct-list-item",onClick:t=>s.onItemCLick(e),key:t},Object(n["toDisplayString"])(e.instruction),9,["onClick"]))),128))],512),[[n["vShow"],i.instruction.length]])])});var s=a("3779");const r=Object(n["withScopeId"])("data-v-402052e1");Object(n["pushScopeId"])("data-v-402052e1");const l={class:"nav-pane"},d={class:"name"},u={class:"name"},p=Object(n["createTextVNode"])("确定"),m=Object(n["createTextVNode"])("重置");Object(n["popScopeId"])();const b=r((e,t,a,c,o,i)=>{const s=Object(n["resolveComponent"])("el-autocomplete"),b=Object(n["resolveComponent"])("el-form-item"),h=Object(n["resolveComponent"])("el-button"),j=Object(n["resolveComponent"])("el-form");return Object(n["openBlock"])(),Object(n["createBlock"])("div",l,[Object(n["createVNode"])(j,{"label-suffix":"："},{default:r(()=>[Object(n["createVNode"])(b,{label:"起点"},{default:r(()=>[Object(n["createVNode"])(s,{modelValue:o.startInput,"onUpdate:modelValue":t[1]||(t[1]=e=>o.startInput=e),"fetch-suggestions":i.querySearchAsyncStart,placeholder:"请输起点",onSelect:i.handleSelectStart},{default:r(({item:e})=>[Object(n["createVNode"])("div",d,Object(n["toDisplayString"])(e.name),1)]),_:1},8,["modelValue","fetch-suggestions","onSelect"])]),_:1}),Object(n["createVNode"])(b,{label:"终点"},{default:r(()=>[Object(n["createVNode"])(s,{modelValue:o.endInput,"onUpdate:modelValue":t[2]||(t[2]=e=>o.endInput=e),"fetch-suggestions":i.querySearchAsyncEnd,placeholder:"请输入终点",onSelect:i.handleSelectEnd},{default:r(({item:e})=>[Object(n["createVNode"])("div",u,Object(n["toDisplayString"])(e.name),1)]),_:1},8,["modelValue","fetch-suggestions","onSelect"])]),_:1}),Object(n["createVNode"])(b,null,{default:r(()=>[Object(n["createVNode"])(h,{onClick:i.confirmClick},{default:r(()=>[p]),_:1},8,["onClick"]),Object(n["createVNode"])(h,{onClick:i.resetClick},{default:r(()=>[m]),_:1},8,["onClick"])]),_:1})]),_:1})])});var h=a("365c"),j=a("ed08"),f={name:"NavigationPane",data(){return{startInput:"",endInput:"",targetLocation:"",originLocation:""}},methods:{async querySearchAsyncStart(e,t){let a=await h["a"].getInputTips({keywords:e}),n=a.data.tips;t(n)},handleSelectStart(e){this.startInput=e.name,this.originLocation=e.location},async querySearchAsyncEnd(e,t){let a=await h["a"].getInputTips({keywords:e}),n=a.data.tips;t(n)},handleSelectEnd(e){this.endInput=e.name,this.targetLocation=e.location},confirmClick(){this.$emit("confirmClick",Object(j["d"])(this.originLocation,this.targetLocation))},resetClick(){this.startInput="",this.endInput="",this.$emit("reset")}}},g=(a("4827"),a("6b0d")),O=a.n(g);const C=O()(f,[["render",b],["__scopeId","data-v-402052e1"]]);var v=C,w=a("3e6b"),k=a("5831"),S=a("f403"),y=a("4cdf"),V=a("6c77"),I=a("6cbf");const L=new V["c"]({image:new I["a"]({src:"./小车.png",scale:.2})});var N={name:"ZjVisualization",components:{NavigationPane:v,BaseMap:s["a"]},data(){return{map:null,zjLayer:new w["a"],instruction:[],timeInterval:null,dataFlowLayer:new w["a"]({source:new k["a"]})}},methods:{onMapCreated(e){this.map=e,this.map.addLayer(this.dataFlowLayer)},async onConfirmClick(e){let[t,a,n]=await e;this.zjLayer.setSource(t),this.map.addLayer(this.zjLayer),this.instruction=a,t&&(this.map.getView().fit(t.getExtent()),this.map.getView().setZoom(this.map.getView().getZoom()-2)),this.moveCar(n)},onItemCLick(e){this.map.getView().setCenter(e.location),this.map.getView().setZoom(17)},onResetClick(){this.zjLayer.getSource().clear(),this.instruction=[],this.dataFlowLayer.getSource().clear()},moveCar(e){let t=0;this.timeInterval=setInterval(()=>{this.dataFlowLayer.getSource()&&this.dataFlowLayer.getSource().clear();let a=new y["a"]({geometry:new S["a"](e[t])});a.setStyle(L),this.dataFlowLayer.getSource().addFeature(a),this.map.getView().setCenter(e[t]),t+=1,t>=e.length-1&&clearInterval(this.timeInterval)},100)}}};a("04ba");const _=O()(N,[["render",i],["__scopeId","data-v-fba43802"]]);t["default"]=_}}]);
//# sourceMappingURL=chunk-cfcb7756.746c09cc.js.map