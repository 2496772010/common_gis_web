{"version":3,"sources":["webpack:///./src/views/travel/components/NavPane.vue?38bf","webpack:///./src/views/travel/navigation/JiuDNav.vue","webpack:///./src/views/travel/navigation/JiuDNav.vue?764b","webpack:///./src/views/travel/components/ImageDescribe.vue?195f","webpack:///./src/GaoDeCodeconfig.js","webpack:///./src/views/travel/components/NavPane.vue","webpack:///./src/views/travel/components/NavPane.vue?4031","webpack:///./src/views/travel/components/ImageDescribe.vue","webpack:///./src/views/travel/components/ImageDescribe.vue?c998"],"names":["_createBlock","_createVNode","_component_base_map","onMapCreated","$options","_component_nav_pane","mode","onConfirmClick","_component_image_describe","ref","img","$data","content","name","components","NavPane","BaseMap","ImageDescribe","data","map","jdLayer","VectorLayer","select","popup","mounted","methods","this","addLayer","Select","addInteraction","Popup","popupClass","closeBox","onshow","console","log","onclose","autoPan","autoPanAnimation","duration","addOverlay","initSelect","res","source","getView","setCenter","point","split","setSource","render","change","Promise","resolve","getFeatures","on","e","feature","element","getGeometry","Point","properties","getProperties","length","url","address","then","domContent","$refs","imgDesc","$el","outerHTML","show","getFirstCoordinate","hide","__exports__","TRAVEL_CODES","restaurant_code","vecation_code","class","_component_el_form","label-suffix","label-width","inline","label-position","_component_el_form_item","label","_component_el_autocomplete","$event","fetch-suggestions","placeholder","$props","onSelect","default","item","_toDisplayString","_component_el_input_number","min","max","model-value","style","_component_el_button","onClick","props","type","String","startInput","endInput","targetLocation","originLocation","distance","queryString","cb","api","getInputTips","keywords","results","tips","value","value1","toRaw","location","handleSelectEnd","confirmClick","obj","$emit","aroundAnalysis","resetClick","src","_Fragment","_renderList","Object","keys","key"],"mappings":"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","file":"assets/js/chunk-46d97a4b.8793bcfa.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./NavPane.vue?vue&type=style&index=0&id=60d8cdc6&lang=less&scoped=true\"","<template>\r\n    <div>\r\n        <base-map @mapCreated=\"onMapCreated\">\r\n        </base-map>\r\n        <nav-pane mode=\"酒店\" @confirmClick='confirmClick'></nav-pane>\r\n        <image-describe ref=\"imgDesc\" :img=\"img\" :content=\"content\"></image-describe>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import BaseMap from \"../../../components/BaseMap\";\r\n    import NavPane from \"../components/NavPane\";\r\n    import {Vector as VectorLayer} from 'ol/layer'\r\n    import {Point} from 'ol/geom'\r\n    import {Select} from 'ol/interaction'\r\n    import Popup from 'ol-ext/overlay/Popup'\r\n    import 'ol-ext/overlay/Popup.css'\r\n    import 'ol-ext/overlay/Popup.anim.css'\r\n    import ImageDescribe from \"../components/ImageDescribe\";\r\n\r\n    export default {\r\n        name: \"jiuDNav\",\r\n        components: {NavPane, BaseMap, ImageDescribe},\r\n        data() {\r\n            return {\r\n                map: null,\r\n                jdLayer: new VectorLayer({}),\r\n                select: null,\r\n                popup: null,\r\n                img: '',\r\n                content: {}\r\n            }\r\n        },\r\n        mounted() {\r\n        },\r\n        methods: {\r\n            onMapCreated(map) {\r\n                this.map = map\r\n                this.map.addLayer(this.jdLayer)\r\n                this.select = new Select({})\r\n                this.map.addInteraction(this.select)\r\n                this.popup = new Popup({\r\n                    popupClass: \"default\", //\"tooltips\", \"warning\" \"black\" \"default\", \"tips\", \"shadow\",\r\n                    closeBox: true,\r\n                    onshow: function () {\r\n                        console.log(\"You opened the box\");\r\n                    },\r\n                    onclose: function () {\r\n                        console.log(\"You close the box\");\r\n                    },\r\n                    autoPan: true,\r\n                    autoPanAnimation: {duration: 250}\r\n                })\r\n                this.map.addOverlay(this.popup)\r\n                this.initSelect()\r\n            },\r\n            async confirmClick(res) {\r\n                let source = await res.source;\r\n                this.map.getView().setCenter(res.point.split(','))\r\n                this.jdLayer.setSource(source)\r\n                this.map.render()\r\n            },\r\n            change(img, content) {\r\n                return new Promise((resolve => {\r\n                    this.img = img\r\n                    this.content = content\r\n                    resolve('ok')\r\n                }))\r\n            },\r\n            initSelect() {\r\n                this.select.getFeatures().on(['add'], (e) => {\r\n                    const feature = e.element;\r\n                    if (feature.getGeometry() instanceof Point) {\r\n                        let properties = feature.getProperties().properties\r\n                        console.log(properties)\r\n                        let img = properties['photos'] && properties['photos'].length ? properties['photos'][0].url : ''\r\n                        let content = {\r\n                            '名字': properties.name,\r\n                            '地址': properties.address,\r\n                            '最低价格': \"￥\" + properties['biz_ext']['lowest_price'],\r\n                            '电话': properties['tel']\r\n                        }\r\n                        this.change(img, content).then(() => {\r\n                            let domContent = this.$refs.imgDesc.$el.outerHTML\r\n                            this.popup.show(feature.getGeometry().getFirstCoordinate(), domContent);\r\n                        })\r\n\r\n                    }\r\n\r\n                });\r\n                this.select.getFeatures().on(['remove'], function () {\r\n                    this.popup.hide();\r\n                })\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import { render } from \"./JiuDNav.vue?vue&type=template&id=5bab763f&scoped=true\"\nimport script from \"./JiuDNav.vue?vue&type=script&lang=js\"\nexport * from \"./JiuDNav.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\DEV\\\\JS\\\\supermap_proj1\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5bab763f\"]])\n\nexport default __exports__","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ImageDescribe.vue?vue&type=style&index=0&id=7e8f25bd&lang=less&scoped=true\"","//风景名胜代码\r\nexport const TRAVEL_CODES='110000|'+\r\n'110100|'+\r\n'110101|'+\r\n'110102|'+\r\n'110103|'+\r\n'110104|'+\r\n'110105|'+\r\n'110106|'+\r\n'110200|'+\r\n'110201|'+\r\n'110202|'+\r\n'110203|'+\r\n'110204|'+\r\n'110205|'+\r\n'110206|'+\r\n'110207|'+\r\n'110208|'+\r\n'110209|'+\r\n'110210'\r\n//酒店服务代码\r\nexport const restaurant_code='100000|100100|100101|100102|100103|100104|100105|100200|100201'\r\n//交通服务代码\r\nexport const vecation_code='150000|'+\r\n'150100|'+\r\n'150101|'+\r\n'150102|'+\r\n'150104|'+\r\n'150105|'+\r\n'150106|'+\r\n'150107|'+\r\n'150210|'+\r\n'150300|'+\r\n'150301|'+\r\n'150302|'+\r\n'150303|'+\r\n'150304|'+\r\n'150305|'+\r\n'150306|'+\r\n'150307|'+\r\n'150400|'+\r\n'150401|'+\r\n'150402|'+\r\n'150403|'+\r\n'150500|'+\r\n'150501|'+\r\n'150600|'+\r\n'150700|'+\r\n'150701|'+\r\n'150702|'+\r\n'150703|'+\r\n'150704|'+\r\n'150705|'+\r\n'150706|'+\r\n'150800|'+\r\n'150900|'+\r\n'150903|'+\r\n'150904|'+\r\n'150905|'+\r\n'150906|'+\r\n'150907|'+\r\n'150908|'+\r\n'150909|'+\r\n'151000|'+\r\n'151001|'+\r\n'151002|'+\r\n'151003|'+\r\n'151100|'+\r\n'151200|'+\r\n'151300|'+\r\n'151400|'+\r\n'151401|'+\r\n'151402|'+\r\n'151403|'+\r\n'151404|'+\r\n'151405'\r\n\r\n","<template>\r\n  <div class=\"nav-pane\">\r\n    <el-form  label-suffix=\"：\" label-width=\"auto\" inline label-position=\"right\">\r\n      <el-form-item label=\"起点\">\r\n        <el-autocomplete\r\n            v-model=\"startInput\"\r\n            :fetch-suggestions=\"querySearchAsyncStart\"\r\n            :placeholder=\"'请输起点查找'+mode\"\r\n            @select=\"handleSelectStart\"\r\n        >\r\n          <template #default=\"{ item }\">\r\n            <div class=\"name\">{{ item.name }}</div>\r\n          </template>\r\n        </el-autocomplete>\r\n      </el-form-item>\r\n      <el-form-item label=\"范围\">\r\n        <el-input-number :min=\"1000\" :max=\"10000\" :model-value=\"distance\"></el-input-number>\r\n        m\r\n      </el-form-item>\r\n      <el-form-item  style=\"display: flex;justify-content: center;align-items: center\">\r\n        <el-button @click=\"confirmClick\">确定</el-button>\r\n        <el-button @click=\"resetClick\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import api from \"../../../api\";\r\n  import {aroundAnalysis} from \"../../../utils\";\r\n  import {TRAVEL_CODES, restaurant_code, vecation_code} from \"../../../GaoDeCodeconfig\";\r\n  import {toRaw} from '@vue/reactivity';\r\n\r\n  export default {\r\n    name: \"NavPane\",\r\n    props: {\r\n      mode: {type: String, default: () => ''}\r\n    },\r\n    data() {\r\n      return {\r\n        startInput: '',\r\n        endInput: '',\r\n        targetLocation: '',\r\n        originLocation: '',\r\n        distance: 3000\r\n      }\r\n    },\r\n    methods: {\r\n      async querySearchAsyncStart(queryString, cb) {\r\n        let res = await api.getInputTips({keywords: queryString})\r\n        let results = res.data.tips\r\n        cb(results)\r\n      },\r\n      async handleSelectStart(value) {\r\n        let value1 = toRaw(value)\r\n        this.startInput = value1.name\r\n        this.originLocation = value1.location\r\n      },\r\n      async querySearchAsyncEnd(queryString, cb) {\r\n        let res = await api.getInputTips({keywords: queryString})\r\n        let results = res.data.tips\r\n        cb(results)\r\n      },\r\n      handleSelectEnd(value) {\r\n        this.endInput = value.name\r\n        this.targetLocation = value.location\r\n      },\r\n      confirmClick() {\r\n        let obj = {\r\n          \"酒店\": restaurant_code,\r\n          \"景点\": TRAVEL_CODES,\r\n          \"车站\": vecation_code\r\n        }\r\n        this.$emit('confirmClick',\r\n          {\r\n            source: aroundAnalysis(this.originLocation, this.distance, obj[this.mode], this.mode),\r\n            point: this.originLocation\r\n          }\r\n        )\r\n      },\r\n      resetClick() {\r\n      }\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .nav-pane {\r\n    position: absolute;\r\n    top: 30px;\r\n    left: 40px;\r\n    z-index: 99;\r\n    width: 300px;\r\n    height: 200px;\r\n    background: #54b2ff;\r\n    display: flex;\r\n    justify-content: center;\r\n    border-radius: 4px;\r\n    opacity: 0.75;\r\n    padding: 10px;\r\n\r\n  }\r\n</style>\r\n","import { render } from \"./NavPane.vue?vue&type=template&id=60d8cdc6&scoped=true\"\nimport script from \"./NavPane.vue?vue&type=script&lang=js\"\nexport * from \"./NavPane.vue?vue&type=script&lang=js\"\n\nimport \"./NavPane.vue?vue&type=style&index=0&id=60d8cdc6&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\DEV\\\\JS\\\\supermap_proj1\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-60d8cdc6\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"image-describe\">\r\n        <div class=\"image\">\r\n            <img style=\"width: 200px;height: 200px\"  :src=\"img\">\r\n        </div>\r\n        <div class=\"content\">\r\n            <div class=\"content-item\" v-for=\"item in Object.keys(content)\" :key=\"item\">\r\n                <span>{{item}}:</span>\r\n                <span>{{content[item]}}</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"ImageDescribe\",\r\n        props: {\r\n            img: {\r\n                type: String\r\n            },\r\n            content: {\r\n                type: Object,\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    .image-describe {\r\n        display: flex;\r\n        flex-direction: row;\r\n        .content{\r\n            margin-left: 10px;\r\n            align-content: center;\r\n            justify-content: space-evenly;\r\n            height: 150px;\r\n            display: flex;\r\n            flex-direction: column;\r\n            .content-item{\r\n                display: flex;\r\n\r\n            }\r\n        }\r\n    }\r\n</style>","import { render } from \"./ImageDescribe.vue?vue&type=template&id=7e8f25bd&scoped=true\"\nimport script from \"./ImageDescribe.vue?vue&type=script&lang=js\"\nexport * from \"./ImageDescribe.vue?vue&type=script&lang=js\"\n\nimport \"./ImageDescribe.vue?vue&type=style&index=0&id=7e8f25bd&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\DEV\\\\JS\\\\supermap_proj1\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7e8f25bd\"]])\n\nexport default __exports__"],"sourceRoot":""}