{"version":3,"sources":["webpack:///./src/views/travel/components/NavPane.vue?38bf","webpack:///./src/views/travel/components/ImageDescribe.vue?195f","webpack:///./src/GaoDeCodeconfig.js","webpack:///./src/views/travel/components/NavPane.vue","webpack:///./src/views/travel/components/NavPane.vue?4031","webpack:///./src/views/travel/navigation/StationNav.vue","webpack:///./src/views/travel/navigation/StationNav.vue?ae49","webpack:///./src/views/travel/components/ImageDescribe.vue","webpack:///./src/views/travel/components/ImageDescribe.vue?c998"],"names":["TRAVEL_CODES","restaurant_code","vecation_code","class","_createBlock","_createVNode","_component_el_form","label-suffix","label-width","inline","label-position","_component_el_form_item","label","_component_el_autocomplete","$data","$event","fetch-suggestions","$options","placeholder","$props","onSelect","default","item","_toDisplayString","name","_component_el_input_number","min","max","model-value","style","_component_el_button","onClick","props","mode","type","String","data","startInput","endInput","targetLocation","originLocation","distance","methods","queryString","cb","res","api","getInputTips","keywords","results","tips","value","value1","toRaw","this","location","handleSelectEnd","confirmClick","obj","$emit","source","aroundAnalysis","point","resetClick","__exports__","render","_component_base_map","onMapCreated","_component_nav_pane","onConfirmClick","_component_image_describe","ref","img","content","components","ImageDescribe","NavPane","BaseMap","map","jdLayer","VectorLayer","select","popup","mounted","addLayer","Select","addInteraction","Popup","popupClass","closeBox","onshow","console","log","onclose","autoPan","autoPanAnimation","duration","addOverlay","initSelect","getView","setCenter","split","setSource","change","Promise","resolve","getFeatures","on","e","feature","element","getGeometry","Point","properties","getProperties","length","url","address","then","domContent","$refs","imgDesc","$el","outerHTML","show","getFirstCoordinate","hide","src","_Fragment","_renderList","Object","keys","key"],"mappings":"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","file":"assets/js/chunk-6785fd2e.456ac267.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./NavPane.vue?vue&type=style&index=0&id=60d8cdc6&lang=less&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ImageDescribe.vue?vue&type=style&index=0&id=7e8f25bd&lang=less&scoped=true\"","//风景名胜代码\r\nexport const TRAVEL_CODES='110000|'+\r\n'110100|'+\r\n'110101|'+\r\n'110102|'+\r\n'110103|'+\r\n'110104|'+\r\n'110105|'+\r\n'110106|'+\r\n'110200|'+\r\n'110201|'+\r\n'110202|'+\r\n'110203|'+\r\n'110204|'+\r\n'110205|'+\r\n'110206|'+\r\n'110207|'+\r\n'110208|'+\r\n'110209|'+\r\n'110210'\r\n//酒店服务代码\r\nexport const restaurant_code='100000|100100|100101|100102|100103|100104|100105|100200|100201'\r\n//交通服务代码\r\nexport const vecation_code='150000|'+\r\n'150100|'+\r\n'150101|'+\r\n'150102|'+\r\n'150104|'+\r\n'150105|'+\r\n'150106|'+\r\n'150107|'+\r\n'150210|'+\r\n'150300|'+\r\n'150301|'+\r\n'150302|'+\r\n'150303|'+\r\n'150304|'+\r\n'150305|'+\r\n'150306|'+\r\n'150307|'+\r\n'150400|'+\r\n'150401|'+\r\n'150402|'+\r\n'150403|'+\r\n'150500|'+\r\n'150501|'+\r\n'150600|'+\r\n'150700|'+\r\n'150701|'+\r\n'150702|'+\r\n'150703|'+\r\n'150704|'+\r\n'150705|'+\r\n'150706|'+\r\n'150800|'+\r\n'150900|'+\r\n'150903|'+\r\n'150904|'+\r\n'150905|'+\r\n'150906|'+\r\n'150907|'+\r\n'150908|'+\r\n'150909|'+\r\n'151000|'+\r\n'151001|'+\r\n'151002|'+\r\n'151003|'+\r\n'151100|'+\r\n'151200|'+\r\n'151300|'+\r\n'151400|'+\r\n'151401|'+\r\n'151402|'+\r\n'151403|'+\r\n'151404|'+\r\n'151405'\r\n\r\n","<template>\r\n  <div class=\"nav-pane\">\r\n    <el-form  label-suffix=\"：\" label-width=\"auto\" inline label-position=\"right\">\r\n      <el-form-item label=\"起点\">\r\n        <el-autocomplete\r\n            v-model=\"startInput\"\r\n            :fetch-suggestions=\"querySearchAsyncStart\"\r\n            :placeholder=\"'请输起点查找'+mode\"\r\n            @select=\"handleSelectStart\"\r\n        >\r\n          <template #default=\"{ item }\">\r\n            <div class=\"name\">{{ item.name }}</div>\r\n          </template>\r\n        </el-autocomplete>\r\n      </el-form-item>\r\n      <el-form-item label=\"范围\">\r\n        <el-input-number :min=\"1000\" :max=\"10000\" :model-value=\"distance\"></el-input-number>\r\n        m\r\n      </el-form-item>\r\n      <el-form-item  style=\"display: flex;justify-content: center;align-items: center\">\r\n        <el-button @click=\"confirmClick\">确定</el-button>\r\n        <el-button @click=\"resetClick\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import api from \"../../../api\";\r\n  import {aroundAnalysis} from \"../../../utils\";\r\n  import {TRAVEL_CODES, restaurant_code, vecation_code} from \"../../../GaoDeCodeconfig\";\r\n  import {toRaw} from '@vue/reactivity';\r\n\r\n  export default {\r\n    name: \"NavPane\",\r\n    props: {\r\n      mode: {type: String, default: () => ''}\r\n    },\r\n    data() {\r\n      return {\r\n        startInput: '',\r\n        endInput: '',\r\n        targetLocation: '',\r\n        originLocation: '',\r\n        distance: 3000\r\n      }\r\n    },\r\n    methods: {\r\n      async querySearchAsyncStart(queryString, cb) {\r\n        let res = await api.getInputTips({keywords: queryString})\r\n        let results = res.data.tips\r\n        cb(results)\r\n      },\r\n      async handleSelectStart(value) {\r\n        let value1 = toRaw(value)\r\n        this.startInput = value1.name\r\n        this.originLocation = value1.location\r\n      },\r\n      async querySearchAsyncEnd(queryString, cb) {\r\n        let res = await api.getInputTips({keywords: queryString})\r\n        let results = res.data.tips\r\n        cb(results)\r\n      },\r\n      handleSelectEnd(value) {\r\n        this.endInput = value.name\r\n        this.targetLocation = value.location\r\n      },\r\n      confirmClick() {\r\n        let obj = {\r\n          \"酒店\": restaurant_code,\r\n          \"景点\": TRAVEL_CODES,\r\n          \"车站\": vecation_code\r\n        }\r\n        this.$emit('confirmClick',\r\n          {\r\n            source: aroundAnalysis(this.originLocation, this.distance, obj[this.mode], this.mode),\r\n            point: this.originLocation\r\n          }\r\n        )\r\n      },\r\n      resetClick() {\r\n      }\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .nav-pane {\r\n    position: absolute;\r\n    top: 30px;\r\n    left: 40px;\r\n    z-index: 99;\r\n    width: 300px;\r\n    height: 200px;\r\n    background: #54b2ff;\r\n    display: flex;\r\n    justify-content: center;\r\n    border-radius: 4px;\r\n    opacity: 0.75;\r\n    padding: 10px;\r\n\r\n  }\r\n</style>\r\n","import { render } from \"./NavPane.vue?vue&type=template&id=60d8cdc6&scoped=true\"\nimport script from \"./NavPane.vue?vue&type=script&lang=js\"\nexport * from \"./NavPane.vue?vue&type=script&lang=js\"\n\nimport \"./NavPane.vue?vue&type=style&index=0&id=60d8cdc6&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\DEV\\\\JS\\\\supermap_proj1\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-60d8cdc6\"]])\n\nexport default __exports__","<template>\r\n    <div>\r\n        <base-map @mapCreated=\"onMapCreated\">\r\n        </base-map>\r\n        <nav-pane mode=\"车站\" @confirmClick='confirmClick'></nav-pane>\r\n        <image-describe ref=\"imgDesc\" :img=\"img\" :content=\"content\"></image-describe>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import BaseMap from \"../../../components/BaseMap\";\r\n    import NavPane from \"../components/NavPane\";\r\n    import {Vector as VectorLayer} from 'ol/layer'\r\n    import {Point} from 'ol/geom'\r\n    import {Select} from 'ol/interaction'\r\n    import Popup from 'ol-ext/overlay/Popup'\r\n    import 'ol-ext/overlay/Popup.css'\r\n    import 'ol-ext/overlay/Popup.anim.css'\r\n    import ImageDescribe from \"../components/ImageDescribe\";\r\n\r\n    export default {\r\n        name: \"jdNav\",\r\n        components: {ImageDescribe, NavPane, BaseMap},\r\n        data() {\r\n            return {\r\n                map: null,\r\n                jdLayer: new VectorLayer({}),\r\n                select: null,\r\n                popup: null,\r\n                img: '',\r\n                content: {}\r\n            }\r\n        },\r\n        mounted() {\r\n        },\r\n        methods: {\r\n            onMapCreated(map) {\r\n                this.map = map\r\n                this.map.addLayer(this.jdLayer)\r\n                this.select = new Select({})\r\n                this.map.addInteraction(this.select)\r\n                this.popup = new Popup({\r\n                    popupClass: \"default\", //\"tooltips\", \"warning\" \"black\" \"default\", \"tips\", \"shadow\",\r\n                    closeBox: true,\r\n                    onshow: function () {\r\n                        console.log(\"You opened the box\");\r\n                    },\r\n                    onclose: function () {\r\n                        console.log(\"You close the box\");\r\n                    },\r\n                    autoPan: true,\r\n                    autoPanAnimation: {duration: 250}\r\n                })\r\n                this.map.addOverlay(this.popup)\r\n                this.initSelect()\r\n            },\r\n            async confirmClick(res) {\r\n                let source = await res.source;\r\n                this.map.getView().setCenter(res.point.split(','))\r\n                this.jdLayer.setSource(source)\r\n                this.map.render()\r\n            },\r\n            change(img, content) {\r\n                return new Promise((resolve => {\r\n                    this.img = img\r\n                    this.content = content\r\n                    resolve('ok')\r\n                }))\r\n            },\r\n            initSelect() {\r\n                this.select.getFeatures().on(['add'], (e) => {\r\n                    const feature = e.element;\r\n                    if (feature.getGeometry() instanceof Point) {\r\n                        let properties = feature.getProperties().properties\r\n                        console.log(properties)\r\n                        let img = properties['photos'] && properties['photos'].length ? properties['photos'][0].url : ''\r\n                        let content = {\r\n                            '名字': properties.name,\r\n                            '地址': properties.address,\r\n                            '电话': properties['tel']\r\n                        }\r\n                        this.change(img, content).then(() => {\r\n                            let domContent = this.$refs.imgDesc.$el.outerHTML\r\n                            this.popup.show(feature.getGeometry().getFirstCoordinate(), domContent);\r\n                        })\r\n\r\n                    }\r\n\r\n                });\r\n                this.select.getFeatures().on(['remove'], function () {\r\n                    this.popup.hide();\r\n                })\r\n            }\r\n\r\n\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import { render } from \"./StationNav.vue?vue&type=template&id=76ec5ba0&scoped=true\"\nimport script from \"./StationNav.vue?vue&type=script&lang=js\"\nexport * from \"./StationNav.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\DEV\\\\JS\\\\supermap_proj1\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-76ec5ba0\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"image-describe\">\r\n        <div class=\"image\">\r\n            <img style=\"width: 200px;height: 200px\"  :src=\"img\">\r\n        </div>\r\n        <div class=\"content\">\r\n            <div class=\"content-item\" v-for=\"item in Object.keys(content)\" :key=\"item\">\r\n                <span>{{item}}:</span>\r\n                <span>{{content[item]}}</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"ImageDescribe\",\r\n        props: {\r\n            img: {\r\n                type: String\r\n            },\r\n            content: {\r\n                type: Object,\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    .image-describe {\r\n        display: flex;\r\n        flex-direction: row;\r\n        .content{\r\n            margin-left: 10px;\r\n            align-content: center;\r\n            justify-content: space-evenly;\r\n            height: 150px;\r\n            display: flex;\r\n            flex-direction: column;\r\n            .content-item{\r\n                display: flex;\r\n\r\n            }\r\n        }\r\n    }\r\n</style>","import { render } from \"./ImageDescribe.vue?vue&type=template&id=7e8f25bd&scoped=true\"\nimport script from \"./ImageDescribe.vue?vue&type=script&lang=js\"\nexport * from \"./ImageDescribe.vue?vue&type=script&lang=js\"\n\nimport \"./ImageDescribe.vue?vue&type=style&index=0&id=7e8f25bd&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\DEV\\\\JS\\\\supermap_proj1\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7e8f25bd\"]])\n\nexport default __exports__"],"sourceRoot":""}