{"version":3,"sources":["webpack:///./src/views/travel/goHandan/ArtistHandan.vue","webpack:///./src/views/travel/goHandan/ArtistHandan.vue?c455"],"names":["_createBlock","_createVNode","_component_base_map","onMapCreated","$options","_component_el_button","type","style","onClick","$data","_component_describe_pane","name","ref","id","contentList","components","BaseMap","DescribePane","data","routeCoords","center","desc","content","img","Style","text","TextStyle","offsetY","fill","FillStyle","color","image","IconStyle","src","scale","timeInterval","civilLayer","VectorLayer","overLay","describe","source","select","setup","map","methods","this","init","Select","addInteraction","initSelect","addLayer","VectorSource","setSource","Popup","popupClass","closeBox","onshow","console","log","onclose","positioning","autoPan","autoPanAnimation","duration","addOverlay","change","Promise","resolve","playRoute","clearInterval","a","setInterval","length","point","Feature","geometry","Point","properties","setStyle","setProperties","titleName","addFeature","center1","line","LineString","then","show","$refs","describePane","$el","outerHTML","setPixelPosition","getView","setCenter","getFeatures","on","e","feature","element","getGeometry","getProperties","domContent","getFirstCoordinate","hide","__exports__","render"],"mappings":"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","file":"assets/js/chunk-2d0e6714.3921900e.js","sourcesContent":["<template>\r\n    <div>\r\n        <base-map @mapCreated=\"onMapCreated\"></base-map>\r\n        <el-button type=\"primary\" style=\"position:absolute;z-index: 99;left: 50%;transform: translateX(-50%)\"\r\n                   @click=\"playRoute(source)\">重播\r\n        </el-button>\r\n        <describe-pane :name=\"name\" ref=\"describePane\" id=\"describePane\" :contentList=\"describe\"></describe-pane>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import BaseMap from \"../../../components/BaseMap\";\r\n    import {Vector as VectorLayer} from 'ol/layer'\r\n    import {Vector as VectorSource} from 'ol/source'\r\n    import {Point, LineString} from 'ol/geom'\r\n    import Feature from 'ol/Feature'\r\n    import DescribePane from \"../components/DescribePane\";\r\n    import Popup from 'ol-ext/overlay/FixedPopup'\r\n    import 'ol-ext/overlay/Popup.css'\r\n    import 'ol-ext/overlay/Popup.anim.css'\r\n    import {ref} from 'vue'\r\n    import {Style, Text as TextStyle, Icon as IconStyle, Fill as FillStyle} from 'ol/style'\r\n    import {Select} from 'ol/interaction'\r\n\r\n    export default {\r\n        name: \"ArtistHandan\",\r\n        components: {BaseMap, DescribePane},\r\n        data() {\r\n            return {\r\n                routeCoords: [\r\n                    {\r\n                        name: '丛台置酒',\r\n                        center: [114.491085, 36.613869],\r\n                        desc: [\r\n                            {\r\n                                content: '丛台置酒\\n' +\r\n                                    '\\n' +\r\n                                    '置酒在高台，由来糠慨悲歌地。\\n' +\r\n                                    '\\n' +\r\n                                    '平胡传袨胡，莫负风云际会身。',\r\n                                img: 'https://inews.gtimg.com/newsapp_bt/0/13068890139/1000'\r\n                            }, {\r\n                                content: \"这幅对联是著名书法家于右任老先生于1931年游丛台时即兴手书。汉武帝刘秀在丛台之上摆酒设宴结交了马武将军，奠定了东汉王朝的基业。\\n\" +\r\n                                    \"\\n\" +\r\n                                    \"公元23年，刘玄称帝，年号更始，刘秀被封为太常偏将军。公元23年9月，更始帝刘玄率军攻入长安，宣告新莽王朝覆灭。\\n\" +\r\n                                    \"\\n\" +\r\n                                    \"刘玄帝为尽快收复河北各州郡，派刘秀以破虏将军行大司马的名义，北渡黄河招抚河北各方势力。\",\r\n                                img: 'https://p0.itc.cn/images01/20210121/368c7e4bb29c472e83ef47ba4a9f326c.jpeg'\r\n                            },\r\n                            {\r\n                                content: \"公元24年，刘秀在谢尚书的协助下，率军攻破邯郸，打败了在邯郸称帝的王郎，当地豪强地主纷纷归附，刘秀乘势占据了黄河以北广大地区，声威显赫。\",\r\n                                img: \"https://p4.itc.cn/images01/20210121/fd2477ee77b44ca3aba4dcf3ed770508.png\"\r\n                            }, {\r\n                                content: \"更始帝刘玄见刘秀羽翼丰满，为防备刘秀称帝，便封刘秀为萧王，令其回长安受封领赏，刘秀以河北未定为由，婉言拒绝了刘玄的命令。\",\r\n                                img: \"https://p3.itc.cn/images01/20210121/3ee73cc9c756420294659e56ff0dd763.jpeg\"\r\n                            }, {\r\n                                content: \"刘玄令自己的心腹谢尚书率军屯驻邯郸，以便控制和监视刘秀，二人同城而居，各自为政，使刘秀如鲠在喉。\\n\" +\r\n                                    \"\\n\" +\r\n                                    \"马武为东汉著名将领。少年时为避仇家，客居江夏，投奔了绿林军，随谢尚书助刘秀攻打邯郸城，与刘秀曾有共赴沙场的生死之交。\",\r\n                                img: \"https://p5.itc.cn/images01/20210121/e36def40eaa544868383356dda4592e1.jpeg\"\r\n                            }\r\n                        ],\r\n                        style: new Style({\r\n                            text: new TextStyle({\r\n                                text: '丛台置酒',\r\n                                offsetY: 30,\r\n                                fill: new FillStyle({\r\n                                    color: '#000000'\r\n                                })\r\n                            }),\r\n                            image: new IconStyle({\r\n                                src: './handan/ctzj.jpg',\r\n                                scale: 0.1\r\n                            })\r\n                        })\r\n\r\n                    },\r\n                    {\r\n                        name: '负荆请罪',\r\n                        center: [114.486781, 36.618458],\r\n                        desc: [\r\n                            {\r\n                                img: './handan/fjqzjpg.jpg',\r\n                                content: '蔺相如因为“完璧归赵”有功而被封为上卿，位在廉颇之上。廉颇很不服气，扬言要当面羞辱蔺相如。蔺相如得知后，尽量回避、容让，不与廉颇发生冲突。\\n' +\r\n                                    '\\n' +\r\n                                    '蔺相如的门客以为他畏惧廉颇，然而蔺相如说：“秦国不敢侵略我们赵国，是因为有我和廉将军。我对廉将军容忍、退让，是把国家的危难放在前面，把个人的私仇放在后面啊！”\\n' +\r\n                                    '\\n' +\r\n                                    '这话传到了廉颇耳朵里，廉颇十分感动，便光着上身，背负荆杖，来到蔺相如家请罪。他羞愧地对商相如说：“我真是一个糊涂人，想不到你能这样地宽宏大量！”两个人终于结成誓同生死的朋友。'\r\n                            }\r\n                        ],\r\n                        style: new Style({\r\n                            text: new TextStyle({\r\n                                text: '负荆请罪',\r\n                                offsetY: 30,\r\n                                fill: new FillStyle({\r\n                                    color: '#000000'\r\n                                })\r\n                            }),\r\n                            image: new IconStyle({\r\n                                src: './handan/fjqzjpg.jpg',\r\n                                scale: 0.1\r\n                            })\r\n                        })\r\n                    },\r\n                    {\r\n                        name: '邯郸学步',\r\n                        center: [114.487278, 36.620348],\r\n                        desc: [\r\n                            {\r\n                                img: './handan/hdxb.jpg',\r\n                                content: '邯郸学步，也作“学步邯郸”。比喻一昧地模仿别人，不仅学不到本事，反而把原来的本事也丢了。故事讲的是，战国时期，一个燕国人听说赵国邯郸人走姿很漂亮，便来到邯郸学习邯郸人走路。未得其能，又忘记自己的走姿，最后爬着回到了燕国。李白诗曰： 寿陵失本步，笑煞邯郸人。但有学者研究认为，邯郸学步其实学的不是普通走路的步法，而是学的邯郸舞步。当时在赵国邯郸流行一种舞步叫踮屣，是一种类似于现代西方芭蕾舞的点着脚尖跳舞的舞步，非常优美。'\r\n\r\n                            }\r\n                        ],\r\n                        style: new Style({\r\n                            text: new TextStyle({\r\n                                text: '邯郸学步',\r\n                                offsetY: 30,\r\n                            }),\r\n                            image: new IconStyle({\r\n                                src: './handan/hdxb.jpg',\r\n                                scale: 0.1\r\n                            })\r\n                        })\r\n                    },\r\n                    {\r\n                        name: '毛遂自荐',\r\n                        center: [114.730269, 36.700889],\r\n                        desc: [\r\n                            {\r\n                                img: './handan/mszj.jpg',\r\n                                content: '据《史记．卷七六．平原君虞卿列传．平原君》记载，战国时，秦国出兵攻打赵国，包围了赵都邯郸，情况十分危急，于是赵王派平原君前往楚国，请求援救。平原君打算在其门下食客挑选出二十个文武人才一同前往，但只挑选出十九个，剩下的都不符合条件。\\n' +\r\n                                    '\\n' +\r\n                                    '这时，有一个名叫毛遂的人，主动向平原君自我推荐，请求加入前往楚国的行列。平原君问：\"你在我门下多久了？\"毛遂回答：“三年了。”平原君说：“一个真正有才能的人，就好像一把放在袋子里的锥子一样，立刻就会显露出锋利的锥尖。\\n' +\r\n                                    '\\n' +\r\n                                    '而你在我门下三年了，我却没听说过你有什么表现，你还是留下吧！”毛遂说：“我现在自我推荐，就是请求你把我放进袋子里，如果早点有这样的机会，那我就不只是露出锥尖而已，而是早就显露出才能，锋芒毕露了！”平原君觉得毛遂说得有道理，就答应让他一同前往。\\n' +\r\n                                    '\\n' +\r\n                                    '到了楚国，平原君和楚王会谈，从早上到中午，都还没有结果。毛遂于是持剑走到楚王面前，极力说明赵、楚联合抗秦的利害关系。楚王终于被说服，答应赵国愿意出兵援救。于是两国当场歃血为盟，誓守联合抗秦的盟约。' + '毛遂这次不仅帮平原君完成任务，也为国家立下了功劳，让大家对他刮目相看，平原君因此待他为上宾。后来这个故事被浓缩成「毛遂自荐」这个成语，比喻自告奋勇，自我推荐。'\r\n                            }\r\n                        ],\r\n                        style: new Style({\r\n                            text: new TextStyle({\r\n                                text: '毛遂自荐',\r\n                                offsetY: 30,\r\n                            }),\r\n                            image: new IconStyle({\r\n                                src: './handan/mszj.jpg',\r\n                                scale: 0.1\r\n                            })\r\n                        })\r\n                    },\r\n                ],\r\n                timeInterval: null,\r\n                civilLayer: new VectorLayer({}),\r\n                overLay: null,\r\n                describe: [],\r\n                source: null,\r\n                name: '',\r\n                select: null\r\n            }\r\n        },\r\n        setup() {\r\n            return {\r\n                map: ref(null)\r\n            }\r\n        },\r\n        methods: {\r\n            onMapCreated(map) {\r\n                this.map = map\r\n                this.init(map)\r\n                this.select = new Select({})\r\n                this.map.addInteraction(this.select)\r\n                this.initSelect()\r\n            },\r\n            init(map) {\r\n                map.addLayer(this.civilLayer)\r\n                this.source = new VectorSource()\r\n                this.civilLayer.setSource(this.source)\r\n                this.overLay = new Popup({\r\n                    popupClass: \"default\", //\"tooltips\", \"warning\" \"black\" \"default\", \"tips\", \"shadow\",\r\n                    closeBox: true,\r\n                    onshow: function () {\r\n                        console.log(\"You opened the box\");\r\n                    },\r\n                    onclose: function () {\r\n                        console.log(\"You close the box\");\r\n                    },\r\n                    positioning: 'top-right',\r\n                    autoPan: true,\r\n                    autoPanAnimation: {duration: 250}\r\n                })\r\n                map.addOverlay(this.overLay)\r\n                // this.playRoute(this.source)\r\n            },\r\n            change(desc, name) {\r\n                return new Promise(resolve => {\r\n                    this.describe = desc\r\n                    this.name = name\r\n                    resolve('ok')\r\n\r\n                })\r\n            },\r\n            playRoute(source) {\r\n                if (source) {\r\n                    clearInterval(this.timeInterval)\r\n                    this.timeInterval = null\r\n                    let a = 0\r\n                    this.timeInterval = setInterval(() => {\r\n                        if (a >=this.routeCoords.length) {\r\n                            clearInterval(this.timeInterval)\r\n                            return\r\n                        }\r\n                        let center = this.routeCoords[a].center\r\n                        let desc = this.routeCoords[a].desc\r\n                        let name = this.routeCoords[a].name\r\n                        let style = this.routeCoords[a].style\r\n                        let point = new Feature({\r\n                            geometry: new Point(center),\r\n                            properties: {\r\n                                desc: desc\r\n                            }\r\n                        })\r\n                        point.setStyle(style)\r\n                        point.setProperties({\r\n                            titleName: name,\r\n                            desc: desc\r\n                        })\r\n                        source.addFeature(point)\r\n                        if (a < this.routeCoords.length - 1) {\r\n                            let center1 = this.routeCoords[a + 1].center\r\n                            let line = new Feature({\r\n                                geometry: new LineString([center, center1])\r\n                            })\r\n                            source.addFeature(line)\r\n                        }\r\n                        this.change(desc, name).then(() => {\r\n                            this.overLay.show(center, this.$refs.describePane.$el.outerHTML)\r\n                            this.overLay.setPixelPosition([10, 10], 'top-right')\r\n                            this.map.getView().setCenter(center)\r\n                        })\r\n\r\n                        a += 1\r\n                    }, 4000)\r\n                }\r\n            },\r\n            initSelect() {\r\n                this.select.getFeatures().on(['add'], (e) => {\r\n                    const feature = e.element;\r\n                    if (feature.getGeometry() instanceof Point) {\r\n                        let properties = feature.getProperties()\r\n                        console.log(properties)\r\n                        this.change(properties.desc, properties.titleName).then(() => {\r\n                            let domContent = this.$refs.describePane.$el.outerHTML\r\n                            this.overLay.show(feature.getGeometry().getFirstCoordinate(), domContent);\r\n                        })\r\n\r\n                    }\r\n\r\n                });\r\n                this.select.getFeatures().on(['remove'], function () {\r\n                    this.overLay.hide();\r\n                })\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import { render } from \"./ArtistHandan.vue?vue&type=template&id=2626926c&scoped=true\"\nimport script from \"./ArtistHandan.vue?vue&type=script&lang=js\"\nexport * from \"./ArtistHandan.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\DEV\\\\JS\\\\supermap_proj1\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2626926c\"]])\n\nexport default __exports__"],"sourceRoot":""}