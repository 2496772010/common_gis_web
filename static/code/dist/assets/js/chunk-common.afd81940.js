(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-common"],{0:function(e,t){},"0409":function(e,t,a){"use strict";a("8202")},1:function(e,t){},2:function(e,t){},3133:function(e,t,a){"use strict";a.r(t);a("4062");var n=a("1970"),o=a.n(n),c=(a("71ec"),a("e1fa")),s=a.n(c),i=(a("0bd6"),a("05c2")),r=a.n(i),l=(a("8ac7"),a("e661")),p=a.n(l),d=(a("42dc"),a("19ec")),u=a.n(d),m=(a("accc"),a("d197")),b=a.n(m),h=(a("c7e2"),a("54a1")),f=a.n(h),g=(a("34c0"),a("aff9")),j=a.n(g),O=(a("3b10"),a("4445")),v=a.n(O),y=(a("737e"),a("7d11")),w=a.n(y),k=(a("a1a7"),a("9ebf")),S=a.n(k),C=(a("1e7f"),a("d94e")),I=a.n(C),V=(a("884b"),a("0518")),N=a.n(V),B=(a("efe7"),a("c026")),_=a.n(B),x=(a("7ba9"),a("eae5")),A=a.n(x),F=(a("4af4"),a("44fb")),L=a.n(F),M=a("f2bf");const T=Object(M["withScopeId"])("data-v-c8765a6c");Object(M["pushScopeId"])("data-v-c8765a6c");const P={id:"houseApp"};Object(M["popScopeId"])();const D=T((e,t,a,n,o,c)=>{const s=Object(M["resolveComponent"])("base-map"),i=Object(M["resolveComponent"])("AroundSearch"),r=Object(M["resolveComponent"])("image-describe");return Object(M["openBlock"])(),Object(M["createBlock"])("div",P,[Object(M["createVNode"])(s,{onMapCreated:c.onMapCreated},null,8,["onMapCreated"]),Object(M["createVNode"])(i,{mode:"房源",onConfirmClick:c.confirmClick},null,8,["onConfirmClick"]),Object(M["createVNode"])(r,{ref:"imgDesc",img:o.img,content:o.content},null,8,["img","content"])])});var $=a("3779");const E=Object(M["withScopeId"])("data-v-4d3f04aa");Object(M["pushScopeId"])("data-v-4d3f04aa");const q={class:"nav-pane"},G={class:"name"},z=Object(M["createTextVNode"])(" m "),H=Object(M["createTextVNode"])("确定"),J=Object(M["createTextVNode"])("重置");Object(M["popScopeId"])();const R=E((e,t,a,n,o,c)=>{const s=Object(M["resolveComponent"])("el-autocomplete"),i=Object(M["resolveComponent"])("el-form-item"),r=Object(M["resolveComponent"])("el-option"),l=Object(M["resolveComponent"])("el-select"),p=Object(M["resolveComponent"])("el-input-number"),d=Object(M["resolveComponent"])("el-button"),u=Object(M["resolveComponent"])("el-form");return Object(M["openBlock"])(),Object(M["createBlock"])("div",q,[Object(M["createVNode"])(u,{"label-suffix":"：",inline:"","label-position":"right","label-width":"auto",size:"mini"},{default:E(()=>[Object(M["createVNode"])(i,{label:"起点"},{default:E(()=>[Object(M["createVNode"])(s,{modelValue:o.startInput,"onUpdate:modelValue":t[1]||(t[1]=e=>o.startInput=e),"fetch-suggestions":c.querySearchAsyncStart,placeholder:"请输起点查找"+a.mode,onSelect:c.handleSelectStart},{default:E(({item:e})=>[Object(M["createVNode"])("div",G,Object(M["toDisplayString"])(e.name),1)]),_:1},8,["modelValue","fetch-suggestions","placeholder","onSelect"])]),_:1}),Object(M["createVNode"])(i,{label:"房源类型"},{default:E(()=>[Object(M["createVNode"])(l,{modelValue:o.houseType,"onUpdate:modelValue":t[2]||(t[2]=e=>o.houseType=e)},{default:E(()=>[(Object(M["openBlock"])(!0),Object(M["createBlock"])(M["Fragment"],null,Object(M["renderList"])(o.codes,(e,t)=>(Object(M["openBlock"])(),Object(M["createBlock"])(r,{label:e.label,value:e.value,key:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),Object(M["createVNode"])(i,{label:"范围"},{default:E(()=>[Object(M["createVNode"])(p,{min:1e3,max:1e4,"model-value":o.distance},null,8,["model-value"]),z]),_:1}),Object(M["createVNode"])(i,{style:{display:"flex","justify-content":"center","align-items":"center"}},{default:E(()=>[Object(M["createVNode"])(d,{onClick:c.confirmClick},{default:E(()=>[H]),_:1},8,["onClick"]),Object(M["createVNode"])(d,{onClick:c.resetClick},{default:E(()=>[J]),_:1},8,["onClick"])]),_:1})]),_:1})])});var U=a("365c"),Y=a("ed08"),W=a("a1e9"),K={name:"AroundSearch",props:{mode:{type:String,default:()=>""}},data(){return{startInput:"",endInput:"",targetLocation:"",originLocation:"",houseType:"120302",distance:1e3,codes:[{label:"商务住宅相关",value:"120000"},{label:"楼宇相关",value:"120100"},{label:"商务写字楼",value:"120201"},{label:"商住两用楼",value:"120203"},{label:"住宅区",value:"120300"},{label:"别墅",value:"120301"},{label:"住宅小区",value:"120302"}]}},methods:{async querySearchAsyncStart(e,t){let a=await U["a"].getInputTips({keywords:e}),n=a.data.tips;t(n)},async handleSelectStart(e){let t=Object(W["s"])(e);this.startInput=t.name,this.originLocation=t.location},async querySearchAsyncEnd(e,t){let a=await U["a"].getInputTips({keywords:e}),n=a.data.tips;t(n)},handleSelectEnd(e){this.endInput=e.name,this.targetLocation=e.location},confirmClick(){this.$emit("confirmClick",{source:Object(Y["b"])(this.originLocation,this.distance,this.houseType,this.mode),point:this.originLocation})},resetClick(){this.distance=1e3,this.startInput="",this.$parent.layer.getSource().clear()}}},Q=(a("0409"),a("6b0d")),X=a.n(Q);const Z=X()(K,[["render",R],["__scopeId","data-v-4d3f04aa"]]);var ee=Z,te=a("3e6b"),ae=a("f403"),ne=a("2ce2"),oe=a("6fba");a("4d02"),a("c33e");const ce=Object(M["withScopeId"])("data-v-3f63a6f1");Object(M["pushScopeId"])("data-v-3f63a6f1");const se={class:"image-describe"},ie={class:"image"},re={class:"content"};Object(M["popScopeId"])();const le=ce((e,t,a,n,o,c)=>(Object(M["openBlock"])(),Object(M["createBlock"])("div",se,[Object(M["createVNode"])("div",ie,[Object(M["createVNode"])("img",{style:{width:"200px",height:"200px"},src:a.img},null,8,["src"])]),Object(M["createVNode"])("div",re,[(Object(M["openBlock"])(!0),Object(M["createBlock"])(M["Fragment"],null,Object(M["renderList"])(Object.keys(a.content),e=>(Object(M["openBlock"])(),Object(M["createBlock"])("div",{class:"content-item",key:e},[Object(M["createVNode"])("span",null,Object(M["toDisplayString"])(e)+":",1),Object(M["createVNode"])("span",null,Object(M["toDisplayString"])(a.content[e]),1)]))),128))])])));var pe={name:"ImageDescribe",props:{img:{type:String},content:{type:Object}}};a("eeb9");const de=X()(pe,[["render",le],["__scopeId","data-v-3f63a6f1"]]);var ue=de,me={name:"HouseApp",components:{ImageDescribe:ue,AroundSearch:ee,BaseMap:$["a"]},data(){return{map:null,layer:new te["a"]({}),select:null,popup:null,img:"",content:{}}},methods:{onMapCreated(e){this.map=e,this.map.addLayer(this.layer),this.select=new ne["a"]({}),this.map.addInteraction(this.select),this.popup=new oe["a"]({popupClass:"default",closeBox:!0,onshow:function(){console.log("You opened the box")},onclose:function(){console.log("You close the box")},autoPan:!0,autoPanAnimation:{duration:250}}),this.map.addOverlay(this.popup),this.initSelect()},async confirmClick(e){let t=await e.source;this.map.getView().setCenter(e.point.split(",")),this.layer.setSource(t),this.map.render()},change(e,t){return new Promise(a=>{this.img=e,this.content=t,a("ok")})},initSelect(){this.select.getFeatures().on(["add"],e=>{const t=e.element;if(t.getGeometry()instanceof ae["a"]){let e=t.getProperties().properties;console.log(e);let a=e["photos"]&&e["photos"].length?e["photos"][0].url:"",n={"名字":e.name,"地址":e.address,"均价":Object(Y["a"])(2e4,4e4)+"/m²","电话":e["tel"]};this.change(a,n).then(()=>{let e=this.$refs.imgDesc.$el.outerHTML;this.popup.show(t.getGeometry().getFirstCoordinate(),e)})}}),this.select.getFeatures().on(["remove"],(function(){this.popup.hide()}))}}};a("c9d1");const be=X()(me,[["render",D],["__scopeId","data-v-c8765a6c"]]);var he=be;a("7dd6");const fe=Object(M["createApp"])(he);fe.component(L.a.name,L.a),fe.component(A.a.name,A.a),fe.component(_.a.name,_.a),fe.component(N.a.name,N.a),fe.component(I.a.name,I.a),fe.component(S.a.name,S.a),fe.component(w.a.name,w.a),fe.component(v.a.name,v.a),fe.component(j.a.name,j.a),fe.component(f.a.name,f.a),fe.component(b.a.name,b.a),fe.component(u.a.name,u.a),fe.component(p.a.name,p.a),fe.component(r.a.name,r.a),fe.component(s.a.name,s.a),fe.component(o.a.name,o.a),fe.mount("#houseApp")},"365c":function(e,t,a){"use strict";var n=a("bc3a"),o=a.n(n);let c="d1f683551604b8eacec630924cba75f4";t["a"]={getRoute:e=>o()({method:"get",url:"https://restapi.amap.com/v3/direction/driving",params:{...e,key:c}}),getInputTips:e=>o()({method:"get",url:"https://restapi.amap.com/v3/assistant/inputtips",params:{...e,key:c}}),getAround:e=>o()({method:"get",url:"https://restapi.amap.com/v3/place/around",params:{...e,key:c}}),getPlace:e=>o()({method:"get",url:"https://restapi.amap.com/v3/place/text",params:{...e,key:c}})}},3779:function(e,t,a){"use strict";var n=a("f2bf");const o=Object(n["withScopeId"])("data-v-ba265d90");Object(n["pushScopeId"])("data-v-ba265d90");const c={id:"map"};Object(n["popScopeId"])();const s=o((e,t,a,o,s,i)=>(Object(n["openBlock"])(),Object(n["createBlock"])("div",c)));var i=a("5eee"),r=a("a2c7"),l=a("480c"),p=a("21bc"),d=a("9834"),u=a("f407"),m=(a("d5a0"),a("5bc0"),{name:"BaseMap",data(){return{map:null,view:null}},mounted(){this.initMap()},methods:{initMap(){this.view=new r["a"]({center:[114.48,36.62],zoom:13,projection:"EPSG:4326",multiWorld:!0}),this.map=new i["a"]({target:"map",controls:p["a"]({attributionOptions:{collapsed:!1}}).extend([new d["e"]]),view:this.view});let e=new l["a"]({title:"supermap",type:"base",source:new u["b"]});this.map.addLayer(e),this.map.once("postrender",()=>{this.$emit("mapCreated",this.map)})}}}),b=(a("7ce1"),a("6b0d")),h=a.n(b);const f=h()(m,[["render",s],["__scopeId","data-v-ba265d90"]]);t["a"]=f},5:function(e,t,a){e.exports=a("3133")},"7ce1":function(e,t,a){"use strict";a("9652")},8202:function(e,t,a){},8368:function(e,t,a){},9652:function(e,t,a){},a968:function(e,t,a){},c9d1:function(e,t,a){"use strict";a("8368")},ed08:function(e,t,a){"use strict";a.d(t,"d",(function(){return u})),a.d(t,"b",(function(){return m})),a.d(t,"c",(function(){return b})),a.d(t,"a",(function(){return h}));a("d5a0");var n=a("5831"),o=a("a2e1"),c=a("4cdf"),s=a("f403"),i=a("f822"),r=a("6c77"),l=a("6cbf"),p=a("8295"),d=a("365c");async function u(e,t){if(e&&t){let a=e.split(",").map(Number),i=t.split(",").map(Number),p=await d["a"].getRoute({origin:e,destination:t}),u=p.data.route.paths[0].steps,m=[],b=[];u.forEach(e=>{let t=e.polyline.split(";");t=t.map((function(e){return e.split(",").map(Number)})),m.push({instruction:e["instruction"],location:t[0]}),b=b.concat(t)});let h={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:b}}]},f=new c["a"]({geometry:new s["a"](a),properties:{}});f.setStyle(new r["c"]({image:new l["a"]({src:"./起点.png",scale:.2})}));let g=new c["a"]({geometry:new s["a"](i)});g.setStyle(new r["c"]({image:new l["a"]({src:"./终点.png",scale:.2})}));let j=new n["a"]({features:(new o["a"]).readFeatures(h)});return j.addFeature(f),j.addFeature(g),[j,m,b]}}async function m(e,t,a,o){let u=new n["a"]({}),m=[],b=e.split(",").map(Number);for(let n=1;n<40;n++){let o=await d["a"].getAround({location:e,radius:t,types:a,page:n});if(!o.data["pois"].length)break;m=m.concat(o.data.pois)}for(let n=0;n<m.length;n++){let e=m[n].name,t=m[n].location.split(",").map(Number),a=new c["a"]({geometry:new s["a"](t),properties:m[n]});a.setProperties(m[n]),a.setStyle(new r["c"]({image:new l["a"]({src:"./"+o+".png",scale:.2}),text:new p["a"]({text:e})})),u.addFeature(a)}let h=new c["a"]({geometry:new i["a"](b,t/111e3)});return u.addFeature(h),u}async function b(e,t){let a=new n["a"],o=[],i=[];for(let n=1;n<40;n++){let a=await d["a"].getPlace({types:t,city:e,citylimit:!0,page:n});if(!a.data["pois"].length)break;o=o.concat(a.data.pois)}for(let n=0;n<o.length;n++){let e=o[n].location.split(",").map(Number),t=new c["a"]({geometry:new s["a"](e)});i.push(t)}return a.addFeatures(i),a}function h(e,t){var a=t-e,n=Math.random(),o=e+Math.round(n*a);return o}},eeb9:function(e,t,a){"use strict";a("a968")}}]);
//# sourceMappingURL=chunk-common.afd81940.js.map