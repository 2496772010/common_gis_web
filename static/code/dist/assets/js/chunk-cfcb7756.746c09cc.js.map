{"version":3,"sources":["webpack:///./src/views/travel/analysis/ZjVisualization.vue?6394","webpack:///./src/views/travel/components/NavigationPane.vue?d568","webpack:///./src/views/travel/analysis/ZjVisualization.vue","webpack:///./src/views/travel/components/NavigationPane.vue","webpack:///./src/views/travel/components/NavigationPane.vue?7d85","webpack:///./src/config/index.js","webpack:///./src/views/travel/analysis/ZjVisualization.vue?4410"],"names":["class","_createBlock","_createVNode","_component_base_map","onMapCreated","$options","_component_navigation_pane","onReset","onConfirmClick","_Fragment","_renderList","$data","item","index","onClick","key","instruction","length","_component_el_form","label-suffix","_component_el_form_item","label","_component_el_autocomplete","$event","fetch-suggestions","placeholder","onSelect","default","_toDisplayString","name","_component_el_button","data","startInput","endInput","targetLocation","originLocation","methods","queryString","cb","res","api","getInputTips","keywords","results","tips","handleSelectStart","value","this","location","handleSelectEnd","confirmClick","$emit","routeAnalysis","resetClick","__exports__","ICON_STYLE","Style","image","IconStyle","src","scale","components","NavigationPane","BaseMap","map","zjLayer","VectorLayer","timeInterval","dataFlowLayer","source","VectorSource","addLayer","coords","setSource","getView","fit","getExtent","setZoom","getZoom","moveCar","onItemCLick","setCenter","onResetClick","getSource","clear","a","setInterval","feature","Feature","geometry","Point","setStyle","addFeature","clearInterval","render"],"mappings":"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","file":"assets/js/chunk-cfcb7756.746c09cc.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ZjVisualization.vue?vue&type=style&index=0&id=fba43802&lang=less&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./NavigationPane.vue?vue&type=style&index=0&id=402052e1&lang=less&scoped=true\"","<template>\r\n    <div>\r\n        <base-map @mapCreated=\"onMapCreated\">\r\n        </base-map>\r\n        <navigation-pane\r\n                @reset=\"onResetClick\"\r\n                @confirmClick=\"onConfirmClick\"></navigation-pane>\r\n        <div class=\"instruct-list\" v-show=\"instruction.length\">\r\n            <div class=\"instruct-list-item\"\r\n                 @click=\"onItemCLick(item)\"\r\n                 v-for=\"(item,index) in instruction\"\r\n                 :key=\"index\"\r\n            >\r\n                {{item.instruction}}\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import BaseMap from \"../../../components/BaseMap\";\r\n    import NavigationPane from \"../components/NavigationPane\";\r\n    import {Vector as VectorLayer} from 'ol/layer'\r\n    import {Vector as VectorSource} from 'ol/source'\r\n    import {Point} from 'ol/geom'\r\n    import Feature from 'ol/Feature'\r\n    import {ICON_STYLE} from \"../../../config\";\r\n\r\n    export default {\r\n        name: \"ZjVisualization\",\r\n        components: {NavigationPane, BaseMap},\r\n        data() {\r\n            return {\r\n                map: null,\r\n                zjLayer: new VectorLayer(),\r\n                instruction: [],\r\n                timeInterval: null,\r\n                dataFlowLayer: new VectorLayer({\r\n                    source: new VectorSource()\r\n                })\r\n            }\r\n        },\r\n        methods: {\r\n            onMapCreated(map) {\r\n                this.map = map\r\n                this.map.addLayer(this.dataFlowLayer)\r\n            },\r\n            async onConfirmClick(res) {\r\n                let [source, instruction, coords] = await res\r\n                this.zjLayer.setSource(source)\r\n                this.map.addLayer(this.zjLayer)\r\n                this.instruction = instruction\r\n                if (source) {\r\n                    this.map.getView().fit(source.getExtent())\r\n                    this.map.getView().setZoom(this.map.getView().getZoom() - 2)\r\n                }\r\n                this.moveCar(coords)\r\n\r\n\r\n            },\r\n            onItemCLick(value) {\r\n                this.map.getView().setCenter(value.location)\r\n                this.map.getView().setZoom(17)\r\n            },\r\n            onResetClick() {\r\n                this.zjLayer.getSource().clear()\r\n                this.instruction = []\r\n                this.dataFlowLayer.getSource().clear()\r\n            },\r\n            moveCar(coords) {\r\n                let a = 0\r\n                this.timeInterval = setInterval(() => {\r\n                    if (this.dataFlowLayer.getSource()) {\r\n                        this.dataFlowLayer.getSource().clear()\r\n                    }\r\n                    let feature = new Feature({\r\n                        geometry: new Point(coords[a])\r\n                    })\r\n                    feature.setStyle(ICON_STYLE)\r\n                    this.dataFlowLayer.getSource().addFeature(feature)\r\n\r\n                    this.map.getView().setCenter(coords[a])\r\n                    a += 1\r\n                    if (a >= coords.length - 1) {\r\n                        clearInterval(this.timeInterval)\r\n                    }\r\n\r\n                }, 100)\r\n            }\r\n\r\n\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    .instruct-list {\r\n        display: flex;\r\n        flex-direction: column;\r\n        position: fixed;\r\n        right: 20px;\r\n        top: 20px;\r\n        background: #fff;\r\n        border-radius: 4px;\r\n        width: 26vw;\r\n        height: 80vh;\r\n        overflow-y: scroll;\r\n        padding: 10px;\r\n\r\n        .instruct-list-item {\r\n            width: 24vw;\r\n            height: 80px;\r\n            cursor: pointer;\r\n            padding: 10px 0 10px 0;\r\n\r\n            &:hover {\r\n                background: rgba(159, 158, 188, 0.5);\r\n            }\r\n        }\r\n    }\r\n</style>","<template>\r\n    <div class=\"nav-pane\">\r\n        <el-form label-suffix=\"：\">\r\n            <el-form-item label=\"起点\">\r\n                <el-autocomplete\r\n                        v-model=\"startInput\"\r\n                        :fetch-suggestions=\"querySearchAsyncStart\"\r\n                        placeholder=\"请输起点\"\r\n                        @select=\"handleSelectStart\"\r\n                >\r\n                    <template #default=\"{ item }\">\r\n                        <div class=\"name\">{{ item.name }}</div>\r\n                    </template>\r\n                </el-autocomplete>\r\n            </el-form-item>\r\n            <el-form-item label=\"终点\">\r\n                <el-autocomplete\r\n                        v-model=\"endInput\"\r\n                        :fetch-suggestions=\"querySearchAsyncEnd\"\r\n                        placeholder=\"请输入终点\"\r\n                        @select=\"handleSelectEnd\"\r\n                >\r\n                    <template #default=\"{ item }\">\r\n                        <div class=\"name\">{{ item.name }}</div>\r\n                    </template>\r\n                </el-autocomplete>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button @click=\"confirmClick\">确定</el-button>\r\n                <el-button @click=\"resetClick\">重置</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import api from \"../../../api\";\r\n    import {routeAnalysis} from \"../../../utils\";\r\n\r\n    export default {\r\n        name: \"NavigationPane\",\r\n        data() {\r\n            return {\r\n                startInput: '',\r\n                endInput: '',\r\n                targetLocation: '',\r\n                originLocation: ''\r\n            }\r\n        },\r\n        methods: {\r\n            async querySearchAsyncStart(queryString, cb) {\r\n                let res = await api.getInputTips({keywords: queryString})\r\n                let results = res.data.tips\r\n                cb(results)\r\n            },\r\n            handleSelectStart(value) {\r\n                this.startInput = value.name\r\n                this.originLocation = value.location\r\n            },\r\n            async querySearchAsyncEnd(queryString, cb) {\r\n                let res = await api.getInputTips({keywords: queryString})\r\n                let results = res.data.tips\r\n                cb(results)\r\n            },\r\n            handleSelectEnd(value) {\r\n                this.endInput = value.name\r\n                this.targetLocation = value.location\r\n            },\r\n            confirmClick() {\r\n                this.$emit('confirmClick', routeAnalysis(this.originLocation, this.targetLocation))\r\n            },\r\n            resetClick() {\r\n                this.startInput = ''\r\n                this.endInput = ''\r\n                this.$emit('reset')\r\n            }\r\n\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    .nav-pane {\r\n        position: absolute;\r\n        top: 40px;\r\n        left: 40px;\r\n        z-index: 99;\r\n        width: 400px;\r\n        height: 250px;\r\n        background: #54b2ff;\r\n        display: flex;\r\n        justify-content: center;\r\n        border-radius: 4px;\r\n    }\r\n</style>","import { render } from \"./NavigationPane.vue?vue&type=template&id=402052e1&scoped=true\"\nimport script from \"./NavigationPane.vue?vue&type=script&lang=js\"\nexport * from \"./NavigationPane.vue?vue&type=script&lang=js\"\n\nimport \"./NavigationPane.vue?vue&type=style&index=0&id=402052e1&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\DEV\\\\JS\\\\supermap_proj1\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-402052e1\"]])\n\nexport default __exports__","import {Icon as IconStyle, Style} from 'ol/style'\r\n\r\nexport const ICON_STYLE = new Style({\r\n    image: new IconStyle({\r\n        src: './小车.png',\r\n        scale: 0.2\r\n    })\r\n})\r\n","import { render } from \"./ZjVisualization.vue?vue&type=template&id=fba43802&scoped=true\"\nimport script from \"./ZjVisualization.vue?vue&type=script&lang=js\"\nexport * from \"./ZjVisualization.vue?vue&type=script&lang=js\"\n\nimport \"./ZjVisualization.vue?vue&type=style&index=0&id=fba43802&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\DEV\\\\JS\\\\supermap_proj1\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-fba43802\"]])\n\nexport default __exports__"],"sourceRoot":""}