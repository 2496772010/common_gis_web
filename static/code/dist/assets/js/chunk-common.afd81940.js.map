{"version":3,"sources":["webpack:///./src/views/travel/analysis/AroundSearch.vue?f189","webpack:///./src/views/house/HouseApp.vue","webpack:///./src/views/travel/analysis/AroundSearch.vue","webpack:///./src/views/travel/analysis/AroundSearch.vue?f481","webpack:///./supermap_proj/src/views/travel/components/ImageDescribe.vue","webpack:///./supermap_proj/src/views/travel/components/ImageDescribe.vue?fcdc","webpack:///./src/views/house/HouseApp.vue?e47d","webpack:///./src/views/house/main.js","webpack:///./src/api/index.js","webpack:///./src/components/BaseMap.vue","webpack:///./src/components/BaseMap.vue?e9b5","webpack:///./src/components/BaseMap.vue?1aeb","webpack:///./src/views/house/HouseApp.vue?1dc7","webpack:///./src/utils/index.js","webpack:///./supermap_proj/src/views/travel/components/ImageDescribe.vue?7517"],"names":["id","_createBlock","_createVNode","_component_base_map","onMapCreated","$options","_component_AroundSearch","mode","onConfirmClick","_component_image_describe","ref","img","$data","content","class","_component_el_form","label-suffix","inline","label-position","label-width","size","_component_el_form_item","label","_component_el_autocomplete","$event","fetch-suggestions","placeholder","$props","onSelect","default","item","_toDisplayString","name","_component_el_select","_Fragment","_renderList","index","_component_el_option","value","key","_component_el_input_number","min","max","model-value","style","_component_el_button","onClick","props","type","String","data","startInput","endInput","targetLocation","originLocation","houseType","distance","codes","methods","queryString","cb","res","api","getInputTips","keywords","results","tips","value1","toRaw","this","location","handleSelectEnd","confirmClick","$emit","source","aroundAnalysis","point","resetClick","$parent","layer","getSource","clear","__exports__","src","Object","keys","components","ImageDescribe","AroundSearch","BaseMap","map","VectorLayer","select","popup","addLayer","Select","addInteraction","Popup","popupClass","closeBox","onshow","console","log","onclose","autoPan","autoPanAnimation","duration","addOverlay","initSelect","getView","setCenter","split","setSource","render","change","Promise","resolve","getFeatures","on","e","feature","element","getGeometry","Point","properties","getProperties","length","url","address","RandomNumBoth","then","domContent","$refs","imgDesc","$el","outerHTML","show","getFirstCoordinate","hide","app","createApp","App","component","a","mount","getRoute","axios","method","params","getAround","getPlace","view","mounted","initMap","View","center","zoom","projection","multiWorld","Map","target","controls","control","attributionOptions","collapsed","extend","Logo","TileLayer","title","SuperMapCloud","once","async","routeAnalysis","start","end","startCoord","Number","endCoord","origin","destination","steps","route","paths","stepInstructions","coords","forEach","polyline","push","instruction","concat","geoJSON","startFeature","Feature","geometry","setStyle","Style","image","IconStyle","scale","endFeature","VectorSource","features","GeoJSON","readFeatures","addFeature","icon","pois","coord","i","radius","types","page","setProperties","text","TextStyle","circle","Circle","createHeatMapSource","city","tempHeatPoints","citylimit","addFeatures","Min","Max","Range","Rand","Math","random","num","round"],"mappings":"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","file":"assets/js/chunk-common.afd81940.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./AroundSearch.vue?vue&type=style&index=0&id=4d3f04aa&lang=less&scoped=true\"","<template>\r\n  <div id=\"houseApp\">\r\n    <base-map @mapCreated=\"onMapCreated\">\r\n    </base-map>\r\n    <AroundSearch :mode=\"'房源'\" @confirmClick=\"confirmClick\"></AroundSearch>\r\n    <image-describe ref=\"imgDesc\" :img=\"img\" :content=\"content\"></image-describe>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import BaseMap from \"../../components/BaseMap\";\r\n  import AroundSearch from \"../travel/analysis/AroundSearch\";\r\n  import {Vector as VectorLayer} from 'ol/layer'\r\n  import {Point} from 'ol/geom'\r\n  import {Select} from 'ol/interaction'\r\n  import Popup from 'ol-ext/overlay/Popup'\r\n  import 'ol-ext/overlay/Popup.css'\r\n  import 'ol-ext/overlay/Popup.anim.css'\r\n  import ImageDescribe from \"../../../supermap_proj/src/views/travel/components/ImageDescribe\";\r\n  import {RandomNumBoth} from \"../../utils\";\r\n\r\n  export default {\r\n    name: \"HouseApp\",\r\n    components: {ImageDescribe, AroundSearch, BaseMap},\r\n    data() {\r\n      return {\r\n        map: null,\r\n        layer: new VectorLayer({}),\r\n        select: null,\r\n        popup: null,\r\n        img: '',\r\n        content: {}\r\n      }\r\n    },\r\n    methods: {\r\n      onMapCreated(map) {\r\n        this.map = map\r\n        this.map.addLayer(this.layer)\r\n        this.select = new Select({})\r\n        this.map.addInteraction(this.select)\r\n        this.popup = new Popup({\r\n          popupClass: \"default\", //\"tooltips\", \"warning\" \"black\" \"default\", \"tips\", \"shadow\",\r\n          closeBox: true,\r\n          onshow: function () {\r\n            console.log(\"You opened the box\");\r\n          },\r\n          onclose: function () {\r\n            console.log(\"You close the box\");\r\n          },\r\n          autoPan: true,\r\n          autoPanAnimation: {duration: 250}\r\n        })\r\n        this.map.addOverlay(this.popup)\r\n        this.initSelect()\r\n      },\r\n      async confirmClick(res) {\r\n        let source = await res.source;\r\n        this.map.getView().setCenter(res.point.split(','))\r\n        this.layer.setSource(source)\r\n        this.map.render()\r\n      },\r\n      change(img, content) {\r\n        return new Promise((resolve => {\r\n          this.img = img\r\n          this.content = content\r\n          resolve('ok')\r\n        }))\r\n      },\r\n      initSelect() {\r\n        this.select.getFeatures().on(['add'], (e) => {\r\n          const feature = e.element;\r\n          if (feature.getGeometry() instanceof Point) {\r\n            let properties = feature.getProperties().properties\r\n            console.log(properties)\r\n            let img = properties['photos'] && properties['photos'].length ? properties['photos'][0].url : ''\r\n            let content = {\r\n              '名字': properties.name,\r\n              '地址': properties.address,\r\n              '均价': RandomNumBoth(20000, 40000) + '/m²',\r\n              '电话': properties['tel']\r\n            }\r\n            this.change(img, content).then(() => {\r\n              let domContent = this.$refs.imgDesc.$el.outerHTML\r\n              this.popup.show(feature.getGeometry().getFirstCoordinate(), domContent);\r\n            })\r\n\r\n          }\r\n\r\n        });\r\n        this.select.getFeatures().on(['remove'], function () {\r\n          this.popup.hide();\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  #houseApp {\r\n    width: 100%;\r\n    height: 100%;\r\n    position: absolute;\r\n    padding: 0;\r\n    margin: 0;\r\n    \r\n  }\r\n\r\n\r\n</style>\r\n","<template>\r\n  <div class=\"nav-pane\">\r\n    <el-form  label-suffix=\"：\" inline label-position=\"right\" label-width=\"auto\" size=\"mini\">\r\n      <el-form-item label=\"起点\">\r\n        <el-autocomplete\r\n            v-model=\"startInput\"\r\n            :fetch-suggestions=\"querySearchAsyncStart\"\r\n            :placeholder=\"'请输起点查找'+mode\"\r\n            @select=\"handleSelectStart\"\r\n        >\r\n          <template #default=\"{ item }\">\r\n            <div class=\"name\">{{ item.name }}</div>\r\n          </template>\r\n        </el-autocomplete>\r\n      </el-form-item>\r\n      <el-form-item label=\"房源类型\">\r\n        <el-select v-model=\"houseType\">\r\n          <el-option v-for=\"(item,index) in codes\"\r\n                     :label=\"item.label\"\r\n                     :value=\"item.value\"\r\n                     :key=\"index\">\r\n          \r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"范围\">\r\n        <el-input-number :min=\"1000\" :max=\"10000\" :model-value=\"distance\"></el-input-number>\r\n        m\r\n      </el-form-item>\r\n      <el-form-item style=\"display: flex;justify-content: center;align-items: center\">\r\n        <el-button @click=\"confirmClick\">确定</el-button>\r\n        <el-button @click=\"resetClick\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import api from \"../../../api\";\r\n  import {aroundAnalysis} from \"../../../utils\";\r\n  import {toRaw} from '@vue/reactivity';\r\n  \r\n\r\n  export default {\r\n    name: \"AroundSearch\",\r\n    props: {\r\n      mode: {type: String, default: () => ''}\r\n    },\r\n    data() {\r\n      return {\r\n        startInput: '',\r\n        endInput: '',\r\n        targetLocation: '',\r\n        originLocation: '',\r\n        houseType: '120302',\r\n        distance: 1000,\r\n        codes: [{\r\n          label: '商务住宅相关',\r\n          value: '120000'\r\n        }, {\r\n          label: '楼宇相关',\r\n          value: '120100'\r\n        }, {\r\n          label: '商务写字楼',\r\n          value: '120201'\r\n        }, {\r\n          label: '商住两用楼',\r\n          value: '120203'\r\n        }, {\r\n          label: '住宅区',\r\n          value: '120300'\r\n        }, {\r\n          label: '别墅',\r\n          value: '120301'\r\n        },\r\n          {\r\n            label: '住宅小区',\r\n            value: '120302'\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    methods: {\r\n      async querySearchAsyncStart(queryString, cb) {\r\n        let res = await api.getInputTips({keywords: queryString})\r\n        let results = res.data.tips\r\n        cb(results)\r\n      },\r\n      async handleSelectStart(value) {\r\n        let value1 = toRaw(value)\r\n        this.startInput = value1.name\r\n        this.originLocation = value1.location\r\n      },\r\n      async querySearchAsyncEnd(queryString, cb) {\r\n        let res = await api.getInputTips({keywords: queryString})\r\n        let results = res.data.tips\r\n        cb(results)\r\n      },\r\n      handleSelectEnd(value) {\r\n        this.endInput = value.name\r\n        this.targetLocation = value.location\r\n      },\r\n      confirmClick() {\r\n        this.$emit('confirmClick',\r\n          {\r\n            source: aroundAnalysis(this.originLocation, this.distance, this.houseType, this.mode),\r\n            point: this.originLocation\r\n          }\r\n        )\r\n      },\r\n      resetClick() {\r\n        this.distance = 1000\r\n        this.startInput = ''\r\n        this.$parent.layer.getSource().clear()\r\n      }\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .nav-pane {\r\n    position: absolute;\r\n    top: 30px;\r\n    left: 80px;\r\n    z-index: 99;\r\n    width: 300px;\r\n    height: 200px;\r\n    background: #54b2ff;\r\n    display: flex;\r\n    justify-content: center;\r\n    border-radius: 4px;\r\n    opacity: 0.75;\r\n    padding: 10px;\r\n  }\r\n</style>\r\n","import { render } from \"./AroundSearch.vue?vue&type=template&id=4d3f04aa&scoped=true\"\nimport script from \"./AroundSearch.vue?vue&type=script&lang=js\"\nexport * from \"./AroundSearch.vue?vue&type=script&lang=js\"\n\nimport \"./AroundSearch.vue?vue&type=style&index=0&id=4d3f04aa&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\DEV\\\\JS\\\\supermap_proj1\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4d3f04aa\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"image-describe\">\r\n        <div class=\"image\">\r\n            <img style=\"width: 200px;height: 200px\"  :src=\"img\">\r\n        </div>\r\n        <div class=\"content\">\r\n            <div class=\"content-item\" v-for=\"item in Object.keys(content)\" :key=\"item\">\r\n                <span>{{item}}:</span>\r\n                <span>{{content[item]}}</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"ImageDescribe\",\r\n        props: {\r\n            img: {\r\n                type: String\r\n            },\r\n            content: {\r\n                type: Object,\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    .image-describe {\r\n        display: flex;\r\n        flex-direction: row;\r\n        .content{\r\n            margin-left: 10px;\r\n            align-content: center;\r\n            justify-content: space-evenly;\r\n            height: 150px;\r\n            display: flex;\r\n            flex-direction: column;\r\n            .content-item{\r\n                display: flex;\r\n\r\n            }\r\n        }\r\n    }\r\n</style>","import { render } from \"./ImageDescribe.vue?vue&type=template&id=3f63a6f1&scoped=true\"\nimport script from \"./ImageDescribe.vue?vue&type=script&lang=js\"\nexport * from \"./ImageDescribe.vue?vue&type=script&lang=js\"\n\nimport \"./ImageDescribe.vue?vue&type=style&index=0&id=3f63a6f1&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\DEV\\\\JS\\\\supermap_proj1\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3f63a6f1\"]])\n\nexport default __exports__","import { render } from \"./HouseApp.vue?vue&type=template&id=c8765a6c&scoped=true\"\nimport script from \"./HouseApp.vue?vue&type=script&lang=js\"\nexport * from \"./HouseApp.vue?vue&type=script&lang=js\"\n\nimport \"./HouseApp.vue?vue&type=style&index=0&id=c8765a6c&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\DEV\\\\JS\\\\supermap_proj1\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c8765a6c\"]])\n\nexport default __exports__","import {createApp} from 'vue'\r\nimport {\r\n  ElButton,\r\n  ElAutocomplete,\r\n  ElAside,\r\n  ElContainer,\r\n  ElMain,\r\n  ElMenu,\r\n  ElMenuItem,\r\n  ElSubmenu, ElInput, ElInputNumber,\r\n  ElSelect, ElOption, ElForm, ElFormItem, ElTable, ElTableColumn\r\n} from 'element-plus';\r\nimport App from './HouseApp.vue';\r\n// 如果要使用.scss样式文件，则需要引入base.scss文件\r\nimport 'element-plus/lib/theme-chalk/index.css';\r\n// import 'element-plus/packages/theme-chalk/src/base.scss'\r\n\r\nconst app = createApp(App)\r\napp.component(ElButton.name, ElButton)\r\napp.component(ElAutocomplete.name, ElAutocomplete)\r\napp.component(ElAside.name, ElAside)\r\napp.component(ElContainer.name, ElContainer)\r\napp.component(ElMain.name, ElMain)\r\napp.component(ElMenu.name, ElMenu)\r\napp.component(ElMenuItem.name, ElMenuItem)\r\napp.component(ElSubmenu.name, ElSubmenu)\r\napp.component(ElInput.name, ElInput)\r\napp.component(ElInputNumber.name, ElInputNumber)\r\napp.component(ElSelect.name, ElSelect)\r\napp.component(ElOption.name, ElOption)\r\napp.component(ElForm.name,ElForm)\r\napp.component(ElFormItem.name,ElFormItem)\r\napp.component(ElTable.name,ElTable)\r\napp.component(ElTableColumn.name,ElTableColumn)\r\napp.mount('#houseApp')\r\n","import axios from 'axios'\r\n\r\nlet key = 'd1f683551604b8eacec630924cba75f4'\r\n\r\nexport default {\r\n  getRoute: (data) => axios({\r\n    method: 'get', url: \"https://restapi.amap.com/v3/direction/driving\", params: {\r\n      ...data,\r\n      key: key\r\n    }\r\n  }),\r\n  getInputTips: (data) => axios({\r\n    method: 'get', url: \"https://restapi.amap.com/v3/assistant/inputtips\", params: {\r\n      ...data,\r\n      key: key\r\n    }\r\n  }),\r\n  getAround: (data) => axios({\r\n    method: 'get', url: \"https://restapi.amap.com/v3/place/around\", params: {\r\n      ...data,\r\n      key: key\r\n    }\r\n  }),\r\n  getPlace: (data) => axios({\r\n    method: 'get', url: \"https://restapi.amap.com/v3/place/text\", params: {\r\n      ...data,\r\n      key: key\r\n    }\r\n  }),\r\n\r\n}","<template>\r\n    <div id=\"map\"></div>\r\n</template>\r\n\r\n<script>\r\n    import Map from 'ol/Map';\r\n    import View from 'ol/View';\r\n    import TileLayer from 'ol/layer/Tile';\r\n    import * as control from 'ol/control';\r\n    import {Logo} from '@supermap/iclient-ol';\r\n    // import {SpatialAnalystService} from '@supermap/iclient-ol/services/index'\r\n    import {SuperMapCloud} from '@supermap/iclient-ol/mapping/index'\r\n    // import {\r\n    //     BufferDistance,\r\n    //     BufferEndType,\r\n    //     BufferSetting,\r\n    //     GeometryBufferAnalystParameters\r\n    // } from '@supermap/iclient-ol/index'\r\n    import '@supermap/iclient-ol/dist/iclient-openlayers.css'\r\n    // import {Vector as VectorLayer,Heatmap as HeatMapLayer} from 'ol/layer'\r\n    // import {Vector as VectorSource} from 'ol/source'\r\n    // import {GeoJSON} from 'ol/format'\r\n    // import Feature from 'ol/Feature';\r\n    // import {Point, Circle, LineString} from 'ol/geom';\r\n    // import {Draw} from 'ol/interaction'\r\n    // import {Icon as IconStyle, Style, Text as TextStyle} from 'ol/style'\r\n    import 'ol/ol.css'\r\n    // import api from './api'\r\n    // import {ElMessage} from 'element-plus'\r\n    // import Overlay from 'ol/Overlay'\r\n\r\n    export default {\r\n        name: \"BaseMap\",\r\n        data(){\r\n            return{\r\n                map:null,\r\n                view:null\r\n            }\r\n        },\r\n        mounted() {\r\n            this.initMap()\r\n        },\r\n        methods:{\r\n            initMap() {\r\n                this.view = new View({\r\n                    center: [114.48, 36.62],\r\n                    zoom: 13,\r\n                    projection: 'EPSG:4326',\r\n                    multiWorld: true\r\n                })\r\n                this.map = new Map({\r\n                    target: 'map',\r\n                    controls: control.defaults({attributionOptions: {collapsed: false}}).extend([new Logo()]),\r\n                    view: this.view\r\n                });\r\n                let layer = new TileLayer({\r\n                    title: 'supermap',\r\n                    type: 'base',\r\n                    source: new SuperMapCloud()\r\n                });\r\n                this.map.addLayer(layer);\r\n                this.map.once('postrender',()=>{\r\n                    this.$emit('mapCreated',this.map)\r\n                })\r\n            }\r\n\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    #map {\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 99%;\r\n        left: 0;\r\n        top: 0;\r\n    }\r\n\r\n</style>","import { render } from \"./BaseMap.vue?vue&type=template&id=ba265d90&scoped=true\"\nimport script from \"./BaseMap.vue?vue&type=script&lang=js\"\nexport * from \"./BaseMap.vue?vue&type=script&lang=js\"\n\nimport \"./BaseMap.vue?vue&type=style&index=0&id=ba265d90&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\DEV\\\\JS\\\\supermap_proj1\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ba265d90\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./BaseMap.vue?vue&type=style&index=0&id=ba265d90&lang=less&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./HouseApp.vue?vue&type=style&index=0&id=c8765a6c&scoped=true&lang=css\"","import '@supermap/iclient-ol/dist/iclient-openlayers.css'\r\nimport {Vector as VectorSource} from 'ol/source'\r\nimport {GeoJSON} from 'ol/format'\r\nimport Feature from 'ol/Feature';\r\nimport {Point, Circle} from 'ol/geom';\r\nimport {Icon as IconStyle, Style, Text as TextStyle} from 'ol/style'\r\nimport api from '@/api'\r\n\r\n\r\nexport async function routeAnalysis(start, end) {\r\n  if (start && end) {\r\n    let startCoord = start.split(',').map(Number)\r\n    let endCoord = end.split(',').map(Number)\r\n    let res = await api.getRoute({origin: start, destination: end})\r\n    let steps = res.data.route.paths[0].steps\r\n    let stepInstructions = []\r\n    let coords = []\r\n    steps.forEach(value => {\r\n      let polyline = value.polyline.split(';')\r\n      polyline = polyline.map(function (value) {\r\n        return value.split(',').map(Number)\r\n      })\r\n      stepInstructions.push({instruction: value['instruction'], location: polyline[0]})\r\n      coords = coords.concat(polyline)\r\n    })\r\n    let geoJSON = {\r\n      \"type\": \"FeatureCollection\",\r\n      \"features\": [{\r\n        \"type\": \"Feature\",\r\n        \"properties\": {},\r\n        \"geometry\": {\r\n          \"type\": \"LineString\",\r\n          \"coordinates\": coords\r\n        }\r\n      }]\r\n    }\r\n    let startFeature = new Feature({\r\n      geometry: new Point(startCoord),\r\n      properties: {}\r\n    })\r\n    startFeature.setStyle(new Style({\r\n      image: new IconStyle({\r\n        src: './起点.png',\r\n        scale: 0.2\r\n      })\r\n    }))\r\n    let endFeature = new Feature({\r\n      geometry: new Point(endCoord)\r\n    })\r\n    endFeature.setStyle(new Style({\r\n      image: new IconStyle({\r\n        src: './终点.png',\r\n        scale: 0.2\r\n      })\r\n    }))\r\n    let source = new VectorSource({\r\n      features: new GeoJSON().readFeatures(geoJSON)\r\n    })\r\n    source.addFeature(startFeature)\r\n    source.addFeature(endFeature)\r\n    return [source, stepInstructions, coords]\r\n  }\r\n}\r\n\r\n//返回周围distance公里的兴趣点\r\n/***\r\n * @param point\r\n * @param distance 单位(m)\r\n * @param codes\r\n * @returns {Promise<void>}\r\n */\r\nexport async function aroundAnalysis(point, distance, codes, icon) {\r\n  let source = new VectorSource({})\r\n  let pois = [];\r\n  let coord = point.split(',').map(Number)\r\n  for (let i = 1; i < 40; i++) {\r\n    let res = await api.getAround({\r\n      location: point,\r\n      radius: distance,\r\n      types: codes,\r\n      page: i\r\n    })\r\n    if (!res.data['pois'].length) {\r\n      break\r\n    } else {\r\n      pois = pois.concat(res.data.pois)\r\n    }\r\n  }\r\n\r\n  for (let i = 0; i < pois.length; i++) {\r\n    let name = pois[i].name\r\n    let location = pois[i].location.split(',').map(Number)\r\n    let feature = new Feature({\r\n      geometry: new Point(location),\r\n      properties: pois[i]\r\n    })\r\n    feature.setProperties(pois[i])\r\n    feature.setStyle(new Style({\r\n      image: new IconStyle({\r\n        src: './' + icon + '.png',\r\n        scale: 0.2\r\n      }),\r\n      text: new TextStyle({\r\n        text: name\r\n      })\r\n    }))\r\n    source.addFeature(feature)\r\n  }\r\n  let circle = new Feature({\r\n    geometry: new Circle(coord, distance / 111000)\r\n  })\r\n  source.addFeature(circle)\r\n  return source\r\n}\r\n\r\n//热力图分析\r\nexport async function createHeatMapSource(city, codes) {\r\n  let source = new VectorSource()\r\n  let pois = []\r\n  let tempHeatPoints = []\r\n  for (let i = 1; i < 40; i++) {\r\n    let res = await api.getPlace({types: codes, city: city, citylimit: true, page: i})\r\n    if (!res.data['pois'].length) {\r\n      break\r\n    } else {\r\n      pois = pois.concat(res.data.pois)\r\n    }\r\n  }\r\n  for (let i = 0; i < pois.length; i++) {\r\n    let location = pois[i].location.split(',').map(Number)\r\n    let feature = new Feature({\r\n      geometry: new Point(location)\r\n    })\r\n    tempHeatPoints.push(feature)\r\n  }\r\n  source.addFeatures(tempHeatPoints)\r\n  return source\r\n}\r\n\r\n//某个区间随机数\r\nexport function RandomNumBoth(Min, Max) {\r\n  var Range = Max - Min;\r\n  var Rand = Math.random();\r\n  var num = Min + Math.round(Rand * Range); //四舍五入\r\n  return num;\r\n}\r\n","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ImageDescribe.vue?vue&type=style&index=0&id=3f63a6f1&lang=less&scoped=true\""],"sourceRoot":""}