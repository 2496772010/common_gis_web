{"version":3,"sources":["webpack:///./node_modules/ol/OverlayPositioning.js","webpack:///./node_modules/ol/Overlay.js","webpack:///./node_modules/ol/interaction/Select.js","webpack:///./node_modules/ol-ext/util/input/Base.js","webpack:///./node_modules/ol-ext/util/input/Checkbox.js","webpack:///./node_modules/ol-ext/util/input/Switch.js","webpack:///./node_modules/ol-ext/util/input/Radio.js","webpack:///./node_modules/ol-ext/util/element.js","webpack:///./node_modules/ol-ext/overlay/Popup.js","webpack:///./node_modules/ol-ext/util/ext.js"],"names":["BOTTOM_LEFT","BOTTOM_CENTER","BOTTOM_RIGHT","CENTER_LEFT","CENTER_CENTER","CENTER_RIGHT","TOP_LEFT","TOP_CENTER","TOP_RIGHT","__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","this","constructor","create","Property","ELEMENT","MAP","OFFSET","POSITION","POSITIONING","_super","Overlay","options","_this","on","once","un","id","insertFirst","undefined","stopEvent","element","document","createElement","className","style","position","pointerEvents","autoPan","animation","autoPanAnimation","margin","autoPanMargin","rendered","transform_","visible","mapPostrenderListenerKey","addChangeListener","handleElementChanged","handleMapChanged","handleOffsetChanged","handlePositionChanged","handlePositioningChanged","setElement","setOffset","offset","setPositioning","positioning","OverlayPositioning","setPosition","getElement","get","getId","getMap","getOffset","getPosition","getPositioning","appendChild","map","MapEventType","POSTRENDER","render","updatePixelPosition","container","getOverlayContainerStopEvent","getOverlayContainer","insertBefore","childNodes","performAutoPan","set","setMap","panIntoView","opt_panIntoViewOptions","getTargetElement","mapRect","getRect","getSize","overlayRect","panIntoViewOptions","myMargin","offsetLeft","offsetRight","offsetTop","offsetBottom","delta","Math","abs","center","getView","getCenterInternal","centerPx","getPixelFromCoordinateInternal","newCenterPx","panOptions","animateInternal","getCoordinateFromPixelInternal","duration","easing","size","box","getBoundingClientRect","offsetX","left","window","pageXOffset","offsetY","top","pageYOffset","setVisible","display","isRendered","pixel","getPixelFromCoordinate","mapSize","updateRenderedPosition","x","round","y","posX","posY","transform","msTransform","getOptions","SelectEventType","SELECT","SelectEvent","type","selected","deselected","mapBrowserEvent","originalFeatureStyles","Select","opt_options","layerFilter","boundAddFeature_","addFeature_","bind","boundRemoveFeature_","removeFeature_","condition_","condition","addCondition_","addCondition","removeCondition_","removeCondition","toggleCondition_","toggleCondition","multi_","multi","filter_","filter","hitTolerance_","hitTolerance","style_","getDefaultStyleFunction","features_","features","layers","layers_1","layer","layerFilter_","featureLayerAssociation_","addFeatureLayerAssociation_","feature","getFeatures","getHitTolerance","getLayer","setHitTolerance","currentMap","forEach","restorePreviousStyle_","addEventListener","ADD","REMOVE","applySelectedStyle_","removeEventListener","evt","getStyle","key","setStyle","interactions","getInteractions","getArray","i","length","interaction","lastIndexOf","removeFeatureLayerAssociation_","handleEvent","add","remove","toggle","forEachFeatureAtPixel","push","getLength","item","index","indexOf","splice","extend","j","dispatchEvent","styles","POLYGON","LINE_STRING","GEOMETRY_COLLECTION","getGeometry","getType","ol","ext","input","ol_ext_input_Base","ol_Object","setAttribute","min","max","step","parent","disabled","checked","val","value","hidden","_listenDrag","elt","cback","handle","e","moving","listen","setTimeout","target","stopPropagation","preventDefault","setValue","v","Event","getValue","getInputElement","ol_ext_input_Checkbox","label","html","Element","innerHTML","trim","parentNode","after","createTextNode","isChecked","ol_ext_input_Switch","ol_ext_input_Radio","ol_ext_element","tagName","attr","test","innerText","text","addListener","click","change","opt","assign","name","console","log","eventType","fn","useCapture","split","el","st","s","styleProp","defaultView","ownerDocument","getComputedStyle","replace","toLowerCase","getPropertyValue","currentStyle","str","letter","toUpperCase","oldLeft","oldRsLeft","runtimeStyle","pixelLeft","parseInt","offsetHeight","offsetWidth","rect","documentElement","scrollTop","body","scrollLeft","height","bottom","width","right","r","offsetParent","fixed","gleft","gtop","scale","isbar","scrollContainer","scrollbar","pos","speed","dt","onmove","page","vertical","scroll","updateCounter","updateMinibar","updateMinibarDelay","pheight","clientHeight","scrollHeight","classList","onPointerDown","contains","Date","onPointerMove","onPointerUp","animate","to","minibar","init","mousewheel","onMouseWheel","removeListener","wheelDelta","detail","refresh","eventName","event","CustomEvent","createEvent","initCustomEvent","ol_Overlay_Popup","offsetBox","closeBox","onclose","onshow","hide","anchor","content","scrollDiv","_elt","setPopupClass","popupClass","anim","addPopupClass","show","getClassPositioning","c","setClosebox","classes","getVisible","classesPositioning","apply","removePopupClass","autoPositioning","setPositioning_","coordinate","self","prevHTML","slice","querySelectorAll","image","renderSync","parentElement","_tout","clearTimeout","ol_ext_inherits","child","inherits","NodeList","removeChild"],"mappings":"8IASe,GACXA,YAAa,cACbC,cAAe,gBACfC,aAAc,eACdC,YAAa,cACbC,cAAe,gBACfC,aAAc,eACdC,SAAU,WACVC,WAAY,aACZC,UAAW,a,gDClBXC,EAAwC,WACxC,IAAIC,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOC,OAAOK,UAAUC,eAAeC,KAAKR,EAAGK,KAAIN,EAAEM,GAAKL,EAAEK,KACzFP,EAAcC,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAChB,GAAiB,oBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAIS,UAAU,uBAAyBC,OAAOV,GAAK,iCAE7D,SAASW,IAAOC,KAAKC,YAAcd,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEO,UAAkB,OAANN,EAAaC,OAAOa,OAAOd,IAAMW,EAAGL,UAAYN,EAAEM,UAAW,IAAIK,IAZ3C,GAwFxCI,EAAW,CACXC,QAAS,UACTC,IAAK,MACLC,OAAQ,SACRC,SAAU,WACVC,YAAa,eAgCb,EAAyB,SAAUC,GAKnC,SAASC,EAAQC,GACb,IAAIC,EAAQH,EAAOb,KAAKI,OAASA,KAIjCY,EAAMC,GAIND,EAAME,KAINF,EAAMG,GAKNH,EAAMD,QAAUA,EAKhBC,EAAMI,GAAKL,EAAQK,GAKnBJ,EAAMK,iBACsBC,IAAxBP,EAAQM,aAA4BN,EAAQM,YAKhDL,EAAMO,eAAkCD,IAAtBP,EAAQQ,WAA0BR,EAAQQ,UAK5DP,EAAMQ,QAAUC,SAASC,cAAc,OACvCV,EAAMQ,QAAQG,eACYL,IAAtBP,EAAQY,UACFZ,EAAQY,UACR,wBAA0B,OACpCX,EAAMQ,QAAQI,MAAMC,SAAW,WAC/Bb,EAAMQ,QAAQI,MAAME,cAAgB,OACpC,IAAIC,EAAUhB,EAAQgB,QAyCtB,OAxCIA,GAAW,kBAAoBA,IAC/BA,EAAU,CACNC,UAAWjB,EAAQkB,iBACnBC,OAAQnB,EAAQoB,gBAOxBnB,EAAMe,QAA4C,IAAa,EAM/Df,EAAMoB,SAAW,CACbC,WAAY,GACZC,SAAS,GAMbtB,EAAMuB,yBAA2B,KACjCvB,EAAMwB,kBAAkBjC,EAASC,QAASQ,EAAMyB,sBAChDzB,EAAMwB,kBAAkBjC,EAASE,IAAKO,EAAM0B,kBAC5C1B,EAAMwB,kBAAkBjC,EAASG,OAAQM,EAAM2B,qBAC/C3B,EAAMwB,kBAAkBjC,EAASI,SAAUK,EAAM4B,uBACjD5B,EAAMwB,kBAAkBjC,EAASK,YAAaI,EAAM6B,+BAC5BvB,IAApBP,EAAQS,SACRR,EAAM8B,WAAW/B,EAAQS,SAE7BR,EAAM+B,eAA6BzB,IAAnBP,EAAQiC,OAAuBjC,EAAQiC,OAAS,CAAC,EAAG,IACpEhC,EAAMiC,oBAAuC3B,IAAxBP,EAAQmC,YACmCnC,EAAmB,YAC7EoC,EAAmBjE,eACAoC,IAArBP,EAAQc,UACRb,EAAMoC,YAAYrC,EAAQc,UAEvBb,EAmUX,OA9ZA3B,EAAUyB,EAASD,GAmGnBC,EAAQhB,UAAUuD,WAAa,WAC3B,OAA6CjD,KAAKkD,IAAI/C,EAASC,UAOnEM,EAAQhB,UAAUyD,MAAQ,WACtB,OAAOnD,KAAKgB,IAShBN,EAAQhB,UAAU0D,OAAS,WACvB,OAAqEpD,KAAKkD,IAAI/C,EAASE,MAQ3FK,EAAQhB,UAAU2D,UAAY,WAC1B,OAAqCrD,KAAKkD,IAAI/C,EAASG,SAS3DI,EAAQhB,UAAU4D,YAAc,WAC5B,OAAsEtD,KAAKkD,IAAI/C,EAASI,WAS5FG,EAAQhB,UAAU6D,eAAiB,WAC/B,OAAiEvD,KAAKkD,IAAI/C,EAASK,cAKvFE,EAAQhB,UAAU2C,qBAAuB,WACrC,eAAerC,KAAKoB,SACpB,IAAIA,EAAUpB,KAAKiD,aACf7B,GACApB,KAAKoB,QAAQoC,YAAYpC,IAMjCV,EAAQhB,UAAU4C,iBAAmB,WAC7BtC,KAAKmC,2BACL,eAAWnC,KAAKoB,SAChB,eAAcpB,KAAKmC,0BACnBnC,KAAKmC,yBAA2B,MAEpC,IAAIsB,EAAMzD,KAAKoD,SACf,GAAIK,EAAK,CACLzD,KAAKmC,yBAA2B,eAAOsB,EAAKC,EAAA,KAAaC,WAAY3D,KAAK4D,OAAQ5D,MAClFA,KAAK6D,sBACL,IAAIC,EAAY9D,KAAKmB,UACfsC,EAAIM,+BACJN,EAAIO,sBACNhE,KAAKiB,YACL6C,EAAUG,aAAajE,KAAKoB,QAAS0C,EAAUI,WAAW,IAAM,MAGhEJ,EAAUN,YAAYxD,KAAKoB,SAE/BpB,KAAKmE,mBAMbzD,EAAQhB,UAAUkE,OAAS,WACvB5D,KAAK6D,uBAKTnD,EAAQhB,UAAU6C,oBAAsB,WACpCvC,KAAK6D,uBAKTnD,EAAQhB,UAAU8C,sBAAwB,WACtCxC,KAAK6D,sBACL7D,KAAKmE,kBAKTzD,EAAQhB,UAAU+C,yBAA2B,WACzCzC,KAAK6D,uBAQTnD,EAAQhB,UAAUgD,WAAa,SAAUtB,GACrCpB,KAAKoE,IAAIjE,EAASC,QAASgB,IAS/BV,EAAQhB,UAAU2E,OAAS,SAAUZ,GACjCzD,KAAKoE,IAAIjE,EAASE,IAAKoD,IAQ3B/C,EAAQhB,UAAUiD,UAAY,SAAUC,GACpC5C,KAAKoE,IAAIjE,EAASG,OAAQsC,IAU9BlC,EAAQhB,UAAUsD,YAAc,SAAUvB,GACtCzB,KAAKoE,IAAIjE,EAASI,SAAUkB,IAOhCf,EAAQhB,UAAUyE,eAAiB,WAC3BnE,KAAK2B,SACL3B,KAAKsE,YAAYtE,KAAK2B,UAS9BjB,EAAQhB,UAAU4E,YAAc,SAAUC,GACtC,IAAId,EAAMzD,KAAKoD,SACf,GAAKK,GAAQA,EAAIe,oBAAuBxE,KAAKkD,IAAI/C,EAASI,UAA1D,CAGA,IAAIkE,EAAUzE,KAAK0E,QAAQjB,EAAIe,mBAAoBf,EAAIkB,WACnDvD,EAAUpB,KAAKiD,aACf2B,EAAc5E,KAAK0E,QAAQtD,EAAS,CACpC,eAAWA,GACX,eAAYA,KAEZyD,EAAqBN,GAA0B,GAC/CO,OAAyC5D,IAA9B2D,EAAmB/C,OAAuB,GAAK+C,EAAmB/C,OACjF,IAAK,eAAe2C,EAASG,GAAc,CAEvC,IAAIG,EAAaH,EAAY,GAAKH,EAAQ,GACtCO,EAAcP,EAAQ,GAAKG,EAAY,GACvCK,EAAYL,EAAY,GAAKH,EAAQ,GACrCS,EAAeT,EAAQ,GAAKG,EAAY,GACxCO,EAAQ,CAAC,EAAG,GAiBhB,GAhBIJ,EAAa,EAEbI,EAAM,GAAKJ,EAAaD,EAEnBE,EAAc,IAEnBG,EAAM,GAAKC,KAAKC,IAAIL,GAAeF,GAEnCG,EAAY,EAEZE,EAAM,GAAKF,EAAYH,EAElBI,EAAe,IAEpBC,EAAM,GAAKC,KAAKC,IAAIH,GAAgBJ,GAEvB,IAAbK,EAAM,IAAyB,IAAbA,EAAM,GAAU,CAClC,IAAIG,EAA8D7B,EAAI8B,UAAUC,oBAC5EC,EAAWhC,EAAIiC,+BAA+BJ,GAClD,IAAKG,EACD,OAEJ,IAAIE,EAAc,CAACF,EAAS,GAAKN,EAAM,GAAIM,EAAS,GAAKN,EAAM,IAC3DS,EAAaf,EAAmBjD,WAAa,GACjD6B,EAAI8B,UAAUM,gBAAgB,CAC1BP,OAAQ7B,EAAIqC,+BAA+BH,GAC3CI,SAAUH,EAAWG,SACrBC,OAAQJ,EAAWI,aAYnCtF,EAAQhB,UAAUgF,QAAU,SAAUtD,EAAS6E,GAC3C,IAAIC,EAAM9E,EAAQ+E,wBACdC,EAAUF,EAAIG,KAAOC,OAAOC,YAC5BC,EAAUN,EAAIO,IAAMH,OAAOI,YAC/B,MAAO,CAACN,EAASI,EAASJ,EAAUH,EAAK,GAAIO,EAAUP,EAAK,KAShEvF,EAAQhB,UAAUmD,eAAiB,SAAUC,GACzC9C,KAAKoE,IAAIjE,EAASK,YAAasC,IAOnCpC,EAAQhB,UAAUiH,WAAa,SAAUzE,GACjClC,KAAKgC,SAASE,UAAYA,IAC1BlC,KAAKoB,QAAQI,MAAMoF,QAAU1E,EAAU,GAAK,OAC5ClC,KAAKgC,SAASE,QAAUA,IAOhCxB,EAAQhB,UAAUmE,oBAAsB,WACpC,IAAIJ,EAAMzD,KAAKoD,SACX3B,EAAWzB,KAAKsD,cACpB,GAAKG,GAAQA,EAAIoD,cAAiBpF,EAAlC,CAIA,IAAIqF,EAAQrD,EAAIsD,uBAAuBtF,GACnCuF,EAAUvD,EAAIkB,UAClB3E,KAAKiH,uBAAuBH,EAAOE,QAL/BhH,KAAK2G,YAAW,IAYxBjG,EAAQhB,UAAUuH,uBAAyB,SAAUH,EAAOE,GACxD,IAAIxF,EAAQxB,KAAKoB,QAAQI,MACrBoB,EAAS5C,KAAKqD,YACdP,EAAc9C,KAAKuD,iBACvBvD,KAAK2G,YAAW,GAChB,IAAIO,EAAI9B,KAAK+B,MAAML,EAAM,GAAKlE,EAAO,IAAM,KACvCwE,EAAIhC,KAAK+B,MAAML,EAAM,GAAKlE,EAAO,IAAM,KACvCyE,EAAO,KACPC,EAAO,KACPxE,GAAeC,EAAmBrE,cAClCoE,GAAeC,EAAmBlE,cAClCiE,GAAeC,EAAmB/D,UAClCqI,EAAO,QAEFvE,GAAeC,EAAmBtE,eACvCqE,GAAeC,EAAmBnE,eAClCkE,GAAeC,EAAmBhE,aAClCsI,EAAO,QAEPvE,GAAeC,EAAmBvE,aAClCsE,GAAeC,EAAmBtE,eAClCqE,GAAeC,EAAmBrE,aAClC4I,EAAO,QAEFxE,GAAeC,EAAmBpE,aACvCmE,GAAeC,EAAmBnE,eAClCkE,GAAeC,EAAmBlE,eAClCyI,EAAO,QAEX,IAAIC,EAAY,aAAeF,EAAO,KAAOC,EAAO,eAAiBJ,EAAI,KAAOE,EAAI,IAChFpH,KAAKgC,SAASC,YAAcsF,IAC5BvH,KAAKgC,SAASC,WAAasF,EAC3B/F,EAAM+F,UAAYA,EAElB/F,EAAMgG,YAAcD,IAO5B7G,EAAQhB,UAAU+H,WAAa,WAC3B,OAAOzH,KAAKW,SAETD,EA/ZiB,CAga1B,QACa,U,oCC9hBf,wIAAIzB,EAAwC,WACxC,IAAIC,EAAgB,SAAUC,EAAGC,GAI7B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOC,OAAOK,UAAUC,eAAeC,KAAKR,EAAGK,KAAIN,EAAEM,GAAKL,EAAEK,KACzFP,EAAcC,EAAGC,IAE5B,OAAO,SAAUD,EAAGC,GAChB,GAAiB,oBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAIS,UAAU,uBAAyBC,OAAOV,GAAK,iCAE7D,SAASW,IAAOC,KAAKC,YAAcd,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEO,UAAkB,OAANN,EAAaC,OAAOa,OAAOd,IAAMW,EAAGL,UAAYN,EAAEM,UAAW,IAAIK,IAZ3C,GAgCxC2H,EAAkB,CAMlBC,OAAQ,UAqERC,EAA6B,SAAUnH,GASvC,SAASmH,EAAYC,EAAMC,EAAUC,EAAYC,GAC7C,IAAIpH,EAAQH,EAAOb,KAAKI,KAAM6H,IAAS7H,KAmBvC,OAbAY,EAAMkH,SAAWA,EAMjBlH,EAAMmH,WAAaA,EAMnBnH,EAAMoH,gBAAkBA,EACjBpH,EAEX,OA9BA3B,EAAU2I,EAAanH,GA8BhBmH,EA/BqB,CAgC9B,QAMEK,EAAwB,GAuBxBC,EAAwB,SAAUzH,GAKlC,SAASyH,EAAOC,GACZ,IAAIvH,EAAQH,EAAOb,KAAKI,OAASA,KAIjCY,EAAMC,GAIND,EAAME,KAINF,EAAMG,GACN,IA4DIqH,EA5DAzH,EAAUwH,GAA4B,GA6D1C,GAzDAvH,EAAMyH,iBAAmBzH,EAAM0H,YAAYC,KAAK3H,GAIhDA,EAAM4H,oBAAsB5H,EAAM6H,eAAeF,KAAK3H,GAKtDA,EAAM8H,WAAa/H,EAAQgI,UAAYhI,EAAQgI,UAAY,OAK3D/H,EAAMgI,cAAgBjI,EAAQkI,aAAelI,EAAQkI,aAAe,OAKpEjI,EAAMkI,iBAAmBnI,EAAQoI,gBAC3BpI,EAAQoI,gBACR,OAKNnI,EAAMoI,iBAAmBrI,EAAQsI,gBAC3BtI,EAAQsI,gBACR,OAKNrI,EAAMsI,SAASvI,EAAQwI,OAAQxI,EAAQwI,MAKvCvI,EAAMwI,QAAUzI,EAAQ0I,OAAS1I,EAAQ0I,OAAS,OAKlDzI,EAAM0I,cAAgB3I,EAAQ4I,aAAe5I,EAAQ4I,aAAe,EAKpE3I,EAAM4I,YACgBtI,IAAlBP,EAAQa,MAAsBb,EAAQa,MAAQiI,IAKlD7I,EAAM8I,UAAY/I,EAAQgJ,UAAY,IAAI,OAGtChJ,EAAQiJ,OACR,GAA8B,oBAAnBjJ,EAAQiJ,OACfxB,EAAczH,EAAQiJ,WAErB,CACD,IAAIC,EAAWlJ,EAAQiJ,OACvBxB,EAAc,SAAU0B,GACpB,OAAO,eAASD,EAAUC,SAKlC1B,EAAc,OAclB,OARAxH,EAAMmJ,aAAe3B,EAOrBxH,EAAMoJ,yBAA2B,GAC1BpJ,EAkOX,OA3UA3B,EAAUiJ,EAAQzH,GAgHlByH,EAAOxI,UAAUuK,4BAA8B,SAAUC,EAASJ,GAC9D9J,KAAKgK,yBAAyB,eAAOE,IAAYJ,GAOrD5B,EAAOxI,UAAUyK,YAAc,WAC3B,OAAOnK,KAAK0J,WAOhBxB,EAAOxI,UAAU0K,gBAAkB,WAC/B,OAAOpK,KAAKsJ,eAWhBpB,EAAOxI,UAAU2K,SAAW,SAAUH,GAClC,OAA4DlK,KAAKgK,yBAAyB,eAAOE,KAQrGhC,EAAOxI,UAAU4K,gBAAkB,SAAUf,GACzCvJ,KAAKsJ,cAAgBC,GAQzBrB,EAAOxI,UAAU2E,OAAS,SAAUZ,GAChC,IAAI8G,EAAavK,KAAKoD,SAClBmH,GAAcvK,KAAKwJ,QACnBxJ,KAAK0J,UAAUc,QAAQxK,KAAKyK,sBAAsBlC,KAAKvI,OAE3DS,EAAOf,UAAU2E,OAAOzE,KAAKI,KAAMyD,GAC/BA,GACAzD,KAAK0J,UAAUgB,iBAAiB,OAAoBC,IAAK3K,KAAKqI,kBAC9DrI,KAAK0J,UAAUgB,iBAAiB,OAAoBE,OAAQ5K,KAAKwI,qBAC7DxI,KAAKwJ,QACLxJ,KAAK0J,UAAUc,QAAQxK,KAAK6K,oBAAoBtC,KAAKvI,SAIzDA,KAAK0J,UAAUoB,oBAAoB,OAAoBH,IAAK3K,KAAKqI,kBACjErI,KAAK0J,UAAUoB,oBAAoB,OAAoBF,OAAQ5K,KAAKwI,uBAO5EN,EAAOxI,UAAU4I,YAAc,SAAUyC,GACrC,IAAIb,EAAUa,EAAI3J,QACdpB,KAAKwJ,QACLxJ,KAAK6K,oBAAoBX,IAOjChC,EAAOxI,UAAU+I,eAAiB,SAAUsC,GACxC,IAAIb,EAAUa,EAAI3J,QACdpB,KAAKwJ,QACLxJ,KAAKyK,sBAAsBP,IAMnChC,EAAOxI,UAAUsL,SAAW,WACxB,OAAOhL,KAAKwJ,QAMhBtB,EAAOxI,UAAUmL,oBAAsB,SAAUX,GAC7C,IAAIe,EAAM,eAAOf,GACXe,KAAOhD,IACTA,EAAsBgD,GAAOf,EAAQc,YAEzCd,EAAQgB,SAASlL,KAAKwJ,SAM1BtB,EAAOxI,UAAU+K,sBAAwB,SAAUP,GAE/C,IADA,IAAIiB,EAAenL,KAAKoD,SAASgI,kBAAkBC,WAC1CC,EAAIH,EAAaI,OAAS,EAAGD,GAAK,IAAKA,EAAG,CAC/C,IAAIE,EAAcL,EAAaG,GAC/B,GAAIE,IAAgBxL,MAChBwL,aAAuBtD,GACvBsD,EAAYR,aACmD,IAA/DQ,EAAYrB,cAAckB,WAAWI,YAAYvB,GAEjD,YADAA,EAAQgB,SAASM,EAAYR,YAIrC,IAAIC,EAAM,eAAOf,GACjBA,EAAQgB,SAASjD,EAAsBgD,WAChChD,EAAsBgD,IAMjC/C,EAAOxI,UAAUgM,+BAAiC,SAAUxB,UACjDlK,KAAKgK,yBAAyB,eAAOE,KAShDhC,EAAOxI,UAAUiM,YAAc,SAAU3D,GACrC,IAAKhI,KAAK0I,WAAWV,GACjB,OAAO,EAEX,IAAI4D,EAAM5L,KAAK4I,cAAcZ,GACzB6D,EAAS7L,KAAK8I,iBAAiBd,GAC/B8D,EAAS9L,KAAKgJ,iBAAiBhB,GAC/B5D,GAAOwH,IAAQC,IAAWC,EAC1BrI,EAAMuE,EAAgBvE,IACtBkG,EAAW3J,KAAKmK,cAChBpC,EAAa,GACbD,EAAW,GACf,GAAI1D,EAAK,CAIL,eAAMpE,KAAKgK,0BACXvG,EAAIsI,sBAAsB/D,EAAgBlB,MAM1C,SAAUoD,EAASJ,GACf,GAAI9J,KAAKoJ,QAAQc,EAASJ,GAGtB,OAFAhC,EAASkE,KAAK9B,GACdlK,KAAKiK,4BAA4BC,EAASJ,IAClC9J,KAAKkJ,QAEnBX,KAAKvI,MAAO,CACVoI,YAAapI,KAAK+J,aAClBR,aAAcvJ,KAAKsJ,gBAEvB,IAAK,IAAIgC,EAAI3B,EAASsC,YAAc,EAAGX,GAAK,IAAKA,EAAG,CAChD,IAAIpB,EAAUP,EAASuC,KAAKZ,GACxBa,EAAQrE,EAASsE,QAAQlC,GACzBiC,GAAS,EAETrE,EAASuE,OAAOF,EAAO,IAGvBxC,EAASkC,OAAO3B,GAChBnC,EAAWiE,KAAK9B,IAGA,IAApBpC,EAASyD,QACT5B,EAAS2C,OAAOxE,OAGnB,CAEDrE,EAAIsI,sBAAsB/D,EAAgBlB,MAM1C,SAAUoD,EAASJ,GACf,GAAI9J,KAAKoJ,QAAQc,EAASJ,GAUtB,OATK8B,IAAOE,GAAY,eAASnC,EAAS0B,WAAYnB,IAI5C2B,GAAUC,IAChB,eAASnC,EAAS0B,WAAYnB,KAC9BnC,EAAWiE,KAAK9B,GAChBlK,KAAK0L,+BAA+BxB,KANpCpC,EAASkE,KAAK9B,GACdlK,KAAKiK,4BAA4BC,EAASJ,KAOtC9J,KAAKkJ,QAEnBX,KAAKvI,MAAO,CACVoI,YAAapI,KAAK+J,aAClBR,aAAcvJ,KAAKsJ,gBAEvB,IAAK,IAAIiD,EAAIxE,EAAWwD,OAAS,EAAGgB,GAAK,IAAKA,EAC1C5C,EAASkC,OAAO9D,EAAWwE,IAE/B5C,EAAS2C,OAAOxE,GAKpB,OAHIA,EAASyD,OAAS,GAAKxD,EAAWwD,OAAS,IAC3CvL,KAAKwM,cAAc,IAAI5E,EAAYF,EAAgBC,OAAQG,EAAUC,EAAYC,KAE9E,GAEJE,EA5UgB,CA6UzB,QAIF,SAASuB,IACL,IAAIgD,EAAS,iBAGb,OAFA,eAAOA,EAAO,OAAaC,SAAUD,EAAO,OAAaE,cACzD,eAAOF,EAAO,OAAaG,qBAAsBH,EAAO,OAAaE,cAC9D,SAAUzC,GACb,OAAKA,EAAQ2C,cAGNJ,EAAOvC,EAAQ2C,cAAcC,WAFzB,MAKJ,U,yFC3fXxG,OAAOyG,KACTA,GAAGC,IAAIC,MAAQ,IAkBjB,IAAIC,EAAoB,SAASvM,GAC/BA,EAAUA,GAAW,GAErBwM,EAAA,KAAUvN,KAAKI,MAEf,IAAIiN,EAAQjN,KAAKiN,MAAQtM,EAAQsM,MAC5BA,IACHA,EAAQjN,KAAKiN,MAAQ5L,SAASC,cAAc,SACxCX,EAAQkH,MAAMoF,EAAMG,aAAa,OAAQzM,EAAQkH,WACjC3G,IAAhBP,EAAQ0M,KAAmBJ,EAAMG,aAAa,MAAOzM,EAAQ0M,UAC7CnM,IAAhBP,EAAQ2M,KAAmBL,EAAMG,aAAa,MAAOzM,EAAQ2M,UAC5CpM,IAAjBP,EAAQ4M,MAAoBN,EAAMG,aAAa,OAAQzM,EAAQ4M,MAC/D5M,EAAQ6M,QAAQ7M,EAAQ6M,OAAOhK,YAAYyJ,IAE7CtM,EAAQ8M,WAAUR,EAAMQ,UAAW,QACfvM,IAApBP,EAAQ+M,UAAuBT,EAAMS,UAAY/M,EAAQ+M,cACzCxM,IAAhBP,EAAQgN,MAAmBV,EAAMW,MAAQjN,EAAQgN,KACjDhN,EAAQkN,SAAQZ,EAAMzL,MAAMoF,QAAU,SAE5C,eAAgBsG,EAAmBC,EAAA,MAOnCD,EAAkBxN,UAAUoO,YAAc,SAASC,EAAKC,GACtD,IAAIC,EAAS,SAASC,GACpBlO,KAAKmO,QAAS,EACd,IAAIC,EAAS,SAASF,GACP,cAATA,EAAErG,OACJxG,SAASyJ,oBAAoB,cAAesD,GAC5C/M,SAASyJ,oBAAoB,YAAasD,GAC1C/M,SAASyJ,oBAAoB,gBAAiBsD,GAC9CC,WAAW,WACTrO,KAAKmO,QAAS,GACd5F,KAAKvI,QAELkO,EAAEI,SAAWP,GAAKC,EAAME,GAC5BA,EAAEK,kBACFL,EAAEM,kBACFjG,KAAKvI,MACPqB,SAASqJ,iBAAiB,cAAe0D,GAAQ,GACjD/M,SAASqJ,iBAAiB,YAAa0D,GAAQ,GAC/C/M,SAASqJ,iBAAiB,gBAAiB0D,GAAQ,GACnDF,EAAEK,kBACFL,EAAEM,kBACFjG,KAAKvI,MACP+N,EAAIrD,iBAAiB,YAAauD,GAAQ,GAC1CF,EAAIrD,iBAAiB,aAAcuD,GAAQ,IAK5Cf,EAAkBxN,UAAU+O,SAAW,SAASC,QACrCxN,IAANwN,IAAiB1O,KAAKiN,MAAMW,MAAQc,GACxC1O,KAAKiN,MAAMT,cAAc,IAAImC,MAAM,YAMrCzB,EAAkBxN,UAAUkP,SAAW,WACrC,OAAO5O,KAAKiN,MAAMW,OAMpBV,EAAkBxN,UAAUmP,gBAAkB,WAC5C,OAAO7O,KAAKiN,OAGC,QCrFX6B,EAAwB,SAASnO,GACnCA,EAAUA,GAAW,GAErB,EAAkBf,KAAKI,KAAMW,GAE7B,IAAIoO,EAAQ/O,KAAKoB,QAAUC,SAASC,cAAc,SAC9CX,EAAQqO,gBAAgBC,QAASF,EAAMvL,YAAY7C,EAAQqO,WACrC9N,IAAjBP,EAAQqO,OAAoBD,EAAMG,UAAYvO,EAAQqO,MAC/DD,EAAMxN,WAAa,iCAAoCZ,EAAQY,WAAa,KAAK4N,OAE7EnP,KAAKiN,MAAMmC,YAAYpP,KAAKiN,MAAMmC,WAAWnL,aAAa8K,EAAO/O,KAAKiN,OAC1E8B,EAAMvL,YAAYxD,KAAKiN,OACvB8B,EAAMvL,YAAYnC,SAASC,cAAc,SACrCX,EAAQ0O,OACVN,EAAMvL,YAAYnC,SAASiO,eAAe3O,EAAQ0O,QAIpDrP,KAAKiN,MAAMvC,iBAAiB,SAAU,WACpC1K,KAAKwM,cAAc,CAAE3E,KAAM,QAAS6F,QAAS1N,KAAKiN,MAAMS,QAASE,MAAO5N,KAAKiN,MAAMW,SACnFrF,KAAKvI,QAGT,eAAgB8O,EAAuB,GAEvCA,EAAsBpP,UAAU6P,UAAY,WAC1C,OAAOvP,KAAKiN,MAAMS,SAGL,QCjCX8B,EAAsB,SAAS7O,GACjCA,EAAUA,GAAW,GAErB,EAAsBf,KAAKI,KAAMW,GAEjCX,KAAKoB,QAAQG,WAAa,yBAA2BZ,EAAQY,WAAa,KAAK4N,QAEjF,eAAgBK,EAAqB,GAEtB,QCTXC,EAAqB,SAAS9O,GAChCA,EAAUA,GAAW,GAErB,EAAsBf,KAAKI,KAAMW,GAEjCX,KAAKoB,QAAQG,WAAa,8BAAgCZ,EAAQY,WAAa,KAAK4N,QAEtF,eAAgBM,EAAoB,GAErB,QCXXC,EAAiB,CAarB,OAAwB,SAAUC,EAAShP,GAEzC,IAAIoN,EAEJ,GAHApN,EAAUA,GAAW,GAGL,SAAZgP,EACF5B,EAAM1M,SAASiO,eAAe3O,EAAQqO,MAAM,IACxCrO,EAAQ6M,QAAQ7M,EAAQ6M,OAAOhK,YAAYuK,QAK/C,IAAK,IAAI6B,KAFT7B,EAAM1M,SAASC,cAAcqO,GACzB,UAAUE,KAAKF,IAAU5B,EAAIX,aAAa,OAAQ,UACrCzM,EACf,OAAQiP,GACN,IAAK,YACCjP,EAAQY,WAAaZ,EAAQY,UAAU4N,MAAMpB,EAAIX,aAAa,QAASzM,EAAQY,UAAU4N,QAC7F,MAEF,IAAK,OACHpB,EAAI+B,UAAYnP,EAAQoP,KACxB,MAEF,IAAK,OACCpP,EAAQqO,gBAAgBC,QAASlB,EAAIvK,YAAY7C,EAAQqO,WACrC9N,IAAfP,EAAQqO,OAAkBjB,EAAImB,UAAYvO,EAAQqO,MAC3D,MAEF,IAAK,SACCrO,EAAQ6M,QAAQ7M,EAAQ6M,OAAOhK,YAAYuK,GAC/C,MAEF,IAAK,UACH,GAAI,UAAU8B,KAAKF,GACjB,IAAK,IAAIrE,KAAK3K,EAAQA,QACpB+O,EAAexP,OAAO,SAAU,CAC9B8O,KAAM1D,EACNsC,MAAOjN,EAAQA,QAAQ2K,GACvBkC,OAAQO,IAId,MAEF,IAAK,QACH/N,KAAKkL,SAAS6C,EAAKpN,EAAQa,OAC3B,MAEF,IAAK,SACL,IAAK,QACHkO,EAAeM,YAAYjC,EAAK6B,EAAMjP,EAAQiP,IAC9C,MAEF,IAAK,KACH,IAAK,IAAI1B,KAAKvN,EAAQE,GACpB6O,EAAeM,YAAYjC,EAAKG,EAAGvN,EAAQE,GAAGqN,IAEhD,MAEF,IAAK,UACHH,EAAIL,UAAY/M,EAAQ+M,QACxB,MAEF,QACEK,EAAIX,aAAawC,EAAMjP,EAAQiP,IAC/B,MAKR,OAAO7B,GAaT,aAA8B,SAAUpN,GACtC,IAAIsM,EAAQyC,EAAexP,OAAO,QAAS,CACzC2H,KAAM,WACNhH,GAAIF,EAAQE,GACZoP,MAAOtP,EAAQsP,MACfC,OAAQvP,EAAQuP,OAChB1C,OAAQ7M,EAAQ6M,SAEd2C,EAAM9Q,OAAO+Q,OAAQ,CAAEnD,MAAOA,GAAStM,GAAW,IAEtD,OADA,IAAI,EAAoBwP,GACjBlD,GAeT,YAA6B,SAAUtM,GACrC,IAAIsM,EAAQyC,EAAexP,OAAO,QAAS,CACzCmQ,KAAM1P,EAAQ0P,KACdxI,KAAsB,UAAflH,EAAQkH,KAAiB,QAAU,WAC1ChH,GAAIF,EAAQE,GACZ2M,OAAQ7M,EAAQ6M,SAElB8C,QAAQC,IAAItD,GACZ,IAAIkD,EAAM9Q,OAAO+Q,OAAQ,CAAEnD,MAAOA,GAAStM,GAAW,IAMtD,MALqB,UAAjBA,EAAQkH,KACV,IAAI,EAAmBsI,GAEvB,IAAI,EAAsBA,GAErBlD,GAOT,QAAyB,SAAS7L,EAAS4N,GACrCA,aAAgBC,QAAS7N,EAAQoC,YAAYwL,QACjC9N,IAAP8N,IAAkB5N,EAAQ8N,UAAYF,IAOjD,WAA4B,SAAS5N,EAAS2O,GAC5C3O,EAAQoC,YAAYnC,SAASiO,eAAeS,GAAM,MASpD,YAA6B,SAAU3O,EAASoP,EAAWC,EAAIC,GACpC,kBAAdF,IAAwBA,EAAYA,EAAUG,MAAM,MAC/DH,EAAUhG,SAAQ,SAAS0D,GACzB9M,EAAQsJ,iBAAiBwD,EAAGuC,EAAIC,OAUpC,eAAgC,SAAUtP,EAASoP,EAAWC,GACnC,kBAAdD,IAAwBA,EAAYA,EAAUG,MAAM,MAC/DH,EAAUhG,SAAQ,SAAS0D,GACzB9M,EAAQ0J,oBAAoBoD,EAAGuC,OAQnC,KAAsB,SAAUrP,GAC9BA,EAAQI,MAAMoF,QAAU,IAO1B,KAAsB,SAAUxF,GAC9BA,EAAQI,MAAMoF,QAAU,QAQ1B,OAAwB,SAAUxF,GAChC,MAAuD,SAAhDsO,EAAe1E,SAAS5J,EAAS,YAO1C,OAAwB,SAAUA,GAChCA,EAAQI,MAAMoF,QAAmC,SAAxBxF,EAAQI,MAAMoF,QAAmB,GAAK,QAOjE,SAA0B,SAASgK,EAAIC,GACrC,IAAK,IAAIC,KAAKD,EACZ,OAAQC,GACN,IAAK,MACL,IAAK,OACL,IAAK,SACL,IAAK,QACL,IAAK,WACL,IAAK,WACL,IAAK,QACL,IAAK,SACmB,kBAAXD,EAAGC,GACZF,EAAGpP,MAAMsP,GAAKD,EAAGC,GAAG,KAEpBF,EAAGpP,MAAMsP,GAAKD,EAAGC,GAEnB,MAEF,QACEF,EAAGpP,MAAMsP,GAAKD,EAAGC,KAYzB,SAA0B,SAASF,EAAIG,GACrC,IAAInD,EAAOoD,GAAeJ,EAAGK,eAAiB5P,UAAU2P,YAExD,GAAIA,GAAeA,EAAYE,iBAG7BH,EAAYA,EAAUI,QAAQ,WAAY,OAAOC,cACjDxD,EAAQoD,EAAYE,iBAAiBN,EAAI,MAAMS,iBAAiBN,QAC3D,GAAIH,EAAGU,eAEZP,EAAYA,EAAUI,QAAQ,UAAU,SAASI,EAAKC,GACpD,OAAOA,EAAOC,iBAEhB7D,EAAQgD,EAAGU,aAAaP,GAEpB,sBAAsBlB,KAAKjC,IAC7B,OAAO,SAAUA,GACf,IAAI8D,EAAUd,EAAGpP,MAAM6E,KAAMsL,EAAYf,EAAGgB,aAAavL,KAMzD,OALAuK,EAAGgB,aAAavL,KAAOuK,EAAGU,aAAajL,KACvCuK,EAAGpP,MAAM6E,KAAOuH,GAAS,EACzBA,EAAQgD,EAAGpP,MAAMqQ,UAAY,KAC7BjB,EAAGpP,MAAM6E,KAAOqL,EAChBd,EAAGgB,aAAavL,KAAOsL,EAChB/D,EAPF,CAQJA,GAGP,MAAI,MAAMiC,KAAKjC,GAAekE,SAASlE,GAChCA,GAOT,YAA6B,SAASG,GACpC,OAAOA,EAAIgE,aAAerC,EAAe1E,SAAS+C,EAAK,iBAOzD,WAA4B,SAASA,GACnC,OAAOA,EAAIiE,YAActC,EAAe1E,SAAS+C,EAAK,eAOxD,WAA4B,SAASA,GACnC,IAAIkE,EAAOlE,EAAI5H,wBACf,MAAO,CACLM,IAAKwL,EAAKxL,KAAOH,OAAOI,aAAerF,SAAS6Q,gBAAgBC,WAAa9Q,SAAS+Q,KAAKD,WAAa,GACxG9L,KAAM4L,EAAK5L,MAAQC,OAAOC,aAAelF,SAAS6Q,gBAAgBG,YAAchR,SAAS+Q,KAAKC,YAAc,GAC5GC,OAAQL,EAAKK,QAAWL,EAAKM,OAASN,EAAKxL,IAC3C+L,MAAOP,EAAKO,OAAUP,EAAKQ,MAAQR,EAAK5L,OAQ5C,eAAgC,SAAS0H,GACvC,IAAInL,EAAS,CACXyD,KAAK,EACLI,IAAI,GAEFpD,EAAY,SAASmK,GACvB,IAAKA,EAAQ,OAAO5K,EAEpB,GAAoD,aAAhD8M,EAAe1E,SAASwC,EAAQ,aACkB,SAAjDkC,EAAe1E,SAASwC,EAAQ,aAAyB,CAC5D,IAAIkF,EAAIlF,EAAOrH,wBAGf,OAFAvD,EAAOyD,MAAQqM,EAAErM,KACjBzD,EAAO6D,KAAOiM,EAAEjM,IACT7D,EAGT,OADA0N,QAAQC,IAAI/C,EAAQ5K,GACbS,EAAUmK,EAAOmF,eAE1B,OAAOtP,EAAU0K,EAAI4E,eAQvB,aAA8B,SAAS5E,EAAK6E,GAC1C,IAAIC,EAAQ,EACRC,EAAO,EAEPpO,EAAU,SAAU8I,GACtB,GAAIA,EAGF,OAFAqF,GAASrF,EAAOzI,WAChB+N,GAAQtF,EAAOvI,UACRP,EAAQ8I,EAAOmF,cAEtB,IAAID,EAAI,CACNjM,IAAKsH,EAAI9I,UAAY6N,EACrBzM,KAAM0H,EAAIhJ,WAAa8N,GAQzB,OANID,IACFF,EAAEjM,KAAQH,OAAOI,aAAerF,SAAS6Q,gBAAgBC,WAAa9Q,SAAS+Q,KAAKD,WAAa,EACjGO,EAAErM,MAASC,OAAOC,aAAelF,SAAS6Q,gBAAgBG,YAAchR,SAAS+Q,KAAKC,YAAc,GAEtGK,EAAEH,OAASG,EAAEjM,IAAMsH,EAAIgE,aACvBW,EAAED,MAAQC,EAAEjM,IAAMsH,EAAIiE,YACfU,GAGX,OAAOhO,EAAQqJ,EAAI4E,eAcrB,UAA2B,SAAS5E,EAAKpN,GACvCA,EAAUA,GAAW,GACrB,IAEIxB,EAQA4T,EAAOC,EAiFPC,EAAiBC,EA3FjBC,GAAM,EACNC,EAAQ,EACLC,EAAK,EAERC,EAAqC,oBAApB3S,EAAc,OAAmBA,EAAQ2S,OAAS,aAEnEC,EAAO5S,EAAQ6S,SAAW,UAAY,UACtCC,EAAS9S,EAAQ6S,SAAW,YAAc,aAC1CrF,GAAS,EAKTuF,EAAgB,EAChBC,EAAgB,WACdT,IACFQ,IACArF,WAAWuF,KAGXA,EAAqB,WACvB,GAAIV,EAAW,CAGb,GAFAQ,IAEIA,EAAe,OAEnB,IAAIG,EAAU9F,EAAI+F,aAEdxB,EAASvE,EAAIgG,aAEjBhB,EAAQc,EAAUvB,EAClBY,EAAU1R,MAAM8Q,OAAiB,IAARS,EAAc,IACvCG,EAAU1R,MAAMiF,IAAOsH,EAAIoE,UAAYG,EAAS,IAAO,IACvDW,EAAgBzR,MAAM8Q,OAASuB,EAAU,KAErCA,EAAUvB,EAAS,GAAIW,EAAgBe,UAAUpI,IAAI,YACpDqH,EAAgBe,UAAUnI,OAAO,cAKtCoI,EAAgB,SAAS/F,GAEvBA,EAAEI,OAAO0F,UAAUE,SAAS,iBAEhC/F,GAAS,EACTgF,EAAMjF,EAAEqF,GACRF,EAAK,IAAIc,KACTpG,EAAIiG,UAAUpI,IAAI,WAElBsC,EAAEM,iBAEFlI,OAAOoE,iBAAiB,cAAe0J,GACvC1E,EAAeM,YAAY1J,OAAQ,CAAC,YAAY,iBAAkB+N,KAIhED,EAAgB,SAASlG,GAE3B,GADAC,GAAS,GACG,IAARgF,EAAe,CACjB,IAAIhO,GAAS6N,GAAS,EAAED,EAAQ,IAAMI,EAAMjF,EAAEqF,IAC9CxF,EAAI0F,IAAWtO,EACfhG,EAAI,IAAIgV,KACJhV,EAAEkU,IACJD,GAASA,EAAQjO,GAAShG,EAAIkU,IAAK,GAErCF,EAAMjF,EAAEqF,GACRF,EAAKlU,EAEDgG,GAAOmO,GAAO,KAKlBgB,EAAU,SAASC,GACrB,IAAIhH,EAAQgH,EAAG,EAAKnP,KAAKiI,IAAI,IAAKkH,EAAG,GAAKnP,KAAKkI,KAAK,IAAKiH,EAAG,GAC5DA,GAAMhH,EACNQ,EAAI0F,IAAWlG,GACV,EAAIgH,GAAMA,EAAK,GACdpG,EAAQE,YAAW,WAAaN,EAAIiG,UAAUnI,OAAO,cACpDkC,EAAIiG,UAAUnI,OAAO,WAC1BsC,GAAS,EACTmF,GAAO,IAEPjF,YAAW,WACTiG,EAAQC,KACP,KAMP,GAAI5T,EAAQ6S,UAAY7S,EAAQ6T,QAAS,CACvC,IAAIC,EAAO,SAASrV,GAElB2O,EAAIjD,oBAAoB,cAAe2J,GACvC1G,EAAIqB,WAAW4E,UAAUpI,IAAI,iBAC7BsH,EAAYxD,EAAexP,OAAO,OAClC+S,EAAkBvD,EAAexP,OAAO,MAAO,CAC7CqB,UAAW,YACXyN,KAAMkE,IAERnF,EAAIqB,WAAWnL,aAAagP,EAAiBlF,GAE7CmF,EAAUxI,iBAAiB,eAAe,SAASwD,GACjD8E,GAAQ,EACRiB,EAAc/F,MAGZvN,EAAQ+T,aACVhF,EAAeM,YAAYiD,EACzB,CAAC,aAAc,iBAAkB,iBACjC,SAAS/E,GAAKyG,EAAazG,MAE7BwB,EAAeM,YAAYkD,EACzB,CAAC,aAAc,iBAAkB,iBACjC,SAAShF,GAAKyG,EAAazG,OAI/BH,EAAIqB,WAAW1E,iBAAiB,eAAgBiJ,GAEhDrN,OAAOoE,iBAAiB,SAAUiJ,IAE1B,IAAJvU,GAAWuU,KAGb5F,EAAIqB,WAAYqF,GAAK,GAEpB1G,EAAIrD,iBAAiB,cAAe+J,GAEzC1G,EAAIrD,iBAAiB,UAAU,WAC7BiJ,OAKJ5F,EAAIvM,MAAM,gBAAkB,OAC5BuM,EAAIvM,MAAM,YAAc,SACxBuM,EAAIiG,UAAUpI,IAAI,gBAGlB8D,EAAeM,YAAYjC,EAAK,CAAC,gBAAgB,SAASG,GACxD8E,GAAQ,EACRiB,EAAc/F,MAIhBH,EAAIrD,iBAAiB,SAAS,SAASwD,GACjCH,EAAIiG,UAAUE,SAAS,aACzBhG,EAAEM,iBACFN,EAAEK,sBAEH,GAGH,IAAI8F,EAAc,SAASnG,GACzBmF,EAAK,IAAIc,KAASd,EACdA,EAAG,KAAOL,EAEZI,EAAQ,EACCC,EAAG,IAEZD,IAAUA,GAAO,IAAMD,EAAMjF,EAAEqF,IAASF,GAAM,GAEhDiB,GAA0B,IAAlB3T,EAAQ2T,QAAkB,EAAU,IAANlB,GACtCD,GAAM,EACNC,EAAQ,EACRC,EAAK,EAEAtF,EAAIiG,UAAUE,SAAS,WAI1BnG,EAAIiG,UAAUnI,OAAO,gBAHrBkC,EAAIiG,UAAUpI,IAAI,eAClByC,YAAW,WAAaN,EAAIiG,UAAUnI,OAAO,iBAAmB,MAIlEmH,GAAQ,EACR1M,OAAOwE,oBAAoB,cAAesJ,GAC1C1E,EAAekF,eAAetO,OAAQ,CAAC,YAAY,iBAAkB+N,IAInEM,EAAe,SAASzG,GAC1B,IAAI/I,EAAQC,KAAKkI,KAAK,EAAGlI,KAAKiI,IAAI,EAAIa,EAAE2G,aAAe3G,EAAE4G,SAIzD,OAHA/G,EAAIiG,UAAUpI,IAAI,WAClBmC,EAAI0F,IAAiB,GAANtO,EACf4I,EAAIiG,UAAUnI,OAAO,YACd,GAST,OAPIlL,EAAQ+T,YACVhF,EAAeM,YAAYjC,EACzB,CAAC,aAAc,iBAAkB,gBACjC4G,GAIG,CACLI,QAASpB,IAQb,cAA+B,SAAUqB,EAAW5T,GAClD,IAAI6T,EACJ,IACEA,EAAQ,IAAIC,YAAYF,GACxB,MAAM9G,GAEN+G,EAAQ5T,SAAS8T,YAAY,eAC7BF,EAAMG,gBAAgBJ,GAAW,GAAM,EAAM,IAE/C5T,EAAQoL,cAAcyI,KAGT,U,oCC5lBf,wCAoCII,EAAmB,SAAU1U,GAC/BA,EAAUA,GAAW,GAEW,kBAArBA,EAAiB,UAAcX,KAAKsV,UAAY,CAAC3U,EAAQ2U,UAAU3U,EAAQ2U,UAAU3U,EAAQ2U,UAAU3U,EAAQ2U,WACrHtV,KAAKsV,UAAY3U,EAAQ2U,UAG9B,IAAIlU,EAAUC,SAASC,cAAc,OAErCX,EAAQS,QAAUA,EAElBpB,KAAKuV,SAAW5U,EAAQ4U,SACxBvV,KAAKwV,QAAU7U,EAAQ6U,QACvBxV,KAAKyV,OAAS9U,EAAQ8U,OACtB,OAAevV,OAAO,SAAU,CAC9BqB,UAAW,YAAcZ,EAAQ4U,SAAW,eAAe,IAC3D1N,KAAM,SACNoI,MAAO,WACLjQ,KAAK0V,QACLnN,KAAKvI,MACPwN,OAAQpM,KAGW,IAAjBT,EAAQgV,QACV,OAAezV,OAAO,MAAO,CAC3BqB,UAAW,SACXiM,OAAQpM,IAKZpB,KAAK4V,QAAU,OAAe1V,OAAO,MAAO,CAC1C8O,KAAMrO,EAAQqO,MAAQ,GACtBzN,UAAW,mBACXiM,OAAQpM,IAENT,EAAQ6T,SACV,OAAeqB,UAAU7V,KAAK4V,QAAS,CACrCpC,UAAU,EACVkB,YAAY,EACZF,SAAS,IAKT7T,EAAQQ,YACVC,EAAQsJ,iBAAiB,aAAa,SAASwD,GAAIA,EAAEK,qBACrDnN,EAAQsJ,iBAAiB,cAAc,SAASwD,GAAIA,EAAEK,sBAGxD,OAAW3O,KAAKI,KAAMW,GACtBX,KAAK8V,KAAO1U,EAGZpB,KAAK6C,eAAelC,EAAQmC,aAAe,QAC3C9C,KAAK+V,cAAcpV,EAAQqV,YAAcrV,EAAQY,WAAa,WAC1DZ,EAAQsV,MAAMjW,KAAKkW,cAAc,QAGjCvV,EAAQc,UACV4M,WAAW,WAAYrO,KAAKmW,KAAKxV,EAAQc,WAAa8G,KAAKvI,QAG/D,eAAgBqV,EAAkB,QAMlCA,EAAiB3V,UAAU0W,oBAAsB,WAC/C,IAAIC,EAAI,GACJlD,EAAMnT,KAAKuD,iBAOf,MANI,SAASsM,KAAKsD,KAAMkD,GAAK,oBACzB,MAAMxG,KAAKsD,KAAMkD,GAAK,iBACtB,OAAOxG,KAAKsD,KAAMkD,GAAK,kBACvB,QAAQxG,KAAKsD,KAAMkD,GAAK,mBACxB,UAAUxG,KAAKsD,KAAMkD,GAAK,oBAC1B,UAAUxG,KAAKsD,KAAMkD,GAAK,oBACvBA,GAQThB,EAAiB3V,UAAU4W,YAAc,SAAUlX,GACjDY,KAAKuV,SAAWnW,EACZA,EAAGY,KAAKoB,QAAQ4S,UAAUpI,IAAI,eAC7B5L,KAAKoB,QAAQ4S,UAAUnI,OAAO,gBAQrCwJ,EAAiB3V,UAAUqW,cAAgB,SAAUM,GACnD,IAAIE,EAAU,CAAC,YACXvW,KAAKwW,cAAcD,EAAQvK,KAAK,WACpChM,KAAKoB,QAAQG,UAAY,GACzB,IAAIkV,EAAqBzW,KAAKoW,sBAAsBzF,MAAM,KACvDtH,QAAO,SAAS9H,GACf,OAAOA,EAAUgK,OAAS,KAE1B8K,EACFA,EAAE1F,MAAM,KAAKtH,QAAO,SAAS9H,GAC3B,OAAOA,EAAUgK,OAAS,KAE3Bf,SAAQ,SAASjJ,GAChBgV,EAAQvK,KAAKzK,MAGfgV,EAAQvK,KAAK,WAEfyK,EAAmBjM,SAAQ,SAASjJ,GAClCgV,EAAQvK,KAAKzK,MAEXvB,KAAKuV,UACPgB,EAAQvK,KAAK,eAEfhM,KAAKoB,QAAQ4S,UAAUpI,IAAI8K,MAAM1W,KAAKoB,QAAQ4S,UAAWuC,IAQ3DlB,EAAiB3V,UAAUwW,cAAgB,SAAUG,GACnDrW,KAAKoB,QAAQ4S,UAAUpI,IAAIyK,IAQ7BhB,EAAiB3V,UAAUiX,iBAAmB,SAAUN,GACtDrW,KAAKoB,QAAQ4S,UAAUnI,OAAOwK,IAShChB,EAAiB3V,UAAUmD,eAAiB,SAAUsQ,QACxCjS,IAARiS,IAEA,OAAOtD,KAAKsD,IACdnT,KAAK4W,gBAAkBzD,EAAIxC,MAAM,KACA,GAA7B3Q,KAAK4W,gBAAgBrL,SAAWvL,KAAK4W,gBAAgB,GAAG,SAE5D5W,KAAK4W,iBAAkB,EAEzBzD,EAAMA,EAAIhC,QAAQ,QAAQ,UACjB,UAALgC,IAAeA,EAAM,iBACzBnT,KAAK6W,gBAAgB1D,KAMvBkC,EAAiB3V,UAAUmX,gBAAkB,SAAU1D,GACrD,GAAInT,KAAKoB,QAAS,CAChB,OAAW1B,UAAUmD,eAAejD,KAAKI,KAAMmT,GAC/CnT,KAAKoB,QAAQ4S,UAAUnI,OAAO,eAAgB,kBAAmB,gBAAiB,iBAAkB,kBAAmB,mBACvH,IAAI0K,EAAUvW,KAAKoW,sBAAsBzF,MAAM,KAC5CtH,QAAO,SAAS9H,GACf,OAAOA,EAAUgK,OAAS,KAE9BvL,KAAKoB,QAAQ4S,UAAUpI,IAAI8K,MAAM1W,KAAKoB,QAAQ4S,UAAWuC,KAO7DlB,EAAiB3V,UAAU8W,WAAa,WACtC,OAAOxW,KAAKoB,QAAQ4S,UAAUE,SAAS,YAiBzCmB,EAAiB3V,UAAUyW,KAAO,SAAUW,EAAY9H,GACjDA,GAA4B,iBAAd,IACjBA,EAAO8H,EACPA,EAAa,OAEE,IAAbA,IACFA,EAAa9W,KAAKsD,eAGpB,IAAIyT,EAAO/W,KACPyD,EAAMzD,KAAKoD,SACf,GAAKK,IAEDuL,GAAQA,IAAShP,KAAKgX,WAExBhX,KAAKgX,SAAWhI,EAChBhP,KAAK4V,QAAQ1G,UAAY,GACrBF,aAAgBC,QAClBjP,KAAK4V,QAAQpS,YAAYwL,GAEzB,OAAe9O,OAAO,MAAO,CAC3B8O,KAAMA,EACNxB,OAAQxN,KAAK4V,UAIjBpW,MAAME,UAAUuX,MAAMrX,KAAKI,KAAK4V,QAAQsB,iBAAiB,QACtD1M,SAAQ,SAAS2M,GAChBA,EAAMzM,iBAAiB,QAAQ,WAC7B,IAAMjH,EAAI2T,aAAgB,MAAMlJ,IAChC6I,EAAKnB,QAAQpJ,cAAc,IAAImC,MAAM,kBAKzCmI,GAAY,CAEd,GAAI9W,KAAK4W,gBAAiB,CACxB,IAAInX,EAAIgE,EAAIsD,uBAAuB+P,GAC/BhG,EAAIrN,EAAIkB,UACRwO,EAAI,GACqB,QAAzBnT,KAAK4W,gBAAgB,GACvBzD,EAAI,GAAM1T,EAAE,GAAGqR,EAAE,GAAG,EAAK,MAAQ,SAE9BqC,EAAI,GAAKnT,KAAK4W,gBAAgB,GACnCzD,EAAI,GAAM1T,EAAE,GAAG,EAAEqR,EAAE,GAAG,EAAK,OAAS,QACpC9Q,KAAK6W,gBAAgB1D,EAAI,GAAG,IAAIA,EAAI,IAChCnT,KAAKsV,WACPtV,KAAK2C,UAAU,CAAC3C,KAAKsV,UAAkB,QAARnC,EAAI,GAAW,EAAE,GAAInT,KAAKsV,UAAkB,OAARnC,EAAI,GAAU,EAAE,UAGjFnT,KAAKsV,WACPtV,KAAK2C,UAAU3C,KAAKsV,WAIxBtV,KAAKgD,YAAY8T,GAEjB9W,KAAKoB,QAAQiW,cAAc7V,MAAMoF,QAAU,GACf,mBAAhB5G,KAAW,QAAiBA,KAAKyV,SAC7CzV,KAAKwM,cAAc,CAAE3E,KAAM,SAC3B7H,KAAKsX,MAAQjJ,YAAY,WACvB0I,EAAK3V,QAAQ4S,UAAUpI,IAAI,aAC1B,KAQPyJ,EAAiB3V,UAAUgW,KAAO,gBACNxU,GAAtBlB,KAAKsD,gBACoB,mBAAjBtD,KAAY,SAAiBA,KAAKwV,UAC9CxV,KAAKgD,iBAAY9B,GACblB,KAAKsX,OAAOC,aAAavX,KAAKsX,OAClCtX,KAAKoB,QAAQ4S,UAAUnI,OAAO,WAC9B7L,KAAKwM,cAAc,CAAE3E,KAAM,WAGb,U,kCCvTZvB,OAAOyG,KAAOA,GAAGC,MACnBD,GAAGC,IAAM,IAWX,IAAIwK,EAAkB,SAASC,EAAMjK,GACnCiK,EAAM/X,UAAYL,OAAOa,OAAOsN,EAAO9N,WACvC+X,EAAM/X,UAAUO,YAAcwX,GAI5BnR,OAAOyG,KACJA,GAAG2K,WAAU3K,GAAG2K,SAAWF,IAK9BlR,OAAOqR,WAAaA,SAASjY,UAAU8K,UACzCmN,SAASjY,UAAU8K,QAAUhL,MAAME,UAAU8K,SAG3ClE,OAAO2I,UAAYA,QAAQvP,UAAUmM,SACvCoD,QAAQvP,UAAUmM,OAAS,WACrB7L,KAAKoP,YAAYpP,KAAKoP,WAAWwI,YAAY5X,QAMtC,U","file":"assets/js/chunk-6007fdb2.caebabc2.js","sourcesContent":["/**\n * @module ol/OverlayPositioning\n */\n/**\n * Overlay position: `'bottom-left'`, `'bottom-center'`,  `'bottom-right'`,\n * `'center-left'`, `'center-center'`, `'center-right'`, `'top-left'`,\n * `'top-center'`, `'top-right'`\n * @enum {string}\n */\nexport default {\n    BOTTOM_LEFT: 'bottom-left',\n    BOTTOM_CENTER: 'bottom-center',\n    BOTTOM_RIGHT: 'bottom-right',\n    CENTER_LEFT: 'center-left',\n    CENTER_CENTER: 'center-center',\n    CENTER_RIGHT: 'center-right',\n    TOP_LEFT: 'top-left',\n    TOP_CENTER: 'top-center',\n    TOP_RIGHT: 'top-right',\n};\n//# sourceMappingURL=OverlayPositioning.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/Overlay\n */\nimport BaseObject from './Object.js';\nimport MapEventType from './MapEventType.js';\nimport OverlayPositioning from './OverlayPositioning.js';\nimport { CLASS_SELECTABLE } from './css.js';\nimport { containsExtent } from './extent.js';\nimport { listen, unlistenByKey } from './events.js';\nimport { outerHeight, outerWidth, removeChildren, removeNode } from './dom.js';\n/**\n * @typedef {Object} Options\n * @property {number|string} [id] Set the overlay id. The overlay id can be used\n * with the {@link module:ol/Map~Map#getOverlayById} method.\n * @property {HTMLElement} [element] The overlay element.\n * @property {Array<number>} [offset=[0, 0]] Offsets in pixels used when positioning\n * the overlay. The first element in the\n * array is the horizontal offset. A positive value shifts the overlay right.\n * The second element in the array is the vertical offset. A positive value\n * shifts the overlay down.\n * @property {import(\"./coordinate.js\").Coordinate} [position] The overlay position\n * in map projection.\n * @property {import(\"./OverlayPositioning.js\").default} [positioning='top-left'] Defines how\n * the overlay is actually positioned with respect to its `position` property.\n * Possible values are `'bottom-left'`, `'bottom-center'`, `'bottom-right'`,\n * `'center-left'`, `'center-center'`, `'center-right'`, `'top-left'`,\n * `'top-center'`, and `'top-right'`.\n * @property {boolean} [stopEvent=true] Whether event propagation to the map\n * viewport should be stopped. If `true` the overlay is placed in the same\n * container as that of the controls (CSS class name\n * `ol-overlaycontainer-stopevent`); if `false` it is placed in the container\n * with CSS class name specified by the `className` property.\n * @property {boolean} [insertFirst=true] Whether the overlay is inserted first\n * in the overlay container, or appended. If the overlay is placed in the same\n * container as that of the controls (see the `stopEvent` option) you will\n * probably set `insertFirst` to `true` so the overlay is displayed below the\n * controls.\n * @property {PanIntoViewOptions|boolean} [autoPan=false] Pan the map when calling\n * `setPosition`, so that the overlay is entirely visible in the current viewport?\n * If `true` (deprecated), then `autoPanAnimation` and `autoPanMargin` will be\n * used to determine the panning parameters; if an object is supplied then other\n * parameters are ignored.\n * @property {PanOptions} [autoPanAnimation] The animation options used to pan\n * the overlay into view. This animation is only used when `autoPan` is enabled.\n * A `duration` and `easing` may be provided to customize the animation.\n * Deprecated and ignored if `autoPan` is supplied as an object.\n * @property {number} [autoPanMargin=20] The margin (in pixels) between the\n * overlay and the borders of the map when autopanning. Deprecated and ignored\n * if `autoPan` is supplied as an object.\n * @property {PanIntoViewOptions} [autoPanOptions] The options to use for the\n * autoPan. This is only used when `autoPan` is enabled and has preference over\n * the individual `autoPanMargin` and `autoPanOptions`.\n * @property {string} [className='ol-overlay-container ol-selectable'] CSS class\n * name.\n */\n/**\n * @typedef {Object} PanOptions\n * @property {number} [duration=1000] The duration of the animation in\n * milliseconds.\n * @property {function(number):number} [easing] The easing function to use. Can\n * be one from {@link module:ol/easing} or a custom function.\n * Default is {@link module:ol/easing.inAndOut}.\n */\n/**\n * @typedef {Object} PanIntoViewOptions\n * @property {PanOptions} [animation={}] The animation parameters for the pan\n * @property {number} [margin=20] The margin (in pixels) between the\n * overlay and the borders of the map when panning into view.\n */\n/**\n * @enum {string}\n * @protected\n */\nvar Property = {\n    ELEMENT: 'element',\n    MAP: 'map',\n    OFFSET: 'offset',\n    POSITION: 'position',\n    POSITIONING: 'positioning',\n};\n/**\n * @typedef {import(\"./ObjectEventType\").Types|'change:element'|'change:map'|'change:offset'|'change:position'|\n *   'change:positioning'} OverlayObjectEventTypes\n */\n/***\n * @template Return\n * @typedef {import(\"./Observable\").OnSignature<import(\"./Observable\").EventTypes, import(\"./events/Event.js\").default, Return> &\n *   import(\"./Observable\").OnSignature<OverlayObjectEventTypes, import(\"./Object\").ObjectEvent, Return> &\n *   import(\"./Observable\").CombinedOnSignature<import(\"./Observable\").EventTypes|OverlayObjectEventTypes, Return>} OverlayOnSignature\n */\n/**\n * @classdesc\n * An element to be displayed over the map and attached to a single map\n * location.  Like {@link module:ol/control/Control~Control}, Overlays are\n * visible widgets. Unlike Controls, they are not in a fixed position on the\n * screen, but are tied to a geographical coordinate, so panning the map will\n * move an Overlay but not a Control.\n *\n * Example:\n *\n *     import Overlay from 'ol/Overlay';\n *\n *     var popup = new Overlay({\n *       element: document.getElementById('popup')\n *     });\n *     popup.setPosition(coordinate);\n *     map.addOverlay(popup);\n *\n * @api\n */\nvar Overlay = /** @class */ (function (_super) {\n    __extends(Overlay, _super);\n    /**\n     * @param {Options} options Overlay options.\n     */\n    function Overlay(options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {OverlayOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {OverlayOnSignature<import(\"./events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {OverlayOnSignature<void>}\n         */\n        _this.un;\n        /**\n         * @protected\n         * @type {Options}\n         */\n        _this.options = options;\n        /**\n         * @protected\n         * @type {number|string|undefined}\n         */\n        _this.id = options.id;\n        /**\n         * @protected\n         * @type {boolean}\n         */\n        _this.insertFirst =\n            options.insertFirst !== undefined ? options.insertFirst : true;\n        /**\n         * @protected\n         * @type {boolean}\n         */\n        _this.stopEvent = options.stopEvent !== undefined ? options.stopEvent : true;\n        /**\n         * @protected\n         * @type {HTMLElement}\n         */\n        _this.element = document.createElement('div');\n        _this.element.className =\n            options.className !== undefined\n                ? options.className\n                : 'ol-overlay-container ' + CLASS_SELECTABLE;\n        _this.element.style.position = 'absolute';\n        _this.element.style.pointerEvents = 'auto';\n        var autoPan = options.autoPan;\n        if (autoPan && 'object' !== typeof autoPan) {\n            autoPan = {\n                animation: options.autoPanAnimation,\n                margin: options.autoPanMargin,\n            };\n        }\n        /**\n         * @protected\n         * @type {PanIntoViewOptions|false}\n         */\n        _this.autoPan = /** @type {PanIntoViewOptions} */ (autoPan) || false;\n        /**\n         * @protected\n         * @type {{transform_: string,\n         *         visible: boolean}}\n         */\n        _this.rendered = {\n            transform_: '',\n            visible: true,\n        };\n        /**\n         * @protected\n         * @type {?import(\"./events.js\").EventsKey}\n         */\n        _this.mapPostrenderListenerKey = null;\n        _this.addChangeListener(Property.ELEMENT, _this.handleElementChanged);\n        _this.addChangeListener(Property.MAP, _this.handleMapChanged);\n        _this.addChangeListener(Property.OFFSET, _this.handleOffsetChanged);\n        _this.addChangeListener(Property.POSITION, _this.handlePositionChanged);\n        _this.addChangeListener(Property.POSITIONING, _this.handlePositioningChanged);\n        if (options.element !== undefined) {\n            _this.setElement(options.element);\n        }\n        _this.setOffset(options.offset !== undefined ? options.offset : [0, 0]);\n        _this.setPositioning(options.positioning !== undefined\n            ? /** @type {import(\"./OverlayPositioning.js\").default} */ (options.positioning)\n            : OverlayPositioning.TOP_LEFT);\n        if (options.position !== undefined) {\n            _this.setPosition(options.position);\n        }\n        return _this;\n    }\n    /**\n     * Get the DOM element of this overlay.\n     * @return {HTMLElement|undefined} The Element containing the overlay.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.getElement = function () {\n        return /** @type {HTMLElement|undefined} */ (this.get(Property.ELEMENT));\n    };\n    /**\n     * Get the overlay identifier which is set on constructor.\n     * @return {number|string|undefined} Id.\n     * @api\n     */\n    Overlay.prototype.getId = function () {\n        return this.id;\n    };\n    /**\n     * Get the map associated with this overlay.\n     * @return {import(\"./PluggableMap.js\").default|undefined} The map that the\n     * overlay is part of.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.getMap = function () {\n        return /** @type {import(\"./PluggableMap.js\").default|undefined} */ (this.get(Property.MAP));\n    };\n    /**\n     * Get the offset of this overlay.\n     * @return {Array<number>} The offset.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.getOffset = function () {\n        return /** @type {Array<number>} */ (this.get(Property.OFFSET));\n    };\n    /**\n     * Get the current position of this overlay.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} The spatial point that the overlay is\n     *     anchored at.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.getPosition = function () {\n        return /** @type {import(\"./coordinate.js\").Coordinate|undefined} */ (this.get(Property.POSITION));\n    };\n    /**\n     * Get the current positioning of this overlay.\n     * @return {import(\"./OverlayPositioning.js\").default} How the overlay is positioned\n     *     relative to its point on the map.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.getPositioning = function () {\n        return /** @type {import(\"./OverlayPositioning.js\").default} */ (this.get(Property.POSITIONING));\n    };\n    /**\n     * @protected\n     */\n    Overlay.prototype.handleElementChanged = function () {\n        removeChildren(this.element);\n        var element = this.getElement();\n        if (element) {\n            this.element.appendChild(element);\n        }\n    };\n    /**\n     * @protected\n     */\n    Overlay.prototype.handleMapChanged = function () {\n        if (this.mapPostrenderListenerKey) {\n            removeNode(this.element);\n            unlistenByKey(this.mapPostrenderListenerKey);\n            this.mapPostrenderListenerKey = null;\n        }\n        var map = this.getMap();\n        if (map) {\n            this.mapPostrenderListenerKey = listen(map, MapEventType.POSTRENDER, this.render, this);\n            this.updatePixelPosition();\n            var container = this.stopEvent\n                ? map.getOverlayContainerStopEvent()\n                : map.getOverlayContainer();\n            if (this.insertFirst) {\n                container.insertBefore(this.element, container.childNodes[0] || null);\n            }\n            else {\n                container.appendChild(this.element);\n            }\n            this.performAutoPan();\n        }\n    };\n    /**\n     * @protected\n     */\n    Overlay.prototype.render = function () {\n        this.updatePixelPosition();\n    };\n    /**\n     * @protected\n     */\n    Overlay.prototype.handleOffsetChanged = function () {\n        this.updatePixelPosition();\n    };\n    /**\n     * @protected\n     */\n    Overlay.prototype.handlePositionChanged = function () {\n        this.updatePixelPosition();\n        this.performAutoPan();\n    };\n    /**\n     * @protected\n     */\n    Overlay.prototype.handlePositioningChanged = function () {\n        this.updatePixelPosition();\n    };\n    /**\n     * Set the DOM element to be associated with this overlay.\n     * @param {HTMLElement|undefined} element The Element containing the overlay.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.setElement = function (element) {\n        this.set(Property.ELEMENT, element);\n    };\n    /**\n     * Set the map to be associated with this overlay.\n     * @param {import(\"./PluggableMap.js\").default|undefined} map The map that the\n     * overlay is part of.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.setMap = function (map) {\n        this.set(Property.MAP, map);\n    };\n    /**\n     * Set the offset for this overlay.\n     * @param {Array<number>} offset Offset.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.setOffset = function (offset) {\n        this.set(Property.OFFSET, offset);\n    };\n    /**\n     * Set the position for this overlay. If the position is `undefined` the\n     * overlay is hidden.\n     * @param {import(\"./coordinate.js\").Coordinate|undefined} position The spatial point that the overlay\n     *     is anchored at.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.setPosition = function (position) {\n        this.set(Property.POSITION, position);\n    };\n    /**\n     * Pan the map so that the overlay is entirely visible in the current viewport\n     * (if necessary) using the configured autoPan parameters\n     * @protected\n     */\n    Overlay.prototype.performAutoPan = function () {\n        if (this.autoPan) {\n            this.panIntoView(this.autoPan);\n        }\n    };\n    /**\n     * Pan the map so that the overlay is entirely visible in the current viewport\n     * (if necessary).\n     * @param {PanIntoViewOptions} [opt_panIntoViewOptions] Options for the pan action\n     * @api\n     */\n    Overlay.prototype.panIntoView = function (opt_panIntoViewOptions) {\n        var map = this.getMap();\n        if (!map || !map.getTargetElement() || !this.get(Property.POSITION)) {\n            return;\n        }\n        var mapRect = this.getRect(map.getTargetElement(), map.getSize());\n        var element = this.getElement();\n        var overlayRect = this.getRect(element, [\n            outerWidth(element),\n            outerHeight(element),\n        ]);\n        var panIntoViewOptions = opt_panIntoViewOptions || {};\n        var myMargin = panIntoViewOptions.margin === undefined ? 20 : panIntoViewOptions.margin;\n        if (!containsExtent(mapRect, overlayRect)) {\n            // the overlay is not completely inside the viewport, so pan the map\n            var offsetLeft = overlayRect[0] - mapRect[0];\n            var offsetRight = mapRect[2] - overlayRect[2];\n            var offsetTop = overlayRect[1] - mapRect[1];\n            var offsetBottom = mapRect[3] - overlayRect[3];\n            var delta = [0, 0];\n            if (offsetLeft < 0) {\n                // move map to the left\n                delta[0] = offsetLeft - myMargin;\n            }\n            else if (offsetRight < 0) {\n                // move map to the right\n                delta[0] = Math.abs(offsetRight) + myMargin;\n            }\n            if (offsetTop < 0) {\n                // move map up\n                delta[1] = offsetTop - myMargin;\n            }\n            else if (offsetBottom < 0) {\n                // move map down\n                delta[1] = Math.abs(offsetBottom) + myMargin;\n            }\n            if (delta[0] !== 0 || delta[1] !== 0) {\n                var center = /** @type {import(\"./coordinate.js\").Coordinate} */ (map.getView().getCenterInternal());\n                var centerPx = map.getPixelFromCoordinateInternal(center);\n                if (!centerPx) {\n                    return;\n                }\n                var newCenterPx = [centerPx[0] + delta[0], centerPx[1] + delta[1]];\n                var panOptions = panIntoViewOptions.animation || {};\n                map.getView().animateInternal({\n                    center: map.getCoordinateFromPixelInternal(newCenterPx),\n                    duration: panOptions.duration,\n                    easing: panOptions.easing,\n                });\n            }\n        }\n    };\n    /**\n     * Get the extent of an element relative to the document\n     * @param {HTMLElement} element The element.\n     * @param {import(\"./size.js\").Size} size The size of the element.\n     * @return {import(\"./extent.js\").Extent} The extent.\n     * @protected\n     */\n    Overlay.prototype.getRect = function (element, size) {\n        var box = element.getBoundingClientRect();\n        var offsetX = box.left + window.pageXOffset;\n        var offsetY = box.top + window.pageYOffset;\n        return [offsetX, offsetY, offsetX + size[0], offsetY + size[1]];\n    };\n    /**\n     * Set the positioning for this overlay.\n     * @param {import(\"./OverlayPositioning.js\").default} positioning how the overlay is\n     *     positioned relative to its point on the map.\n     * @observable\n     * @api\n     */\n    Overlay.prototype.setPositioning = function (positioning) {\n        this.set(Property.POSITIONING, positioning);\n    };\n    /**\n     * Modify the visibility of the element.\n     * @param {boolean} visible Element visibility.\n     * @protected\n     */\n    Overlay.prototype.setVisible = function (visible) {\n        if (this.rendered.visible !== visible) {\n            this.element.style.display = visible ? '' : 'none';\n            this.rendered.visible = visible;\n        }\n    };\n    /**\n     * Update pixel position.\n     * @protected\n     */\n    Overlay.prototype.updatePixelPosition = function () {\n        var map = this.getMap();\n        var position = this.getPosition();\n        if (!map || !map.isRendered() || !position) {\n            this.setVisible(false);\n            return;\n        }\n        var pixel = map.getPixelFromCoordinate(position);\n        var mapSize = map.getSize();\n        this.updateRenderedPosition(pixel, mapSize);\n    };\n    /**\n     * @param {import(\"./pixel.js\").Pixel} pixel The pixel location.\n     * @param {import(\"./size.js\").Size|undefined} mapSize The map size.\n     * @protected\n     */\n    Overlay.prototype.updateRenderedPosition = function (pixel, mapSize) {\n        var style = this.element.style;\n        var offset = this.getOffset();\n        var positioning = this.getPositioning();\n        this.setVisible(true);\n        var x = Math.round(pixel[0] + offset[0]) + 'px';\n        var y = Math.round(pixel[1] + offset[1]) + 'px';\n        var posX = '0%';\n        var posY = '0%';\n        if (positioning == OverlayPositioning.BOTTOM_RIGHT ||\n            positioning == OverlayPositioning.CENTER_RIGHT ||\n            positioning == OverlayPositioning.TOP_RIGHT) {\n            posX = '-100%';\n        }\n        else if (positioning == OverlayPositioning.BOTTOM_CENTER ||\n            positioning == OverlayPositioning.CENTER_CENTER ||\n            positioning == OverlayPositioning.TOP_CENTER) {\n            posX = '-50%';\n        }\n        if (positioning == OverlayPositioning.BOTTOM_LEFT ||\n            positioning == OverlayPositioning.BOTTOM_CENTER ||\n            positioning == OverlayPositioning.BOTTOM_RIGHT) {\n            posY = '-100%';\n        }\n        else if (positioning == OverlayPositioning.CENTER_LEFT ||\n            positioning == OverlayPositioning.CENTER_CENTER ||\n            positioning == OverlayPositioning.CENTER_RIGHT) {\n            posY = '-50%';\n        }\n        var transform = \"translate(\" + posX + \", \" + posY + \") translate(\" + x + \", \" + y + \")\";\n        if (this.rendered.transform_ != transform) {\n            this.rendered.transform_ = transform;\n            style.transform = transform;\n            // @ts-ignore IE9\n            style.msTransform = transform;\n        }\n    };\n    /**\n     * returns the options this Overlay has been created with\n     * @return {Options} overlay options\n     */\n    Overlay.prototype.getOptions = function () {\n        return this.options;\n    };\n    return Overlay;\n}(BaseObject));\nexport default Overlay;\n//# sourceMappingURL=Overlay.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/interaction/Select\n */\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport Event from '../events/Event.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport Interaction from './Interaction.js';\nimport { TRUE } from '../functions.js';\nimport { clear } from '../obj.js';\nimport { createEditingStyle } from '../style/Style.js';\nimport { extend, includes } from '../array.js';\nimport { getUid } from '../util.js';\nimport { never, shiftKeyOnly, singleClick } from '../events/condition.js';\n/**\n * @enum {string}\n */\nvar SelectEventType = {\n    /**\n     * Triggered when feature(s) has been (de)selected.\n     * @event SelectEvent#select\n     * @api\n     */\n    SELECT: 'select',\n};\n/**\n * A function that takes an {@link module:ol/Feature} or\n * {@link module:ol/render/Feature} and an\n * {@link module:ol/layer/Layer} and returns `true` if the feature may be\n * selected or `false` otherwise.\n * @typedef {function(import(\"../Feature.js\").FeatureLike, import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>):boolean} FilterFunction\n */\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [addCondition] A function\n * that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * By default, this is {@link module:ol/events/condition.never}. Use this if you\n * want to use different events for add and remove instead of `toggle`.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. This is the event\n * for the selected features as a whole. By default, this is\n * {@link module:ol/events/condition.singleClick}. Clicking on a feature selects that\n * feature and removes any that were in the selection. Clicking outside any\n * feature removes all from the selection.\n * See `toggle`, `add`, `remove` options for adding/removing extra features to/\n * from the selection.\n * @property {Array<import(\"../layer/Layer.js\").default>|function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean} [layers]\n * A list of layers from which features should be selected. Alternatively, a\n * filter function can be provided. The function will be called for each layer\n * in the map and should return `true` for layers that you want to be\n * selectable. If the option is absent, all visible layers will be considered\n * selectable.\n * @property {import(\"../style/Style.js\").StyleLike|null} [style]\n * Style for the selected features. By default the default edit style is used\n * (see {@link module:ol/style}). Set to `null` if this interaction should not apply\n * any style changes for selected features.\n * If set to a falsey value, the selected feature's style will not change.\n * @property {import(\"../events/condition.js\").Condition} [removeCondition] A function\n * that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * By default, this is {@link module:ol/events/condition.never}. Use this if you\n * want to use different events for add and remove instead of `toggle`.\n * @property {import(\"../events/condition.js\").Condition} [toggleCondition] A function\n * that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. This is in addition\n * to the `condition` event. By default,\n * {@link module:ol/events/condition.shiftKeyOnly}, i.e. pressing `shift` as\n * well as the `condition` event, adds that feature to the current selection if\n * it is not currently selected, and removes it if it is. See `add` and `remove`\n * if you want to use different events instead of a toggle.\n * @property {boolean} [multi=false] A boolean that determines if the default\n * behaviour should select only single features or all (overlapping) features at\n * the clicked map position. The default of `false` means single select.\n * @property {import(\"../Collection.js\").default<import(\"../Feature.js\").default>} [features]\n * Collection where the interaction will place selected features. Optional. If\n * not set the interaction will create a collection. In any case the collection\n * used by the interaction is returned by\n * {@link module:ol/interaction/Select~Select#getFeatures}.\n * @property {FilterFunction} [filter] A function\n * that takes an {@link module:ol/Feature} and an\n * {@link module:ol/layer/Layer} and returns `true` if the feature may be\n * selected or `false` otherwise.\n * @property {number} [hitTolerance=0] Hit-detection tolerance. Pixels inside\n * the radius around the given position will be checked for features.\n */\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/Select~Select} instances are instances of\n * this type.\n */\nvar SelectEvent = /** @class */ (function (_super) {\n    __extends(SelectEvent, _super);\n    /**\n     * @param {SelectEventType} type The event type.\n     * @param {Array<import(\"../Feature.js\").default>} selected Selected features.\n     * @param {Array<import(\"../Feature.js\").default>} deselected Deselected features.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Associated\n     *     {@link module:ol/MapBrowserEvent}.\n     */\n    function SelectEvent(type, selected, deselected, mapBrowserEvent) {\n        var _this = _super.call(this, type) || this;\n        /**\n         * Selected features array.\n         * @type {Array<import(\"../Feature.js\").default>}\n         * @api\n         */\n        _this.selected = selected;\n        /**\n         * Deselected features array.\n         * @type {Array<import(\"../Feature.js\").default>}\n         * @api\n         */\n        _this.deselected = deselected;\n        /**\n         * Associated {@link module:ol/MapBrowserEvent}.\n         * @type {import(\"../MapBrowserEvent.js\").default}\n         * @api\n         */\n        _this.mapBrowserEvent = mapBrowserEvent;\n        return _this;\n    }\n    return SelectEvent;\n}(Event));\nexport { SelectEvent };\n/**\n * Original feature styles to reset to when features are no longer selected.\n * @type {Object<number, import(\"../style/Style.js\").default|Array<import(\"../style/Style.js\").default>|import(\"../style/Style.js\").StyleFunction>}\n */\nvar originalFeatureStyles = {};\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:active', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<'select', SelectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     'change:active'|'select', Return>} SelectOnSignature\n */\n/**\n * @classdesc\n * Interaction for selecting vector features. By default, selected features are\n * styled differently, so this interaction can be used for visual highlighting,\n * as well as selecting features for other actions, such as modification or\n * output. There are three ways of controlling which features are selected:\n * using the browser event as defined by the `condition` and optionally the\n * `toggle`, `add`/`remove`, and `multi` options; a `layers` filter; and a\n * further feature filter using the `filter` option.\n *\n * @fires SelectEvent\n * @api\n */\nvar Select = /** @class */ (function (_super) {\n    __extends(Select, _super);\n    /**\n     * @param {Options} [opt_options] Options.\n     */\n    function Select(opt_options) {\n        var _this = _super.call(this) || this;\n        /***\n         * @type {SelectOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.on;\n        /***\n         * @type {SelectOnSignature<import(\"../events\").EventsKey>}\n         */\n        _this.once;\n        /***\n         * @type {SelectOnSignature<void>}\n         */\n        _this.un;\n        var options = opt_options ? opt_options : {};\n        /**\n         * @private\n         */\n        _this.boundAddFeature_ = _this.addFeature_.bind(_this);\n        /**\n         * @private\n         */\n        _this.boundRemoveFeature_ = _this.removeFeature_.bind(_this);\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.condition_ = options.condition ? options.condition : singleClick;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.addCondition_ = options.addCondition ? options.addCondition : never;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.removeCondition_ = options.removeCondition\n            ? options.removeCondition\n            : never;\n        /**\n         * @private\n         * @type {import(\"../events/condition.js\").Condition}\n         */\n        _this.toggleCondition_ = options.toggleCondition\n            ? options.toggleCondition\n            : shiftKeyOnly;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.multi_ = options.multi ? options.multi : false;\n        /**\n         * @private\n         * @type {FilterFunction}\n         */\n        _this.filter_ = options.filter ? options.filter : TRUE;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.hitTolerance_ = options.hitTolerance ? options.hitTolerance : 0;\n        /**\n         * @private\n         * @type {import(\"../style/Style.js\").default|Array<import(\"../style/Style.js\").default>|import(\"../style/Style.js\").StyleFunction|null}\n         */\n        _this.style_ =\n            options.style !== undefined ? options.style : getDefaultStyleFunction();\n        /**\n         * @private\n         * @type {import(\"../Collection.js\").default}\n         */\n        _this.features_ = options.features || new Collection();\n        /** @type {function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean} */\n        var layerFilter;\n        if (options.layers) {\n            if (typeof options.layers === 'function') {\n                layerFilter = options.layers;\n            }\n            else {\n                var layers_1 = options.layers;\n                layerFilter = function (layer) {\n                    return includes(layers_1, layer);\n                };\n            }\n        }\n        else {\n            layerFilter = TRUE;\n        }\n        /**\n         * @private\n         * @type {function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean}\n         */\n        _this.layerFilter_ = layerFilter;\n        /**\n         * An association between selected feature (key)\n         * and layer (value)\n         * @private\n         * @type {Object<string, import(\"../layer/Layer.js\").default>}\n         */\n        _this.featureLayerAssociation_ = {};\n        return _this;\n    }\n    /**\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     * @param {import(\"../layer/Layer.js\").default} layer Layer.\n     * @private\n     */\n    Select.prototype.addFeatureLayerAssociation_ = function (feature, layer) {\n        this.featureLayerAssociation_[getUid(feature)] = layer;\n    };\n    /**\n     * Get the selected features.\n     * @return {import(\"../Collection.js\").default<import(\"../Feature.js\").default>} Features collection.\n     * @api\n     */\n    Select.prototype.getFeatures = function () {\n        return this.features_;\n    };\n    /**\n     * Returns the Hit-detection tolerance.\n     * @return {number} Hit tolerance in pixels.\n     * @api\n     */\n    Select.prototype.getHitTolerance = function () {\n        return this.hitTolerance_;\n    };\n    /**\n     * Returns the associated {@link module:ol/layer/Vector~Vector vectorlayer} of\n     * the (last) selected feature. Note that this will not work with any\n     * programmatic method like pushing features to\n     * {@link module:ol/interaction/Select~Select#getFeatures collection}.\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature\n     * @return {import('../layer/Vector.js').default} Layer.\n     * @api\n     */\n    Select.prototype.getLayer = function (feature) {\n        return /** @type {import('../layer/Vector.js').default} */ (this.featureLayerAssociation_[getUid(feature)]);\n    };\n    /**\n     * Hit-detection tolerance. Pixels inside the radius around the given position\n     * will be checked for features.\n     * @param {number} hitTolerance Hit tolerance in pixels.\n     * @api\n     */\n    Select.prototype.setHitTolerance = function (hitTolerance) {\n        this.hitTolerance_ = hitTolerance;\n    };\n    /**\n     * Remove the interaction from its current map, if any,  and attach it to a new\n     * map, if any. Pass `null` to just remove the interaction from the current map.\n     * @param {import(\"../PluggableMap.js\").default} map Map.\n     * @api\n     */\n    Select.prototype.setMap = function (map) {\n        var currentMap = this.getMap();\n        if (currentMap && this.style_) {\n            this.features_.forEach(this.restorePreviousStyle_.bind(this));\n        }\n        _super.prototype.setMap.call(this, map);\n        if (map) {\n            this.features_.addEventListener(CollectionEventType.ADD, this.boundAddFeature_);\n            this.features_.addEventListener(CollectionEventType.REMOVE, this.boundRemoveFeature_);\n            if (this.style_) {\n                this.features_.forEach(this.applySelectedStyle_.bind(this));\n            }\n        }\n        else {\n            this.features_.removeEventListener(CollectionEventType.ADD, this.boundAddFeature_);\n            this.features_.removeEventListener(CollectionEventType.REMOVE, this.boundRemoveFeature_);\n        }\n    };\n    /**\n     * @param {import(\"../Collection.js\").CollectionEvent} evt Event.\n     * @private\n     */\n    Select.prototype.addFeature_ = function (evt) {\n        var feature = evt.element;\n        if (this.style_) {\n            this.applySelectedStyle_(feature);\n        }\n    };\n    /**\n     * @param {import(\"../Collection.js\").CollectionEvent} evt Event.\n     * @private\n     */\n    Select.prototype.removeFeature_ = function (evt) {\n        var feature = evt.element;\n        if (this.style_) {\n            this.restorePreviousStyle_(feature);\n        }\n    };\n    /**\n     * @return {import(\"../style/Style.js\").StyleLike|null} Select style.\n     */\n    Select.prototype.getStyle = function () {\n        return this.style_;\n    };\n    /**\n     * @param {import(\"../Feature.js\").default} feature Feature\n     * @private\n     */\n    Select.prototype.applySelectedStyle_ = function (feature) {\n        var key = getUid(feature);\n        if (!(key in originalFeatureStyles)) {\n            originalFeatureStyles[key] = feature.getStyle();\n        }\n        feature.setStyle(this.style_);\n    };\n    /**\n     * @param {import(\"../Feature.js\").default} feature Feature\n     * @private\n     */\n    Select.prototype.restorePreviousStyle_ = function (feature) {\n        var interactions = this.getMap().getInteractions().getArray();\n        for (var i = interactions.length - 1; i >= 0; --i) {\n            var interaction = interactions[i];\n            if (interaction !== this &&\n                interaction instanceof Select &&\n                interaction.getStyle() &&\n                interaction.getFeatures().getArray().lastIndexOf(feature) !== -1) {\n                feature.setStyle(interaction.getStyle());\n                return;\n            }\n        }\n        var key = getUid(feature);\n        feature.setStyle(originalFeatureStyles[key]);\n        delete originalFeatureStyles[key];\n    };\n    /**\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     * @private\n     */\n    Select.prototype.removeFeatureLayerAssociation_ = function (feature) {\n        delete this.featureLayerAssociation_[getUid(feature)];\n    };\n    /**\n     * Handles the {@link module:ol/MapBrowserEvent map browser event} and may change the\n     * selected state of features.\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n     * @return {boolean} `false` to stop event propagation.\n     * @this {Select}\n     */\n    Select.prototype.handleEvent = function (mapBrowserEvent) {\n        if (!this.condition_(mapBrowserEvent)) {\n            return true;\n        }\n        var add = this.addCondition_(mapBrowserEvent);\n        var remove = this.removeCondition_(mapBrowserEvent);\n        var toggle = this.toggleCondition_(mapBrowserEvent);\n        var set = !add && !remove && !toggle;\n        var map = mapBrowserEvent.map;\n        var features = this.getFeatures();\n        var deselected = [];\n        var selected = [];\n        if (set) {\n            // Replace the currently selected feature(s) with the feature(s) at the\n            // pixel, or clear the selected feature(s) if there is no feature at\n            // the pixel.\n            clear(this.featureLayerAssociation_);\n            map.forEachFeatureAtPixel(mapBrowserEvent.pixel, \n            /**\n             * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n             * @param {import(\"../layer/Layer.js\").default} layer Layer.\n             * @return {boolean|undefined} Continue to iterate over the features.\n             */\n            function (feature, layer) {\n                if (this.filter_(feature, layer)) {\n                    selected.push(feature);\n                    this.addFeatureLayerAssociation_(feature, layer);\n                    return !this.multi_;\n                }\n            }.bind(this), {\n                layerFilter: this.layerFilter_,\n                hitTolerance: this.hitTolerance_,\n            });\n            for (var i = features.getLength() - 1; i >= 0; --i) {\n                var feature = features.item(i);\n                var index = selected.indexOf(feature);\n                if (index > -1) {\n                    // feature is already selected\n                    selected.splice(index, 1);\n                }\n                else {\n                    features.remove(feature);\n                    deselected.push(feature);\n                }\n            }\n            if (selected.length !== 0) {\n                features.extend(selected);\n            }\n        }\n        else {\n            // Modify the currently selected feature(s).\n            map.forEachFeatureAtPixel(mapBrowserEvent.pixel, \n            /**\n             * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n             * @param {import(\"../layer/Layer.js\").default} layer Layer.\n             * @return {boolean|undefined} Continue to iterate over the features.\n             */\n            function (feature, layer) {\n                if (this.filter_(feature, layer)) {\n                    if ((add || toggle) && !includes(features.getArray(), feature)) {\n                        selected.push(feature);\n                        this.addFeatureLayerAssociation_(feature, layer);\n                    }\n                    else if ((remove || toggle) &&\n                        includes(features.getArray(), feature)) {\n                        deselected.push(feature);\n                        this.removeFeatureLayerAssociation_(feature);\n                    }\n                    return !this.multi_;\n                }\n            }.bind(this), {\n                layerFilter: this.layerFilter_,\n                hitTolerance: this.hitTolerance_,\n            });\n            for (var j = deselected.length - 1; j >= 0; --j) {\n                features.remove(deselected[j]);\n            }\n            features.extend(selected);\n        }\n        if (selected.length > 0 || deselected.length > 0) {\n            this.dispatchEvent(new SelectEvent(SelectEventType.SELECT, selected, deselected, mapBrowserEvent));\n        }\n        return true;\n    };\n    return Select;\n}(Interaction));\n/**\n * @return {import(\"../style/Style.js\").StyleFunction} Styles.\n */\nfunction getDefaultStyleFunction() {\n    var styles = createEditingStyle();\n    extend(styles[GeometryType.POLYGON], styles[GeometryType.LINE_STRING]);\n    extend(styles[GeometryType.GEOMETRY_COLLECTION], styles[GeometryType.LINE_STRING]);\n    return function (feature) {\n        if (!feature.getGeometry()) {\n            return null;\n        }\n        return styles[feature.getGeometry().getType()];\n    };\n}\nexport default Select;\n//# sourceMappingURL=Select.js.map","/** Vanilla JS geographic inputs\r\n * color, size, width, font, symboles, dash, arrow, pattern\r\n */\r\nimport ol_ext_inherits from '../ext'\r\nimport ol_Object from 'ol/Object'\r\n\r\n/** @namespace  ol.ext.input\r\n */\r\n/*global ol*/\r\nif (window.ol) {\r\n  ol.ext.input = {};\r\n}\r\n\r\n/** Abstract base class; normally only used for creating subclasses and not instantiated in apps.    \r\n * @constructor\r\n * @extends {ol_Object}\r\n * @param {*} options\r\n *  @param {Element} [options.input] input element, if non create one\r\n *  @param {string} [options.type] input type, if no input\r\n *  @param {number} [options.min] input min, if no input\r\n *  @param {number} [options.max] input max, if no input\r\n *  @param {number} [options.step] input step, if no input\r\n *  @param {string|number} [options.val] input value\r\n *  @param {boolean} [options.checked] check input\r\n *  @param {boolean} [options.hidden] the input is display:none\r\n *  @param {boolean} [options.disabled] disable input\r\n *  @param {Element} [options.parent] parent element, if no input\r\n */\r\nvar ol_ext_input_Base = function(options) {\r\n  options = options || {};\r\n  \r\n  ol_Object.call(this);\r\n  \r\n  var input = this.input = options.input;\r\n  if (!input) {\r\n    input = this.input = document.createElement('INPUT');\r\n    if (options.type) input.setAttribute('type', options.type);\r\n    if (options.min !== undefined) input.setAttribute('min', options.min);\r\n    if (options.max !== undefined) input.setAttribute('max', options.max);\r\n    if (options.step !== undefined) input.setAttribute('step', options.step);\r\n    if (options.parent) options.parent.appendChild(input);\r\n  } \r\n  if (options.disabled) input.disabled = true;\r\n  if (options.checked !== undefined) input.checked = !!options.checked;\r\n  if (options.val !== undefined) input.value = options.val;\r\n  if (options.hidden) input.style.display = 'none';\r\n};\r\nol_ext_inherits(ol_ext_input_Base, ol_Object);\r\n\r\n/** Listen to drag event\r\n * @param {Element} elt \r\n * @param {function} cback when draggin on the element\r\n * @private\r\n */\r\nol_ext_input_Base.prototype._listenDrag = function(elt, cback) {\r\n  var handle = function(e) {\r\n    this.moving = true;\r\n    var listen = function(e) {\r\n      if (e.type==='pointerup') {\r\n        document.removeEventListener('pointermove', listen);\r\n        document.removeEventListener('pointerup', listen);\r\n        document.removeEventListener('pointercancel', listen);\r\n        setTimeout(function() {\r\n          this.moving = false;\r\n        }.bind(this));\r\n      }\r\n      if (e.target === elt) cback(e);\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n    }.bind(this);\r\n    document.addEventListener('pointermove', listen, false);\r\n    document.addEventListener('pointerup', listen, false);\r\n    document.addEventListener('pointercancel', listen, false);\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }.bind(this)\r\n  elt.addEventListener('mousedown', handle, false);\r\n  elt.addEventListener('touchstart', handle, false);\r\n};\r\n\r\n/** Set the current value\r\n */\r\n ol_ext_input_Base.prototype.setValue = function(v) {\r\n  if (v !== undefined) this.input.value = v;\r\n  this.input.dispatchEvent(new Event('change'));\r\n};\r\n\r\n/** Get the current getValue\r\n * @returns {string}\r\n */\r\nol_ext_input_Base.prototype.getValue = function() {\r\n  return this.input.value;\r\n};\r\n\r\n/** Get the input element\r\n * @returns {Element}\r\n */\r\nol_ext_input_Base.prototype.getInputElement = function() {\r\n  return this.input;\r\n};\r\n\r\nexport default ol_ext_input_Base\r\n","import ol_ext_inherits from '../ext'\r\nimport ol_ext_input_Base from './Base'\r\n\r\n/** Checkbox input\r\n * @constructor\r\n * @extends {ol_ext_input_Base}\r\n * @fires check\r\n * @param {*} options\r\n *  @param {string} [options.className]\r\n *  @param {Element|string} [options.html] label content\r\n *  @param {string} [options.after] label garnish (placed after)\r\n *  @param {Element} [options.input] input element, if non create one\r\n *  @param {Element} [options.parent] parent element, if create an input\r\n *  @param {boolean} [options.autoClose=true]\r\n *  @param {boolean} [options.visible=false] display the input\r\n */\r\nvar ol_ext_input_Checkbox = function(options) {\r\n  options = options || {};\r\n\r\n  ol_ext_input_Base.call(this, options);\r\n\r\n  var label = this.element = document.createElement('LABEL');\r\n  if (options.html instanceof Element) label.appendChild(options.html)\r\n  else if (options.html !== undefined) label.innerHTML = options.html;\r\n  label.className = ('ol-ext-check ol-ext-checkbox '  + (options.className || '')).trim();\r\n\r\n  if (this.input.parentNode) this.input.parentNode.insertBefore(label, this.input);\r\n  label.appendChild(this.input);\r\n  label.appendChild(document.createElement('SPAN'));\r\n  if (options.after) {\r\n    label.appendChild(document.createTextNode(options.after));\r\n  }\r\n\r\n  // Handle change\r\n  this.input.addEventListener('change', function() {\r\n    this.dispatchEvent({ type: 'check', checked: this.input.checked, value: this.input.value });\r\n  }.bind(this));\r\n\r\n};\r\nol_ext_inherits(ol_ext_input_Checkbox, ol_ext_input_Base);\r\n  \r\nol_ext_input_Checkbox.prototype.isChecked = function () {\r\n  return this.input.checked;\r\n};\r\n\r\nexport default ol_ext_input_Checkbox\r\n","import ol_ext_inherits from '../ext'\r\nimport ol_ext_input_Checkbox from './Checkbox'\r\n\r\n/** Switch input\r\n * @constructor\r\n * @extends {ol_ext_input_Checkbox}\r\n * @fires check\r\n * @param {*} options\r\n *  @param {string} [options.className]\r\n *  @param {Element} [options.input] input element, if non create one\r\n *  @param {Element} [options.parent] parent element, if create an input\r\n */\r\nvar ol_ext_input_Switch = function(options) {\r\n  options = options || {};\r\n\r\n  ol_ext_input_Checkbox.call(this, options);\r\n\r\n  this.element.className = ('ol-ext-toggle-switch ' + (options.className || '')).trim();\r\n};\r\nol_ext_inherits(ol_ext_input_Switch, ol_ext_input_Checkbox);\r\n  \r\nexport default ol_ext_input_Switch\r\n","import ol_ext_inherits from '../ext'\r\nimport ol_ext_input_Checkbox from './Checkbox'\r\n\r\n/** Switch input\r\n * @constructor\r\n * @extends {ol_ext_input_Checkbox}\r\n * @fires check\r\n * @param {*} options\r\n *  @param {string} [options.className]\r\n *  @param {Element} [options.input] input element, if non create one\r\n *  @param {Element} [options.parent] parent element, if create an input\r\n */\r\nvar ol_ext_input_Radio = function(options) {\r\n  options = options || {};\r\n\r\n  ol_ext_input_Checkbox.call(this, options);\r\n\r\n  this.element.className = ('ol-ext-check ol-ext-radio ' + (options.className || '')).trim();\r\n};\r\nol_ext_inherits(ol_ext_input_Radio, ol_ext_input_Checkbox);\r\n  \r\nexport default ol_ext_input_Radio\r\n","/** Vanilla JS helper to manipulate DOM without jQuery\r\n * @see https://github.com/nefe/You-Dont-Need-jQuery\r\n * @see https://plainjs.com/javascript/\r\n * @see http://youmightnotneedjquery.com/\r\n */\r\nimport ol_ext_input_Checkbox from './input/Checkbox'\r\nimport ol_ext_input_Switch from './input/Switch'\r\nimport ol_ext_input_Radio from './input/Radio'\r\n\r\n/** @namespace ol.ext.element */\r\nvar ol_ext_element = {};\r\n\r\n/**\r\n * Create an element\r\n * @param {string} tagName The element tag, use 'TEXT' to create a text node\r\n * @param {*} options\r\n *  @param {string} options.className className The element class name \r\n *  @param {Element} options.parent Parent to append the element as child\r\n *  @param {Element|string} [options.html] Content of the element (if text is not set)\r\n *  @param {string} [options.text] Text content (if html is not set)\r\n *  @param {Element|string} [options.options] when tagName = SELECT a list of options as key:value to add to the select\r\n *  @param {string} options.* Any other attribut to add to the element\r\n */\r\nol_ext_element.create = function (tagName, options) {\r\n  options = options || {};\r\n  var elt;\r\n  // Create text node\r\n  if (tagName === 'TEXT') {\r\n    elt = document.createTextNode(options.html||'');\r\n    if (options.parent) options.parent.appendChild(elt);\r\n  } else {\r\n    // Other element\r\n    elt = document.createElement(tagName);\r\n    if (/button/i.test(tagName)) elt.setAttribute('type', 'button');\r\n    for (var attr in options) {\r\n      switch (attr) {\r\n        case 'className': {\r\n          if (options.className && options.className.trim) elt.setAttribute('class', options.className.trim());\r\n          break;\r\n        }\r\n        case 'text': {\r\n          elt.innerText = options.text;\r\n          break;\r\n        }\r\n        case 'html': {\r\n          if (options.html instanceof Element) elt.appendChild(options.html)\r\n          else if (options.html!==undefined) elt.innerHTML = options.html;\r\n          break;\r\n        }\r\n        case 'parent': {\r\n          if (options.parent) options.parent.appendChild(elt);\r\n          break;\r\n        }\r\n        case 'options': {\r\n          if (/select/i.test(tagName)) {\r\n            for (var i in options.options) {\r\n              ol_ext_element.create('OPTION', {\r\n                html: i,\r\n                value: options.options[i],\r\n                parent: elt          \r\n              })\r\n            }\r\n          }\r\n          break;\r\n        }\r\n        case 'style': {\r\n          this.setStyle(elt, options.style);\r\n          break;\r\n        }\r\n        case 'change':\r\n        case 'click': {\r\n          ol_ext_element.addListener(elt, attr, options[attr]);\r\n          break;\r\n        }\r\n        case 'on': {\r\n          for (var e in options.on) {\r\n            ol_ext_element.addListener(elt, e, options.on[e]);\r\n          }\r\n          break;\r\n        }\r\n        case 'checked': {\r\n          elt.checked = !!options.checked;\r\n          break;\r\n        }\r\n        default: {\r\n          elt.setAttribute(attr, options[attr]);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return elt;\r\n};\r\n\r\n/** Create a toggle switch input\r\n * @param {*} options\r\n *  @param {string|Element} options.html\r\n *  @param {string|Element} options.after\r\n *  @param {boolean} options.checked\r\n *  @param {*} [options.on] a list of actions\r\n *  @param {function} [options.click]\r\n *  @param {function} [options.change]\r\n *  @param {Element} options.parent\r\n */\r\nol_ext_element.createSwitch = function (options) {\r\n  var input = ol_ext_element.create('INPUT', {\r\n    type: 'checkbox',\r\n    on: options.on,\r\n    click: options.click,\r\n    change: options.change,\r\n    parent: options.parent\r\n  });\r\n  var opt = Object.assign ({ input: input }, options || {});\r\n  new ol_ext_input_Switch(opt);\r\n  return input;\r\n};\r\n\r\n/** Create a toggle switch input\r\n * @param {*} options\r\n *  @param {string|Element} options.html\r\n *  @param {string|Element} options.after\r\n *  @param {string} [options.name] input name\r\n *  @param {string} [options.type=checkbox] input type: radio or checkbox\r\n *  @param {string} options.value input value\r\n *  @param {*} [options.on] a list of actions\r\n *  @param {function} [options.click]\r\n *  @param {function} [options.change]\r\n *  @param {Element} options.parent\r\n */\r\nol_ext_element.createCheck = function (options) {\r\n  var input = ol_ext_element.create('INPUT', {\r\n    name: options.name,\r\n    type: (options.type==='radio' ? 'radio' : 'checkbox'),\r\n    on: options.on,\r\n    parent: options.parent\r\n  });\r\n  console.log(input)\r\n  var opt = Object.assign ({ input: input }, options || {});\r\n  if (options.type === 'radio') {\r\n    new ol_ext_input_Radio(opt);\r\n  } else {\r\n    new ol_ext_input_Checkbox(opt);\r\n  }\r\n  return input;\r\n};\r\n\r\n/** Set inner html or append a child element to an element\r\n * @param {Element} element\r\n * @param {Element|string} html Content of the element\r\n */\r\nol_ext_element.setHTML = function(element, html) {\r\n  if (html instanceof Element) element.appendChild(html)\r\n  else if (html!==undefined) element.innerHTML = html;\r\n};\r\n\r\n/** Append text into an elemnt\r\n * @param {Element} element\r\n * @param {string} text text content\r\n */\r\nol_ext_element.appendText = function(element, text) {\r\n  element.appendChild(document.createTextNode(text||''));\r\n};\r\n\r\n/**\r\n * Add a set of event listener to an element\r\n * @param {Element} element\r\n * @param {string|Array<string>} eventType\r\n * @param {function} fn\r\n */\r\nol_ext_element.addListener = function (element, eventType, fn, useCapture ) {\r\n  if (typeof eventType === 'string') eventType = eventType.split(' ');\r\n  eventType.forEach(function(e) {\r\n    element.addEventListener(e, fn, useCapture);\r\n  });\r\n};\r\n\r\n/**\r\n * Add a set of event listener to an element\r\n * @param {Element} element\r\n * @param {string|Array<string>} eventType\r\n * @param {function} fn\r\n */\r\nol_ext_element.removeListener = function (element, eventType, fn) {\r\n  if (typeof eventType === 'string') eventType = eventType.split(' ');\r\n  eventType.forEach(function(e) {\r\n    element.removeEventListener(e, fn);\r\n  });\r\n};\r\n\r\n/**\r\n * Show an element\r\n * @param {Element} element\r\n */\r\nol_ext_element.show = function (element) {\r\n  element.style.display = '';\r\n};\r\n\r\n/**\r\n * Hide an element\r\n * @param {Element} element\r\n */\r\nol_ext_element.hide = function (element) {\r\n  element.style.display = 'none';\r\n};\r\n\r\n/**\r\n * Test if an element is hihdden\r\n * @param {Element} element\r\n * @return {boolean}\r\n */\r\nol_ext_element.hidden = function (element) {\r\n  return ol_ext_element.getStyle(element, 'display') === 'none';\r\n};\r\n\r\n/**\r\n * Toggle an element\r\n * @param {Element} element\r\n */\r\nol_ext_element.toggle = function (element) {\r\n  element.style.display = (element.style.display==='none' ? '' : 'none');\r\n};\r\n\r\n/** Set style of an element\r\n * @param {DOMElement} el the element\r\n * @param {*} st list of style\r\n */\r\nol_ext_element.setStyle = function(el, st) {\r\n  for (var s in st) {\r\n    switch (s) {\r\n      case 'top':\r\n      case 'left':\r\n      case 'bottom':\r\n      case 'right':\r\n      case 'minWidth':\r\n      case 'maxWidth':\r\n      case 'width':\r\n      case 'height': {\r\n        if (typeof(st[s]) === 'number') {\r\n          el.style[s] = st[s]+'px';\r\n        } else {\r\n          el.style[s] = st[s];\r\n        }\r\n        break;\r\n      }\r\n      default: {\r\n        el.style[s] = st[s];\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Get style propertie of an element\r\n * @param {DOMElement} el the element\r\n * @param {string} styleProp Propertie name\r\n * @return {*} style value\r\n */\r\nol_ext_element.getStyle = function(el, styleProp) {\r\n  var value, defaultView = (el.ownerDocument || document).defaultView;\r\n  // W3C standard way:\r\n  if (defaultView && defaultView.getComputedStyle) {\r\n    // sanitize property name to css notation\r\n    // (hypen separated words eg. font-Size)\r\n    styleProp = styleProp.replace(/([A-Z])/g, \"-$1\").toLowerCase();\r\n    value = defaultView.getComputedStyle(el, null).getPropertyValue(styleProp);\r\n  } else if (el.currentStyle) { // IE\r\n    // sanitize property name to camelCase\r\n    styleProp = styleProp.replace(/-(\\w)/g, function(str, letter) {\r\n      return letter.toUpperCase();\r\n    });\r\n    value = el.currentStyle[styleProp];\r\n    // convert other units to pixels on IE\r\n    if (/^\\d+(em|pt|%|ex)?$/i.test(value)) { \r\n      return (function(value) {\r\n        var oldLeft = el.style.left, oldRsLeft = el.runtimeStyle.left;\r\n        el.runtimeStyle.left = el.currentStyle.left;\r\n        el.style.left = value || 0;\r\n        value = el.style.pixelLeft + \"px\";\r\n        el.style.left = oldLeft;\r\n        el.runtimeStyle.left = oldRsLeft;\r\n        return value;\r\n      })(value);\r\n    }\r\n  }\r\n  if (/px$/.test(value)) return parseInt(value);\r\n  return value;\r\n};\r\n\r\n/** Get outerHeight of an elemen\r\n * @param {DOMElement} elt\r\n * @return {number}\r\n */\r\nol_ext_element.outerHeight = function(elt) {\r\n  return elt.offsetHeight + ol_ext_element.getStyle(elt, 'marginBottom')\r\n};\r\n\r\n/** Get outerWidth of an elemen\r\n * @param {DOMElement} elt\r\n * @return {number}\r\n */\r\nol_ext_element.outerWidth = function(elt) {\r\n  return elt.offsetWidth + ol_ext_element.getStyle(elt, 'marginLeft')\r\n};\r\n\r\n/** Get element offset rect\r\n * @param {DOMElement} elt\r\n * @return {*} \r\n */\r\nol_ext_element.offsetRect = function(elt) {\r\n  var rect = elt.getBoundingClientRect();\r\n  return {\r\n    top: rect.top + (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0),\r\n    left: rect.left + (window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0),\r\n    height: rect.height || (rect.bottom - rect.top),\r\n    width: rect.width || (rect.right - rect.left)\r\n  }\r\n};\r\n\r\n/** Get element offset \r\n * @param {ELement} elt\r\n * @returns {Object} top/left offset\r\n */\r\nol_ext_element.getFixedOffset = function(elt) {\r\n  var offset = {\r\n    left:0,\r\n    top:0\r\n  };\r\n  var getOffset = function(parent) {\r\n    if (!parent) return offset;\r\n    // Check position when transform\r\n    if (ol_ext_element.getStyle(parent, 'position') === 'absolute'\r\n      && ol_ext_element.getStyle(parent, 'transform') !== \"none\") {\r\n      var r = parent.getBoundingClientRect();\r\n      offset.left += r.left; \r\n      offset.top += r.top; \r\n      return offset;\r\n    }\r\n    console.log(parent, offset)\r\n    return getOffset(parent.offsetParent)\r\n  }\r\n  return getOffset(elt.offsetParent)\r\n};\r\n\r\n/** Get element offset rect\r\n * @param {DOMElement} elt\r\n * @param {boolean} fixed get fixed position\r\n * @return {Object} \r\n */\r\nol_ext_element.positionRect = function(elt, fixed) {\r\n  var gleft = 0;\r\n  var gtop = 0;\r\n\r\n  var getRect = function( parent ) {\r\n    if (parent) {\r\n      gleft += parent.offsetLeft;\r\n      gtop += parent.offsetTop;\r\n      return getRect(parent.offsetParent);\r\n    } else {\r\n      var r = {\r\n        top: elt.offsetTop + gtop,\r\n        left: elt.offsetLeft + gleft\r\n      };\r\n      if (fixed) {\r\n        r.top -= (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0);\r\n        r.left -= (window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0);\r\n      }\r\n      r.bottom = r.top + elt.offsetHeight;\r\n      r.right = r.top + elt.offsetWidth;\r\n      return r;\r\n    }\r\n  }; \r\n  return getRect(elt.offsetParent);\r\n}\r\n\r\n/** Make a div scrollable without scrollbar.\r\n * On touch devices the default behavior is preserved\r\n * @param {DOMElement} elt\r\n * @param {*} options\r\n *  @param {function} [options.onmove] a function that takes a boolean indicating that the div is scrolling\r\n *  @param {boolean} [options.vertical=false] \r\n *  @param {boolean} [options.animate=true] add kinetic to scroll\r\n *  @param {boolean} [options.mousewheel=false] enable mousewheel to scroll\r\n *  @param {boolean} [options.minibar=false] add a mini scrollbar to the parent element (only vertical scrolling)\r\n * @returns {Object} an object with a refresh function\r\n */\r\nol_ext_element.scrollDiv = function(elt, options) {\r\n  options = options || {};\r\n  var pos = false;\r\n  var speed = 0;\r\n  var d, dt = 0;\r\n\r\n  var onmove = (typeof(options.onmove) === 'function' ? options.onmove : function(){});\r\n  //var page = options.vertical ? 'pageY' : 'pageX';\r\n  var page = options.vertical ? 'screenY' : 'screenX';\r\n  var scroll = options.vertical ? 'scrollTop' : 'scrollLeft';\r\n  var moving = false;\r\n  // Factor scale content / container\r\n  var scale, isbar;\r\n\r\n  // Update the minibar\r\n  var updateCounter = 0;\r\n  var updateMinibar = function() {\r\n    if (scrollbar) {\r\n      updateCounter++;\r\n      setTimeout(updateMinibarDelay);\r\n    }\r\n  }\r\n  var updateMinibarDelay = function() {\r\n    if (scrollbar) {\r\n      updateCounter--;\r\n      // Prevent multi call\r\n      if (updateCounter) return;\r\n      // Container height\r\n      var pheight = elt.clientHeight;\r\n      // Content height\r\n      var height = elt.scrollHeight;\r\n      // Set scrollbar value\r\n      scale = pheight / height;\r\n      scrollbar.style.height = scale * 100 + '%';\r\n      scrollbar.style.top = (elt.scrollTop / height * 100) + '%';\r\n      scrollContainer.style.height = pheight + 'px';\r\n      // No scroll\r\n      if (pheight > height - .5) scrollContainer.classList.add('ol-100pc');\r\n      else scrollContainer.classList.remove('ol-100pc');\r\n    }\r\n  }\r\n  \r\n  // Handle pointer down\r\n  var onPointerDown = function(e) {\r\n    // Prevent scroll\r\n    if (e.target.classList.contains('ol-noscroll')) return;\r\n    // Start scrolling\r\n    moving = false;\r\n    pos = e[page];\r\n    dt = new Date();\r\n    elt.classList.add('ol-move');\r\n    // Prevent elt dragging\r\n    e.preventDefault();\r\n    // Listen scroll\r\n    window.addEventListener('pointermove', onPointerMove);\r\n    ol_ext_element.addListener(window, ['pointerup','pointercancel'], onPointerUp);\r\n  }\r\n\r\n  // Register scroll\r\n  var onPointerMove = function(e) {\r\n    moving = true;\r\n    if (pos !== false) {\r\n      var delta = (isbar ? -1/scale : 1) * (pos - e[page]);\r\n      elt[scroll] += delta;\r\n      d = new Date();\r\n      if (d-dt) {\r\n        speed = (speed + delta / (d - dt))/2;\r\n      }\r\n      pos = e[page];\r\n      dt = d;\r\n      // Tell we are moving\r\n      if (delta) onmove(true);\r\n    }\r\n  };\r\n  \r\n  // Animate scroll\r\n  var animate = function(to) {\r\n    var step = (to>0) ? Math.min(100, to/2) : Math.max(-100, to/2);\r\n    to -= step;\r\n    elt[scroll] += step;\r\n    if (-1 < to && to < 1) {\r\n      if (moving) setTimeout(function() { elt.classList.remove('ol-move'); });\r\n      else elt.classList.remove('ol-move');\r\n      moving = false;\r\n      onmove(false);\r\n    } else {\r\n      setTimeout(function() {\r\n        animate(to);\r\n      }, 40);\r\n    }\r\n  }\r\n  \r\n  // Initialize scroll container for minibar\r\n  var scrollContainer, scrollbar;\r\n  if (options.vertical && options.minibar) {\r\n    var init = function(b) {\r\n      // only once\r\n      elt.removeEventListener('pointermove', init);\r\n      elt.parentNode.classList.add('ol-miniscroll');\r\n      scrollbar = ol_ext_element.create('DIV');\r\n      scrollContainer = ol_ext_element.create('DIV', {\r\n        className: 'ol-scroll',\r\n        html: scrollbar\r\n      });\r\n      elt.parentNode.insertBefore(scrollContainer, elt);\r\n      // Move scrollbar\r\n      scrollbar.addEventListener('pointerdown', function(e) {\r\n        isbar = true;\r\n        onPointerDown(e)\r\n      });\r\n      // Handle mousewheel\r\n      if (options.mousewheel) {\r\n        ol_ext_element.addListener(scrollContainer, \r\n          ['mousewheel', 'DOMMouseScroll', 'onmousewheel'], \r\n          function(e) { onMouseWheel(e) }\r\n        );\r\n        ol_ext_element.addListener(scrollbar, \r\n          ['mousewheel', 'DOMMouseScroll', 'onmousewheel'], \r\n          function(e) { onMouseWheel(e) }\r\n        );\r\n      }\r\n      // Update on enter\r\n      elt.parentNode.addEventListener('pointerenter', updateMinibar);\r\n      // Update on resize\r\n      window.addEventListener('resize', updateMinibar);\r\n      // Update\r\n      if (b!==false) updateMinibar();\r\n    };\r\n    // Allready inserted in the DOM\r\n    if (elt.parentNode) init(false);\r\n    // or wait when ready\r\n    else elt.addEventListener('pointermove', init);\r\n    // Update on scroll\r\n    elt.addEventListener('scroll', function() {\r\n      updateMinibar();\r\n    });\r\n  }\r\n\r\n  // Enable scroll\r\n  elt.style['touch-action'] = 'none';\r\n  elt.style['overflow'] = 'hidden';\r\n  elt.classList.add('ol-scrolldiv');\r\n  \r\n  // Start scrolling\r\n  ol_ext_element.addListener(elt, ['pointerdown'], function(e) {\r\n    isbar = false;\r\n    onPointerDown(e)\r\n  });\r\n\r\n  // Prevet click when moving...\r\n  elt.addEventListener('click', function(e) {\r\n    if (elt.classList.contains('ol-move')) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    }\r\n  }, true);\r\n\r\n  // Stop scrolling\r\n  var onPointerUp = function(e) {\r\n    dt = new Date() - dt;\r\n    if (dt>100 || isbar) {\r\n      // User stop: no speed\r\n      speed = 0;\r\n    } else if (dt>0) {\r\n      // Calculate new speed\r\n      speed = ((speed||0) + (pos - e[page]) / dt) / 2;\r\n    }\r\n    animate(options.animate===false ? 0 : speed*200);\r\n    pos = false;\r\n    speed = 0;\r\n    dt = 0;\r\n    // Add class to handle click (on iframe / double-click)\r\n    if (!elt.classList.contains('ol-move')) {\r\n      elt.classList.add('ol-hasClick')\r\n      setTimeout(function() { elt.classList.remove('ol-hasClick'); }, 500);\r\n    } else {\r\n      elt.classList.remove('ol-hasClick');\r\n    }\r\n    isbar = false;\r\n    window.removeEventListener('pointermove', onPointerMove)\r\n    ol_ext_element.removeListener(window, ['pointerup','pointercancel'], onPointerUp);\r\n  };\r\n\r\n  // Handle mousewheel\r\n  var onMouseWheel = function(e) {\r\n    var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));\r\n    elt.classList.add('ol-move');\r\n    elt[scroll] -= delta*30;\r\n    elt.classList.remove('ol-move');\r\n    return false;\r\n  }\r\n  if (options.mousewheel) { // && !elt.classList.contains('ol-touch')) {\r\n    ol_ext_element.addListener(elt, \r\n      ['mousewheel', 'DOMMouseScroll', 'onmousewheel'], \r\n      onMouseWheel\r\n    );\r\n  }\r\n\r\n  return { \r\n    refresh: updateMinibar\r\n  }\r\n};\r\n\r\n/** Dispatch an event to an Element \r\n * @param {string} eventName\r\n * @param {Element} element\r\n */\r\nol_ext_element.dispatchEvent = function (eventName, element) {\r\n  var event;\r\n  try {\r\n    event = new CustomEvent(eventName);\r\n  } catch(e) {\r\n    // Try customevent on IE\r\n    event = document.createEvent(\"CustomEvent\");\r\n    event.initCustomEvent(eventName, true, true, {});\r\n  }\r\n  element.dispatchEvent(event);\r\n};\r\n\r\nexport default ol_ext_element\r\n","/*\tCopyright (c) 2016 Jean-Marc VIGLINO, \r\n  released under the CeCILL-B license (French BSD license)\r\n  (http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt).\r\n*/\r\n\r\nimport ol_ext_inherits from '../util/ext'\r\nimport ol_Overlay from 'ol/Overlay'\r\nimport ol_ext_element from '../util/element'\r\n\r\n/**\r\n * @classdesc\r\n * A popup element to be displayed over the map and attached to a single map\r\n * location. The popup are customized using CSS.\r\n *\r\n * @example\r\nvar popup = new ol_Overlay_Popup();\r\nmap.addOverlay(popup);\r\npopup.show(coordinate, \"Hello!\");\r\npopup.hide();\r\n*\r\n* @constructor\r\n* @extends {ol_Overlay}\r\n* @fires show\r\n* @fires hide\r\n* @param {} options Extend Overlay options \r\n*\t @param {String} [options.popupClass] the a class of the overlay to style the popup.\r\n*\t @param {boolean} [options.anim Animate=false] the popup the popup, default false.\r\n*\t @param {bool} [options.closeBox=false] popup has a close box, default false.\r\n*\t @param {function|undefined} [options.onclose] callback function when popup is closed\r\n*\t @param {function|undefined} [options.onshow] callback function when popup is shown\r\n*\t @param {Number|Array<number>} [options.offsetBox] an offset box\r\n*\t @param {ol.OverlayPositioning | string | undefined} options.positioning \r\n*\t\tthe 'auto' positioning var the popup choose its positioning to stay on the map.\r\n*\t @param {boolean} [options.minibar=false] add a mini vertical bar\r\n* @api stable\r\n*/\r\nvar ol_Overlay_Popup = function (options) {\r\n  options = options || {};\r\n  \r\n  if (typeof(options.offsetBox)==='number') this.offsetBox = [options.offsetBox,options.offsetBox,options.offsetBox,options.offsetBox];\r\n  else this.offsetBox = options.offsetBox;\r\n\r\n  // Popup div\r\n  var element = document.createElement(\"div\");\r\n  //element.classList.add('ol-overlaycontainer-stopevent');\r\n  options.element = element;\r\n  // Closebox\r\n  this.closeBox = options.closeBox;\r\n  this.onclose = options.onclose;\r\n  this.onshow = options.onshow;\r\n  ol_ext_element.create('BUTTON', {\r\n    className: 'closeBox' + (options.closeBox ? ' hasclosebox':''),\r\n    type: 'button',\r\n    click: function() {\r\n      this.hide();\r\n    }.bind(this),\r\n    parent: element\r\n  });\r\n  // Anchor div\r\n  if (options.anchor!==false) {\r\n    ol_ext_element.create('DIV', {\r\n      className: 'anchor',\r\n      parent: element\r\n    })\r\n  }\r\n\r\n  // Content\r\n  this.content = ol_ext_element.create('DIV', { \r\n    html: options.html || '',\r\n    className: \"ol-popup-content\",\r\n    parent: element\r\n  });\r\n  if (options.minibar) {\r\n    ol_ext_element.scrollDiv(this.content, {\r\n      vertical: true,\r\n      mousewheel: true,\r\n      minibar: true\r\n    });\r\n  }\r\n\r\n  // Stop event\r\n  if (options.stopEvent) {\r\n    element.addEventListener(\"mousedown\", function(e){ e.stopPropagation(); });\r\n    element.addEventListener(\"touchstart\", function(e){ e.stopPropagation(); });\r\n  }\r\n\r\n  ol_Overlay.call(this, options);\r\n  this._elt = element;\r\n\r\n  // call setPositioning first in constructor so getClassPositioning is called only once\r\n  this.setPositioning(options.positioning || 'auto');\r\n  this.setPopupClass(options.popupClass || options.className || 'default');\r\n  if (options.anim) this.addPopupClass('anim');\r\n\r\n  // Show popup on timeout (for animation purposes)\r\n  if (options.position) {\r\n    setTimeout(function(){ this.show(options.position); }.bind(this));\r\n  }\r\n};\r\nol_ext_inherits(ol_Overlay_Popup, ol_Overlay);\r\n\r\n/**\r\n * Get CSS class of the popup according to its positioning.\r\n * @private\r\n */\r\nol_Overlay_Popup.prototype.getClassPositioning = function () {\r\n  var c = \"\";\r\n  var pos = this.getPositioning();\r\n  if (/bottom/.test(pos)) c += \"ol-popup-bottom \";\r\n  if (/top/.test(pos)) c += \"ol-popup-top \";\r\n  if (/left/.test(pos)) c += \"ol-popup-left \";\r\n  if (/right/.test(pos)) c += \"ol-popup-right \";\r\n  if (/^center/.test(pos)) c += \"ol-popup-middle \";\r\n  if (/center$/.test(pos)) c += \"ol-popup-center \";\r\n  return c;\r\n};\r\n\r\n/**\r\n * Set a close box to the popup.\r\n * @param {bool} b\r\n * @api stable\r\n */\r\nol_Overlay_Popup.prototype.setClosebox = function (b) {\r\n  this.closeBox = b;\r\n  if (b) this.element.classList.add(\"hasclosebox\");\r\n  else this.element.classList.remove(\"hasclosebox\");\r\n};\r\n\r\n/**\r\n * Set the CSS class of the popup.\r\n * @param {string} c class name.\r\n * @api stable\r\n */\r\nol_Overlay_Popup.prototype.setPopupClass = function (c) {\r\n  var classes = [\"ol-popup\"];\r\n  if (this.getVisible()) classes.push('visible');\r\n  this.element.className = \"\";\r\n  var classesPositioning = this.getClassPositioning().split(' ')\r\n    .filter(function(className) {\r\n      return className.length > 0;\r\n    });\r\n  if (c) {\r\n    c.split(' ').filter(function(className) {\r\n      return className.length > 0;\r\n    })\r\n    .forEach(function(className) {\r\n      classes.push(className);\r\n    });\r\n  } else {\r\n    classes.push(\"default\");\r\n  }\r\n  classesPositioning.forEach(function(className) {\r\n    classes.push(className);\r\n  });\r\n  if (this.closeBox) {\r\n    classes.push(\"hasclosebox\");\r\n  }\r\n  this.element.classList.add.apply(this.element.classList, classes);\r\n};\r\n\r\n/**\r\n * Add a CSS class to the popup.\r\n * @param {string} c class name.\r\n * @api stable\r\n */\r\nol_Overlay_Popup.prototype.addPopupClass = function (c) {\r\n  this.element.classList.add(c);\r\n};\r\n\r\n/**\r\n * Remove a CSS class to the popup.\r\n * @param {string} c class name.\r\n * @api stable\r\n */\r\nol_Overlay_Popup.prototype.removePopupClass = function (c) {\r\n  this.element.classList.remove(c);\r\n};\r\n\r\n/**\r\n * Set positionning of the popup\r\n * @param {ol.OverlayPositioning | string | undefined} pos an ol.OverlayPositioning \r\n * \t\tor 'auto' to var the popup choose the best position\r\n * @api stable\r\n */\r\nol_Overlay_Popup.prototype.setPositioning = function (pos) {\r\n  if (pos === undefined)\r\n    return;\r\n  if (/auto/.test(pos)) {\r\n    this.autoPositioning = pos.split('-');\r\n    if (this.autoPositioning.length==1) this.autoPositioning[1]=\"auto\";\r\n  } else {\r\n    this.autoPositioning = false;\r\n  }\r\n  pos = pos.replace(/auto/g,\"center\");\r\n  if (pos==\"center\") pos = \"bottom-center\";\r\n  this.setPositioning_(pos);\r\n};\r\n\r\n/** @private\r\n * @param {ol.OverlayPositioning | string | undefined} pos\r\n */\r\nol_Overlay_Popup.prototype.setPositioning_ = function (pos) {\r\n  if (this.element) {\r\n    ol_Overlay.prototype.setPositioning.call(this, pos);\r\n    this.element.classList.remove(\"ol-popup-top\", \"ol-popup-bottom\", \"ol-popup-left\", \"ol-popup-right\", \"ol-popup-center\", \"ol-popup-middle\");\r\n    var classes = this.getClassPositioning().split(' ')\r\n      .filter(function(className) {\r\n        return className.length > 0;\r\n      });\r\n    this.element.classList.add.apply(this.element.classList, classes);\r\n  }\r\n};\r\n\r\n/** Check if popup is visible\r\n* @return {boolean}\r\n*/\r\nol_Overlay_Popup.prototype.getVisible = function () {\r\n  return this.element.classList.contains(\"visible\");\r\n};\r\n\r\n/**\r\n * Set the position and the content of the popup.\r\n * @param {ol.Coordinate|string} coordinate the coordinate of the popup or the HTML content.\r\n * @param {string|undefined} html the HTML content (undefined = previous content).\r\n * @example\r\nvar popup = new ol_Overlay_Popup();\r\n// Show popup\r\npopup.show([166000, 5992000], \"Hello world!\");\r\n// Move popup at coord with the same info\r\npopup.show([167000, 5990000]);\r\n// set new info\r\npopup.show(\"New informations\");\r\n* @api stable\r\n*/\r\nol_Overlay_Popup.prototype.show = function (coordinate, html) {\r\n  if (!html && typeof(coordinate)=='string') {\r\n    html = coordinate; \r\n    coordinate = null;\r\n  }\r\n  if (coordinate===true) {\r\n    coordinate = this.getPosition();\r\n  }\r\n  \r\n  var self = this;\r\n  var map = this.getMap();\r\n  if (!map) return;\r\n  \r\n  if (html && html !== this.prevHTML) {\r\n    // Prevent flickering effect\r\n    this.prevHTML = html;\r\n    this.content.innerHTML = '';\r\n    if (html instanceof Element) {\r\n      this.content.appendChild(html);\r\n    } else {\r\n      ol_ext_element.create('DIV', {\r\n        html: html,\r\n        parent: this.content\r\n      })\r\n    }\r\n    // Refresh when loaded (img)\r\n    Array.prototype.slice.call(this.content.querySelectorAll('img'))\r\n      .forEach(function(image) {\r\n        image.addEventListener('load', function() {\r\n          try { map.renderSync(); } catch(e) { /* ok */ }\r\n          self.content.dispatchEvent(new Event('scroll'));\r\n        });\r\n      });\r\n  }\r\n\r\n  if (coordinate) {\r\n    // Auto positionning\r\n    if (this.autoPositioning) {\r\n      var p = map.getPixelFromCoordinate(coordinate);\r\n      var s = map.getSize();\r\n      var pos=[];\r\n      if (this.autoPositioning[0]=='auto') {\r\n        pos[0] = (p[1]<s[1]/3) ? \"top\" : \"bottom\";\r\n      }\r\n      else pos[0] = this.autoPositioning[0];\r\n      pos[1] = (p[0]<2*s[0]/3) ? \"left\" : \"right\";\r\n      this.setPositioning_(pos[0]+\"-\"+pos[1]);\r\n      if (this.offsetBox) {\r\n        this.setOffset([this.offsetBox[pos[1]==\"left\"?2:0], this.offsetBox[pos[0]==\"top\"?3:1] ]);\r\n      }\r\n    } else {\r\n      if (this.offsetBox){\r\n        this.setOffset(this.offsetBox);\r\n      }\r\n    }\r\n    // Show\r\n    this.setPosition(coordinate);\r\n    // Set visible class (wait to compute the size/position first)\r\n    this.element.parentElement.style.display = '';\r\n    if (typeof (this.onshow) == 'function') this.onshow();\r\n    this.dispatchEvent({ type: 'show' })\r\n    this._tout = setTimeout (function() {\r\n      self.element.classList.add('visible'); \r\n    }, 0);\r\n  }\r\n};\r\n\r\n/**\r\n * Hide the popup\r\n * @api stable\r\n */\r\nol_Overlay_Popup.prototype.hide = function () {\r\n  if (this.getPosition() == undefined) return;\r\n  if (typeof (this.onclose) == 'function') this.onclose();\r\n  this.setPosition(undefined);\r\n  if (this._tout) clearTimeout(this._tout);\r\n  this.element.classList.remove(\"visible\");\r\n  this.dispatchEvent({ type: 'hide' });\r\n};\r\n\r\nexport  default ol_Overlay_Popup\r\n","/** @namespace  ol.ext\r\n */\r\n/*global ol*/\r\nif (window.ol && !ol.ext) {\r\n  ol.ext = {};\r\n}\r\n\r\n/** Inherit the prototype methods from one constructor into another.\r\n * replace deprecated ol method\r\n *\r\n * @param {!Function} childCtor Child constructor.\r\n * @param {!Function} parentCtor Parent constructor.\r\n * @function module:ol.inherits\r\n * @api\r\n */\r\nvar ol_ext_inherits = function(child,parent) {\r\n  child.prototype = Object.create(parent.prototype);\r\n  child.prototype.constructor = child;\r\n};\r\n\r\n// Compatibilty with ol > 5 to be removed when v6 is out\r\nif (window.ol) {\r\n  if (!ol.inherits) ol.inherits = ol_ext_inherits;\r\n}\r\n\r\n/* IE Polyfill */\r\n// NodeList.forEach\r\nif (window.NodeList && !NodeList.prototype.forEach) {\r\n  NodeList.prototype.forEach = Array.prototype.forEach;\r\n}\r\n// Element.remove\r\nif (window.Element && !Element.prototype.remove) {\r\n  Element.prototype.remove = function() {\r\n    if (this.parentNode) this.parentNode.removeChild(this);\r\n  }\r\n}\r\n/* End Polyfill */\r\n\r\nexport { ol_ext_inherits }\r\nexport default ol_ext_inherits\r\n"],"sourceRoot":""}